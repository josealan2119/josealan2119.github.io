import{a as V,b as xe,c as gf,d as M,e as Yw,f as hu,g as Zw,h as Jw,i as Xw,j as mf,k as eI,l as sa,m as yf,n as fu,o as tI,p as nI,q as vf,r as Oe,s as oi,t as In,u as pu,v as aa,w as rI,x as iI,y as yr,z as Bt}from"./chunk-4ZHOUZTK.js";var wf=null;var _f=1,oI=Symbol("SIGNAL");function Ce(n){let e=wf;return wf=n,e}function sI(){return wf}var If={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fx(n){if(!(bf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===_f)){if(!n.producerMustRecompute(n)&&!Df(n)){n.dirty=!1,n.lastCleanEpoch=_f;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=_f}}function Ef(n){return n&&(n.nextProducerIndex=0),Ce(n)}function aI(n,e){if(Ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(bf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Tf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Df(n){Sf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Fx(t),r!==t.version))return!0}return!1}function Cf(n){if(Sf(n),bf(n))for(let e=0;e<n.producerNode.length;e++)Tf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Tf(n,e){if(Lx(n),n.liveConsumerNode.length===1&&Vx(n))for(let r=0;r<n.producerNode.length;r++)Tf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Sf(i),i.producerIndexOfThis[r]=e}}function bf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Sf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Lx(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Vx(n){return n.producerNode!==void 0}function jx(){throw new Error}var Bx=jx;function cI(n){Bx=n}function re(n){return typeof n=="function"}function io(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var gu=io(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function si(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Be=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(o){e=o instanceof gu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{uI(o)}catch(s){e=e??[],s instanceof gu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)uI(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&si(t,e)}remove(e){let{_finalizers:t}=this;t&&si(t,e),e instanceof n&&e._removeParent(this)}};Be.EMPTY=(()=>{let n=new Be;return n.closed=!0,n})();var Af=Be.EMPTY;function mu(n){return n instanceof Be||n&&"closed"in n&&re(n.remove)&&re(n.add)&&re(n.unsubscribe)}function uI(n){re(n)?n():n.unsubscribe()}var an={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var oo={setTimeout(n,e,...t){let{delegate:r}=oo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=oo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function yu(n){oo.setTimeout(()=>{let{onUnhandledError:e}=an;if(e)e(n);else throw n})}function ca(){}var lI=xf("C",void 0,void 0);function dI(n){return xf("E",void 0,n)}function hI(n){return xf("N",n,void 0)}function xf(n,e,t){return{kind:n,value:e,error:t}}var ai=null;function so(n){if(an.useDeprecatedSynchronousErrorHandling){let e=!ai;if(e&&(ai={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ai;if(ai=null,t)throw r}}else n()}function fI(n){an.useDeprecatedSynchronousErrorHandling&&ai&&(ai.errorThrown=!0,ai.error=n)}var ci=class extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,mu(e)&&e.add(this)):this.destination=Hx}static create(e,t,r){return new qn(e,t,r)}next(e){this.isStopped?Rf(hI(e),this):this._next(e)}error(e){this.isStopped?Rf(dI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Rf(lI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Ux=Function.prototype.bind;function Mf(n,e){return Ux.call(n,e)}var Nf=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){vu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){vu(r)}else vu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){vu(t)}}},qn=class extends ci{constructor(e,t,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&an.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Mf(e.next,o),error:e.error&&Mf(e.error,o),complete:e.complete&&Mf(e.complete,o)}):i=e}this.destination=new Nf(i)}};function vu(n){an.useDeprecatedSynchronousErrorHandling?fI(n):yu(n)}function $x(n){throw n}function Rf(n,e){let{onStoppedNotification:t}=an;t&&oo.setTimeout(()=>t(n,e))}var Hx={closed:!0,next:ca,error:$x,complete:ca};var ao=typeof Symbol=="function"&&Symbol.observable||"@@observable";function It(n){return n}function Pf(...n){return kf(n)}function kf(n){return n.length===0?It:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=zx(t)?t:new qn(t,r,i);return so(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=pI(r),new r((i,o)=>{let s=new qn({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ao](){return this}pipe(...t){return kf(t)(this)}toPromise(t){return t=pI(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function pI(n){var e;return(e=n??an.Promise)!==null&&e!==void 0?e:Promise}function qx(n){return n&&re(n.next)&&re(n.error)&&re(n.complete)}function zx(n){return n&&n instanceof ci||qx(n)&&mu(n)}function Of(n){return re(n?.lift)}function ue(n){return e=>{if(Of(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new Ff(n,e,t,r,i)}var Ff=class extends ci{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function co(){return ue((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var uo=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Of(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return co()(this)}};var gI=io(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new _u(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new gI}next(t){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){so(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Af:(this.currentObservers=null,o.push(t),new Be(()=>{this.currentObservers=null,si(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new _u(e,t),n})(),_u=class extends qe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Af}};var ct=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ua={now(){return(ua.delegate||Date).now()},delegate:void 0};var wu=class extends qe{constructor(e=1/0,t=1/0,r=ua){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var Iu=class extends Be{constructor(e,t){super()}schedule(e,t=0){return this}};var la={setInterval(n,e,...t){let{delegate:r}=la;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=la;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var lo=class extends Iu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return la.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&la.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,si(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ho=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ho.now=ua.now;var fo=class extends ho{constructor(e,t=ho.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var da=new fo(lo);var Eu=class extends lo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Du=class extends fo{};var Lf=new Du(Eu);var Et=new pe(n=>n.complete());function mI(n){return n&&re(n.schedule)}function Vf(n){return n[n.length-1]}function yI(n){return re(Vf(n))?n.pop():void 0}function En(n){return mI(Vf(n))?n.pop():void 0}function vI(n,e){return typeof Vf(n)=="number"?n.pop():e}var Cu=n=>n&&typeof n.length=="number"&&typeof n!="function";function Tu(n){return re(n?.then)}function bu(n){return re(n[ao])}function Su(n){return Symbol.asyncIterator&&re(n?.[Symbol.asyncIterator])}function Au(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Gx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xu=Gx();function Mu(n){return re(n?.[xu])}function Ru(n){return Zw(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield hu(t.read());if(i)return yield hu(void 0);yield yield hu(r)}}finally{t.releaseLock()}})}function Nu(n){return re(n?.getReader)}function Fe(n){if(n instanceof pe)return n;if(n!=null){if(bu(n))return Wx(n);if(Cu(n))return Kx(n);if(Tu(n))return Qx(n);if(Su(n))return _I(n);if(Mu(n))return Yx(n);if(Nu(n))return Zx(n)}throw Au(n)}function Wx(n){return new pe(e=>{let t=n[ao]();if(re(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Kx(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Qx(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,yu)})}function Yx(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function _I(n){return new pe(e=>{Jx(n,e).catch(t=>e.error(t))})}function Zx(n){return _I(Ru(n))}function Jx(n,e){var t,r,i,o;return Yw(this,void 0,void 0,function*(){try{for(t=Jw(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Mt(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Wt(n,e=0){return ue((t,r)=>{t.subscribe(de(r,i=>Mt(r,n,()=>r.next(i),e),()=>Mt(r,n,()=>r.complete(),e),i=>Mt(r,n,()=>r.error(i),e)))})}function cn(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function wI(n,e){return Fe(n).pipe(cn(e),Wt(e))}function II(n,e){return Fe(n).pipe(cn(e),Wt(e))}function EI(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function DI(n,e){return new pe(t=>{let r;return Mt(t,e,()=>{r=n[xu](),Mt(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Pu(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{Mt(t,e,()=>{let r=n[Symbol.asyncIterator]();Mt(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function CI(n,e){return Pu(Ru(n),e)}function TI(n,e){if(n!=null){if(bu(n))return wI(n,e);if(Cu(n))return EI(n,e);if(Tu(n))return II(n,e);if(Su(n))return Pu(n,e);if(Mu(n))return DI(n,e);if(Nu(n))return CI(n,e)}throw Au(n)}function Ee(n,e){return e?TI(n,e):Fe(n)}function X(...n){let e=En(n);return Ee(n,e)}function po(n,e){let t=re(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function jf(n){return!!n&&(n instanceof pe||re(n.lift)&&re(n.subscribe))}var zn=io(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function G(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:Xx}=Array;function eM(n,e){return Xx(e)?n(...e):n(e)}function bI(n){return G(e=>eM(n,e))}var{isArray:tM}=Array,{getPrototypeOf:nM,prototype:rM,keys:iM}=Object;function SI(n){if(n.length===1){let e=n[0];if(tM(e))return{args:e,keys:null};if(oM(e)){let t=iM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function oM(n){return n&&typeof n=="object"&&nM(n)===rM}function AI(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ha(...n){let e=En(n),t=yI(n),{args:r,keys:i}=SI(n);if(r.length===0)return Ee([],e);let o=new pe(sM(r,e,i?s=>AI(i,s):It));return t?o.pipe(bI(t)):o}function sM(n,e,t=It){return r=>{xI(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)xI(e,()=>{let l=Ee(n[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function xI(n,e,t){n?Mt(t,n,e):e()}function MI(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=R=>l<r?b(R):u.push(R),b=R=>{o&&e.next(R),l++;let N=!1;Fe(t(R,h++)).subscribe(de(e,B=>{i?.(B),o?v(B):e.next(B)},()=>{N=!0},void 0,()=>{if(N)try{for(l--;u.length&&l<r;){let B=u.shift();s?Mt(e,s,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return n.subscribe(de(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ye(n,e,t=1/0){return re(e)?Ye((r,i)=>G((o,s)=>e(r,o,i,s))(Fe(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>MI(r,i,n,t)))}function vr(n=1/0){return Ye(It,n)}function RI(){return vr(1)}function go(...n){return RI()(Ee(n,En(n)))}function ku(n){return new pe(e=>{Fe(n()).subscribe(e)})}function Bf(...n){let e=En(n),t=vI(n,1/0),r=n;return r.length?r.length===1?Fe(r[0]):vr(t)(Ee(r,e)):Et}function ut(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function _r(n){return ue((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=Fe(n(s,_r(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function NI(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ui(n,e){return re(e)?Ye(n,e,1):Ye(n,1)}function wr(n){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gn(n){return n<=0?()=>Et:ue((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Uf(n){return G(()=>n)}function $f(n,e=It){return n=n??aM,ue((t,r)=>{let i,o=!0;t.subscribe(de(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function aM(n,e){return n===e}function Ou(n=cM){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cM(){return new zn}function fa(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Kt(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):It,Gn(1),t?wr(e):Ou(()=>new zn))}function mo(n){return n<=0?()=>Et:ue((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Hf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?ut((i,o)=>n(i,o,r)):It,mo(1),t?wr(e):Ou(()=>new zn))}function pa(){return ue((n,e)=>{let t,r=!1;n.subscribe(de(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function li(n,e){return ue(NI(n,e,arguments.length>=2,!0))}function PI(n={}){let{connector:e=()=>new qe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let R=s;v(),R?.unsubscribe()};return ue((R,N)=>{l++,!p&&!h&&m();let B=u=u??e();N.add(()=>{l--,l===0&&!p&&!h&&(a=qf(b,i))}),B.subscribe(N),!s&&l>0&&(s=new qn({next:q=>B.next(q),error:q=>{p=!0,m(),a=qf(v,t,q),B.error(q)},complete:()=>{h=!0,m(),a=qf(v,r),B.complete()}}),Fe(R).subscribe(s))})(o)}}function qf(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new qn({next:()=>{r.unsubscribe(),n()}});return Fe(e(...t)).subscribe(r)}function Fu(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,PI({connector:()=>new wu(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function di(...n){let e=En(n);return ue((t,r)=>{(e?go(n,t,e):go(n,t)).subscribe(r)})}function Ue(n,e){return ue((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;Fe(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Lu(n,e){return re(e)?Ue(()=>n,e):Ue(()=>n)}function zf(n){return ue((e,t)=>{Fe(n).subscribe(de(t,()=>t.complete(),ca)),!t.closed&&e.subscribe(t)})}function tt(n,e,t){let r=re(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):It}var mE="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,t){super(Fp(e,t)),this.code=e}};function Fp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ba(n){return{toString:n}.toString()}var Vu="__parameters__";function uM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function yE(n,e,t){return ba(()=>{let r=uM(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Vu)?u[Vu]:Object.defineProperty(u,Vu,{value:[]})[Vu];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Yn=globalThis;function Se(n){for(let e in n)if(n[e]===Se)return e;throw Error("Could not find renamed property on target object.")}function Rt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Rt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function kI(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var lM=Se({__forward_ref__:Se});function vE(n){return n.__forward_ref__=vE,n.toString=function(){return Rt(this())},n}function Yt(n){return _E(n)?n():n}function _E(n){return typeof n=="function"&&n.hasOwnProperty(lM)&&n.__forward_ref__===vE}function H(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function yl(n){return OI(n,IE)||OI(n,EE)}function wE(n){return yl(n)!==null}function OI(n,e){return n.hasOwnProperty(e)?n[e]:null}function dM(n){let e=n&&(n[IE]||n[EE]);return e||null}function FI(n){return n&&(n.hasOwnProperty(LI)||n.hasOwnProperty(hM))?n[LI]:null}var IE=Se({\u0275prov:Se}),LI=Se({\u0275inj:Se}),EE=Se({ngInjectableDef:Se}),hM=Se({ngInjectorDef:Se}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=H({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function DE(n){return n&&!!n.\u0275providers}var fM=Se({\u0275cmp:Se}),pM=Se({\u0275dir:Se}),gM=Se({\u0275pipe:Se}),mM=Se({\u0275mod:Se}),zu=Se({\u0275fac:Se}),ma=Se({__NG_ELEMENT_ID__:Se}),VI=Se({__NG_ENV_ID__:Se});function va(n){return typeof n=="string"?n:n==null?"":String(n)}function yM(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():va(n)}function vM(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function Lp(n,e){throw new ee(-201,!1)}var le=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(le||{}),ep;function CE(){return ep}function Qt(n){let e=ep;return ep=n,e}function TE(n,e,t){let r=yl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&le.Optional)return null;if(e!==void 0)return e;Lp(n,"Injector")}var _M={},_a=_M,tp="__NG_DI_FLAG__",Gu="ngTempTokenPath",wM="ngTokenPath",IM=/\n/gm,EM="\u0275",jI="__source",Io;function DM(){return Io}function Ir(n){let e=Io;return Io=n,e}function CM(n,e=le.Default){if(Io===void 0)throw new ee(-203,!1);return Io===null?TE(n,void 0,e):Io.get(n,e&le.Optional?null:void 0,e)}function O(n,e=le.Default){return(CE()||CM)(Yt(n),e)}function j(n,e=le.Default){return O(n,vl(e))}function vl(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function np(n){let e=[];for(let t=0;t<n.length;t++){let r=Yt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,o=le.Default;for(let s=0;s<r.length;s++){let a=r[s],u=TM(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(O(i,o))}else e.push(O(r))}return e}function bE(n,e){return n[tp]=e,n.prototype[tp]=e,n}function TM(n){return n[tp]}function bM(n,e,t,r){let i=n[Gu];throw e[jI]&&i.unshift(e[jI]),n.message=SM(`
`+n.message,i,t,r),n[wM]=i,n[Gu]=null,n}function SM(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==EM?n.slice(2):n;let i=Rt(e);if(Array.isArray(e))i=e.map(Rt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Rt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(IM,`
  `)}`}var Po=bE(yE("Optional"),8);var Vp=bE(yE("SkipSelf"),4);function Do(n,e){let t=n.hasOwnProperty(zu);return t?n[zu]:null}function jp(n,e){n.forEach(t=>Array.isArray(t)?jp(t,e):e(t))}function SE(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var wa={},Dn=[],Co=new W(""),AE=new W("",-1),xE=new W(""),Ku=class{get(e,t=_a){if(t===_a){let r=new Error(`NullInjectorError: No provider for ${Rt(e)}!`);throw r.name="NullInjectorError",r}return t}},ME=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(ME||{}),Tn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Tn||{}),Cr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Cr||{});function AM(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function rp(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];MM(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function xM(n){return n===3||n===4||n===6}function MM(n){return n.charCodeAt(0)===64}function Bp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?BI(n,t,i,null,e[++r]):BI(n,t,i,null,null))}}return n}function BI(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var RE="ng-template";function RM(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&AM(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Up(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function Up(n){return n.type===4&&n.value!==RE}function NM(n,e,t){let r=n.type===4&&!t?RE:n.value;return e===r}function PM(n,e,t){let r=4,i=n.attrs,o=i!==null?FM(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!un(r)&&!un(u))return!1;if(s&&un(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!NM(n,u,t)||u===""&&e.length===1){if(un(r))return!1;s=!0}}else if(r&8){if(i===null||!RM(n,i,u,t)){if(un(r))return!1;s=!0}}else{let l=e[++a],h=kM(u,i,Up(n),t);if(h===-1){if(un(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(un(r))return!1;s=!0}}}}return un(r)||s}function un(n){return(n&1)===0}function kM(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return LM(e,n)}function OM(n,e,t=!1){for(let r=0;r<e.length;r++)if(PM(n,e[r],t))return!0;return!1}function FM(n){for(let e=0;e<n.length;e++){let t=n[e];if(xM(t))return e}return n.length}function LM(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function UI(n,e){return n?":not("+e.trim()+")":e}function VM(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!un(s)&&(e+=UI(o,i),i=""),r=s,o=o||!un(r);t++}return i!==""&&(e+=UI(o,i)),e}function jM(n){return n.map(VM).join(",")}function BM(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!un(i))break;i=o}r++}return{attrs:e,classes:t}}function ot(n){return ba(()=>{let e=FE(n),t=xe(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===ME.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Tn.Emulated,styles:n.styles||Dn,_:null,schemas:n.schemas||null,tView:null,id:""});LE(t);let r=n.dependencies;return t.directiveDefs=HI(r,!1),t.pipeDefs=HI(r,!0),t.id=HM(t),t})}function UM(n){return Tr(n)||NE(n)}function $M(n){return n!==null}function bt(n){return ba(()=>({type:n.type,bootstrap:n.bootstrap||Dn,declarations:n.declarations||Dn,imports:n.imports||Dn,exports:n.exports||Dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function $I(n,e){if(n==null)return wa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Cr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Cr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function Sa(n){return ba(()=>{let e=FE(n);return LE(e),e})}function Tr(n){return n[fM]||null}function NE(n){return n[pM]||null}function PE(n){return n[gM]||null}function kE(n){let e=Tr(n)||NE(n)||PE(n);return e!==null?e.standalone:!1}function OE(n,e){let t=n[mM]||null;if(!t&&e===!0)throw new Error(`Type ${Rt(n)} does not have '\u0275mod' property.`);return t}function FE(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||wa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$I(n.inputs,e),outputs:$I(n.outputs),debugInfo:null}}function LE(n){n.features?.forEach(e=>e(n))}function HI(n,e){if(!n)return null;let t=e?PE:UM;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter($M)}function HM(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function qM(...n){return{\u0275providers:VE(!0,n),\u0275fromNgModule:!0}}function VE(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return jp(e,s=>{let a=s;ip(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&jE(i,o),t}function jE(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];$p(i,o=>{e(o,r)})}}function ip(n,e,t,r){if(n=Yt(n),!n)return!1;let i=null,o=FI(n),s=!o&&Tr(n);if(!o&&!s){let u=n.ngModule;if(o=FI(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)ip(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{jp(o.imports,h=>{ip(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&jE(l,e)}if(!a){let l=Do(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dn},i),e({provide:xE,useValue:i,multi:!0},i),e({provide:Co,useValue:()=>O(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;$p(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function $p(n,e){for(let t of n)DE(t)&&(t=t.\u0275providers),Array.isArray(t)?$p(t,e):e(t)}var zM=Se({provide:String,useValue:Se});function BE(n){return n!==null&&typeof n=="object"&&zM in n}function GM(n){return!!(n&&n.useExisting)}function WM(n){return!!(n&&n.useFactory)}function op(n){return typeof n=="function"}var _l=new W(""),Uu={},KM={},Gf;function Hp(){return Gf===void 0&&(Gf=new Ku),Gf}var Ut=class{},Ia=class extends Ut{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ap(e,s=>this.processProvider(s)),this.records.set(AE,yo(void 0,this)),i.has("environment")&&this.records.set(Ut,yo(void 0,this));let o=this.records.get(_l);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xE,Dn,le.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ir(this),r=Qt(void 0),i;try{return e()}finally{Ir(t),Qt(r)}}get(e,t=_a,r=le.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(VI))return e[VI](this);r=vl(r);let i,o=Ir(this),s=Qt(void 0);try{if(!(r&le.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=eR(e)&&yl(e);l&&this.injectableDefInScope(l)?u=yo(sp(e),Uu):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&le.Self?Hp():this.parent;return t=r&le.Optional&&t===_a?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Gu]=a[Gu]||[]).unshift(Rt(e)),o)throw a;return bM(a,e,"R3InjectorError",this.source)}else throw a}finally{Qt(s),Ir(o)}}resolveInjectorInitializers(){let e=Ce(null),t=Ir(this),r=Qt(void 0),i;try{let o=this.get(Co,Dn,le.Self);for(let s of o)s()}finally{Ir(t),Qt(r),Ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Rt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=Yt(e);let t=op(e)?e:Yt(e&&e.provide),r=YM(e);if(!op(e)&&e.multi===!0){let i=this.records.get(t);i||(i=yo(void 0,Uu,!0),i.factory=()=>np(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ce(null);try{return t.value===Uu&&(t.value=KM,t.value=t.factory()),typeof t.value=="object"&&t.value&&XM(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Yt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function sp(n){let e=yl(n),t=e!==null?e.factory:Do(n);if(t!==null)return t;if(n instanceof W)throw new ee(204,!1);if(n instanceof Function)return QM(n);throw new ee(204,!1)}function QM(n){if(n.length>0)throw new ee(204,!1);let t=dM(n);return t!==null?()=>t.factory(n):()=>new n}function YM(n){if(BE(n))return yo(void 0,n.useValue);{let e=ZM(n);return yo(e,Uu)}}function ZM(n,e,t){let r;if(op(n)){let i=Yt(n);return Do(i)||sp(i)}else if(BE(n))r=()=>Yt(n.useValue);else if(WM(n))r=()=>n.useFactory(...np(n.deps||[]));else if(GM(n))r=()=>O(Yt(n.useExisting));else{let i=Yt(n&&(n.useClass||n.provide));if(JM(n))r=()=>new i(...np(n.deps));else return Do(i)||sp(i)}return r}function yo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function JM(n){return!!n.deps}function XM(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function eR(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function ap(n,e){for(let t of n)Array.isArray(t)?ap(t,e):t&&DE(t)?ap(t.\u0275providers,e):e(t)}function An(n,e){n instanceof Ia&&n.assertNotDestroyed();let t,r=Ir(n),i=Qt(void 0);try{return e()}finally{Ir(r),Qt(i)}}function UE(){return CE()!==void 0||DM()!=null}function tR(n){if(!UE())throw new ee(-203,!1)}function nR(n){let e=Yn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function rR(n){return typeof n=="function"}var Zn=0,ge=1,ie=2,Ct=3,ln=4,dn=5,Qu=6,qI=7,br=8,To=9,bn=10,Nt=11,Ea=12,zI=13,Aa=14,Sn=15,bo=16,vo=17,So=18,wl=19,$E=20,Dr=21,Wf=22,Zt=23,Wn=25,HE=1;var pi=7,Yu=8,Zu=9,Jt=10,Ju=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ju||{});function hi(n){return Array.isArray(n)&&typeof n[HE]=="object"}function Jn(n){return Array.isArray(n)&&n[HE]===!0}function qp(n){return(n.flags&4)!==0}function Il(n){return n.componentOffset>-1}function zp(n){return(n.flags&1)===1}function xa(n){return!!n.template}function cp(n){return(n[ie]&512)!==0}var up=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function qE(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function El(){return zE}function zE(n){return n.type.prototype.ngOnChanges&&(n.setInput=oR),iR}El.ngInherit=!0;function iR(){let n=WE(this),e=n?.current;if(e){let t=n.previous;if(t===wa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function oR(n,e,t,r,i){let o=this.declaredInputs[r],s=WE(n)||sR(n,{previous:wa,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new up(l&&l.currentValue,t,u===wa),qE(n,e,i,t)}var GE="__ngSimpleChanges__";function WE(n){return n[GE]||null}function sR(n,e){return n[GE]=e}var GI=null;var Er=function(n,e,t){GI?.(n,e,t)},aR="svg",cR="math";function Kn(n){for(;Array.isArray(n);)n=n[Zn];return n}function uR(n,e){return Kn(e[n])}function xn(n,e){return Kn(e[n.index])}function KE(n,e){return n.data[e]}function ko(n,e){let t=e[n];return hi(t)?t:t[Zn]}function Gp(n){return(n[ie]&128)===128}function lR(n){return Jn(n[Ct])}function Ao(n,e){return e==null?null:n[e]}function QE(n){n[vo]=0}function YE(n){n[ie]&1024||(n[ie]|=1024,Gp(n)&&Cl(n))}function Dl(n){return!!(n[ie]&9216||n[Zt]?.dirty)}function lp(n){n[bn].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),Dl(n)&&Cl(n)}function Cl(n){n[bn].changeDetectionScheduler?.notify(0);let e=gi(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!Gp(e)));)e=gi(e)}function ZE(n,e){if((n[ie]&256)===256)throw new ee(911,!1);n[Dr]===null&&(n[Dr]=[]),n[Dr].push(e)}function dR(n,e){if(n[Dr]===null)return;let t=n[Dr].indexOf(e);t!==-1&&n[Dr].splice(t,1)}function gi(n){let e=n[Ct];return Jn(e)?e[Ct]:e}var Ie={lFrame:aD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var JE=!1;function hR(){return Ie.lFrame.elementDepthCount}function fR(){Ie.lFrame.elementDepthCount++}function pR(){Ie.lFrame.elementDepthCount--}function XE(){return Ie.bindingsEnabled}function gR(){return Ie.skipHydrationRootTNode!==null}function mR(n){return Ie.skipHydrationRootTNode===n}function yR(){Ie.skipHydrationRootTNode=null}function nt(){return Ie.lFrame.lView}function Mr(){return Ie.lFrame.tView}function hn(){let n=eD();for(;n!==null&&n.type===64;)n=n.parent;return n}function eD(){return Ie.lFrame.currentTNode}function vR(){let n=Ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function vi(n,e){let t=Ie.lFrame;t.currentTNode=n,t.isParent=e}function Wp(){return Ie.lFrame.isParent}function tD(){Ie.lFrame.isParent=!1}function nD(){return JE}function WI(n){JE=n}function _R(){return Ie.lFrame.bindingIndex}function wR(n){return Ie.lFrame.bindingIndex=n}function rD(){return Ie.lFrame.bindingIndex++}function IR(n){let e=Ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function ER(){return Ie.lFrame.inI18n}function DR(n,e){let t=Ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,dp(e)}function CR(){return Ie.lFrame.currentDirectiveIndex}function dp(n){Ie.lFrame.currentDirectiveIndex=n}function iD(n){Ie.lFrame.currentQueryIndex=n}function TR(n){let e=n[ge];return e.type===2?e.declTNode:e.type===1?n[dn]:null}function oD(n,e,t){if(t&le.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&le.Host);)if(i=TR(o),i===null||(o=o[Aa],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Ie.lFrame=sD();return r.currentTNode=e,r.lView=n,!0}function Kp(n){let e=sD(),t=n[ge];Ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sD(){let n=Ie.lFrame,e=n===null?null:n.child;return e===null?aD(n):e}function aD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function cD(){let n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var uD=cD;function Qp(){let n=cD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Tl(){return Ie.lFrame.selectedIndex}function mi(n){Ie.lFrame.selectedIndex=n}function bR(){let n=Ie.lFrame;return KE(n.tView,n.selectedIndex)}function SR(){return Ie.lFrame.currentNamespace}var lD=!0;function bl(){return lD}function Sl(n){lD=n}function AR(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=zE(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Al(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function $u(n,e,t){dD(n,e,3,t)}function Hu(n,e,t,r){(n[ie]&3)===t&&dD(n,e,t,r)}function Kf(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function dD(n,e,t,r){let i=r!==void 0?n[vo]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[vo]+=65536),(a<o||o==-1)&&(xR(n,t,e,u),n[vo]=(n[vo]&4294901760)+u+2),u++}function KI(n,e){Er(4,n,e);let t=Ce(null);try{e.call(n)}finally{Ce(t),Er(5,n,e)}}function xR(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ie]>>14<n[vo]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,KI(a,o)):KI(a,o)}var Eo=-1,Da=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function MR(n){return n instanceof Da}function RR(n){return(n.flags&8)!==0}function NR(n){return(n.flags&16)!==0}var Qf={},hp=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=vl(r);let i=this.injector.get(e,Qf,r);return i!==Qf||t===Qf?i:this.parentInjector.get(e,t,r)}};function hD(n){return n!==Eo}function Xu(n){return n&32767}function PR(n){return n>>16}function el(n,e){let t=PR(n),r=e;for(;t>0;)r=r[Aa],t--;return r}var fp=!0;function QI(n){let e=fp;return fp=n,e}var kR=256,fD=kR-1,pD=5,OR=0,Cn={};function FR(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ma)&&(r=t[ma]),r==null&&(r=t[ma]=OR++);let i=r&fD,o=1<<i;e.data[n+(i>>pD)]|=o}function gD(n,e){let t=mD(n,e);if(t!==-1)return t;let r=e[ge];r.firstCreatePass&&(n.injectorIndex=e.length,Yf(r.data,n),Yf(e,null),Yf(r.blueprint,null));let i=Yp(n,e),o=n.injectorIndex;if(hD(i)){let s=Xu(i),a=el(i,e),u=a[ge].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Yf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function mD(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Yp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ID(i),r===null)return Eo;if(t++,i=i[Aa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Eo}function LR(n,e,t){FR(n,e,t)}function yD(n,e,t){if(t&le.Optional||n!==void 0)return n;Lp(e,"NodeInjector")}function vD(n,e,t,r){if(t&le.Optional&&r===void 0&&(r=null),!(t&(le.Self|le.Host))){let i=n[To],o=Qt(void 0);try{return i?i.get(e,r,t&le.Optional):TE(e,r,t&le.Optional)}finally{Qt(o)}}return yD(r,e,t)}function _D(n,e,t,r=le.Default,i){if(n!==null){if(e[ie]&2048&&!(r&le.Self)){let s=$R(n,e,t,r,Cn);if(s!==Cn)return s}let o=wD(n,e,t,r,Cn);if(o!==Cn)return o}return vD(e,t,r,i)}function wD(n,e,t,r,i){let o=BR(t);if(typeof o=="function"){if(!oD(e,n,r))return r&le.Host?yD(i,t,r):vD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&le.Optional))Lp(t);else return s}finally{uD()}}else if(typeof o=="number"){let s=null,a=mD(n,e),u=Eo,l=r&le.Host?e[Sn][dn]:null;for((a===-1||r&le.SkipSelf)&&(u=a===-1?Yp(n,e):e[a+8],u===Eo||!ZI(r,!1)?a=-1:(s=e[ge],a=Xu(u),e=el(u,e)));a!==-1;){let h=e[ge];if(YI(o,a,h.data)){let p=VR(a,e,t,s,r,l);if(p!==Cn)return p}u=e[a+8],u!==Eo&&ZI(r,e[ge].data[a+8]===l)&&YI(o,a,e)?(s=h,a=Xu(u),e=el(u,e)):a=-1}}return i}function VR(n,e,t,r,i,o){let s=e[ge],a=s.data[n+8],u=r==null?Il(a)&&fp:r!=s&&(a.type&3)!==0,l=i&le.Host&&o===a,h=jR(a,s,t,u,l);return h!==null?Ca(e,s,h,a):Cn}function jR(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=s[v];if(v<u&&t===b||v>=u&&b.type===t)return v}if(i){let v=s[u];if(v&&xa(v)&&v.type===t)return u}return null}function Ca(n,e,t,r){let i=n[t],o=e.data;if(MR(i)){let s=i;s.resolving&&vM(yM(o[t]));let a=QI(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?Qt(s.injectImpl):null,h=oD(n,r,le.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&AR(t,o[t],e)}finally{l!==null&&Qt(l),QI(a),s.resolving=!1,uD()}}return i}function BR(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ma)?n[ma]:void 0;return typeof e=="number"?e>=0?e&fD:UR:e}function YI(n,e,t){let r=1<<n;return!!(t[e+(n>>pD)]&r)}function ZI(n,e){return!(n&le.Self)&&!(n&le.Host&&e)}var fi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return _D(this._tNode,this._lView,e,vl(r),t)}};function UR(){return new fi(hn(),nt())}function Zp(n){return ba(()=>{let e=n.prototype.constructor,t=e[zu]||pp(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[zu]||pp(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function pp(n){return _E(n)?()=>{let e=pp(Yt(n));return e&&e()}:Do(n)}function $R(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ie]&2048&&!(s[ie]&512);){let a=wD(o,s,t,r|le.Self,Cn);if(a!==Cn)return a;let u=o.parent;if(!u){let l=s[$E];if(l){let h=l.get(t,Cn,r);if(h!==Cn)return h}u=ID(s),s=s[Aa]}o=u}return i}function ID(n){let e=n[ge],t=e.type;return t===2?e.declTNode:t===1?n[dn]:null}function JI(n,e=null,t=null,r){let i=ED(n,e,t,r);return i.resolveInjectorInitializers(),i}function ED(n,e=null,t=null,r,i=new Set){let o=[t||Dn,qM(n)];return r=r||(typeof n=="object"?void 0:Rt(n)),new Ia(o,e||Hp(),r||null,i)}var Xt=class n{static{this.THROW_IF_NOT_FOUND=_a}static{this.NULL=new Ku}static create(e,t){if(Array.isArray(e))return JI({name:""},t,e,"");{let r=e.name??"";return JI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:n,providedIn:"any",factory:()=>O(AE)})}static{this.__NG_ELEMENT_ID__=-1}};var HR=new W("");HR.__NG_ELEMENT_ID__=n=>{let e=hn();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&le.Optional)return null;throw new ee(204,!1)};var qR="ngOriginalError";function Zf(n){return n[qR]}var DD=!0,Jp=(()=>{class n{static{this.__NG_ELEMENT_ID__=zR}static{this.__NG_ENV_ID__=t=>t}}return n})(),gp=class extends Jp{constructor(e){super(),this._lView=e}onDestroy(e){return ZE(this._lView,e),()=>dR(this._lView,e)}};function zR(){return new gp(nt())}var Oo=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})();var mp=class extends qe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,UE()&&(this.destroyRef=j(Jp,{optional:!0})??void 0,this.pendingTasks=j(Oo,{optional:!0})??void 0)}emit(e){let t=Ce(null);try{super.next(e)}finally{Ce(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Be&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Dt=mp;function tl(...n){}function CD(n){let e,t;function r(){n=tl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function XI(n){return queueMicrotask(()=>n()),()=>{n=tl}}var Xp="isAngularZone",nl=Xp+"_ID",GR=0,me=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dt(!1),this.onMicrotaskEmpty=new Dt(!1),this.onStable=new Dt(!1),this.onError=new Dt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=DD}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,QR(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Xp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,WR,tl,tl);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},WR={};function eg(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function KR(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){CD(()=>{n.callbackScheduled=!1,yp(n),n.isCheckStableRunning=!0,eg(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),yp(n)}function QR(n){let e=()=>{KR(n)},t=GR++;n._inner=n._inner.fork({name:"angular",properties:{[Xp]:!0,[nl]:t,[nl+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(YR(u))return r.invokeTask(o,s,a,u);try{return eE(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),tE(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return eE(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!ZR(u)&&e(),tE(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,yp(n),eg(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function yp(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function eE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function tE(n){n._nesting--,eg(n)}var rl=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dt,this.onMicrotaskEmpty=new Dt,this.onStable=new Dt,this.onError=new Dt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function YR(n){return TD(n,"__ignore_ng_zone__")}function ZR(n){return TD(n,"__scheduler_tick__")}function TD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function JR(n="zone.js",e){return n==="noop"?new rl:n==="zone.js"?new me(e):n}var Qn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Zf(e);for(;t&&Zf(t);)t=Zf(t);return t||null}},XR=new W("",{providedIn:"root",factory:()=>{let n=j(me),e=j(Qn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function eN(){return xl(hn(),nt())}function xl(n,e){return new Ml(xn(n,e))}var Ml=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=eN}}return n})();function bD(n){return(n.flags&128)===128}var SD=new Map,tN=0;function nN(){return tN++}function rN(n){SD.set(n[wl],n)}function vp(n){SD.delete(n[wl])}var nE="__ngContext__";function Sr(n,e){hi(e)?(n[nE]=e[wl],rN(e)):n[nE]=e}function AD(n){return MD(n[Ea])}function xD(n){return MD(n[ln])}function MD(n){for(;n!==null&&!Jn(n);)n=n[ln];return n}var _p;function RD(n){_p=n}function iN(){if(_p!==void 0)return _p;if(typeof document<"u")return document;throw new ee(210,!1)}var Rl=new W("",{providedIn:"root",factory:()=>oN}),oN="ng",tg=new W(""),Pt=new W("",{providedIn:"platform",factory:()=>"unknown"});var ng=new W("",{providedIn:"root",factory:()=>iN().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var sN="h",aN="b";var cN=()=>null;function rg(n,e,t=!1){return cN(n,e,t)}var ND=!1,uN=new W("",{providedIn:"root",factory:()=>ND});var il=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mE})`}};function ig(n){return n instanceof il?n.changingThisBreaksApplicationSecurity:n}function PD(n,e){let t=lN(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${mE})`)}return t===e}function lN(n){return n instanceof il&&n.getTypeName()||null}var dN=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function kD(n){return n=String(n),n.match(dN)?n:"unsafe:"+n}var og=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(og||{});function OD(n){let e=hN();return e?e.sanitize(og.URL,n)||"":PD(n,"URL")?ig(n):kD(va(n))}function hN(){let n=nt();return n&&n[bn].sanitizer}var fN=/^>|^->|<!--|-->|--!>|<!-$/g,pN=/(<|>)/g,gN="\u200B$1\u200B";function mN(n){return n.replace(fN,e=>e.replace(pN,gN))}function FD(n){return n instanceof Function?n():n}function yN(n){return(n??j(Xt)).get(Pt)==="browser"}var _i=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_i||{}),vN;function sg(n,e){return vN(n,e)}function _o(n,e,t,r,i){if(r!=null){let o,s=!1;Jn(r)?o=r:hi(r)&&(s=!0,r=r[Zn]);let a=Kn(r);n===0&&t!==null?i==null?UD(e,t,a):ol(e,t,a,i||null,!0):n===1&&t!==null?ol(e,t,a,i||null,!0):n===2?kN(e,a,s):n===3&&e.destroyNode(a),o!=null&&FN(e,n,o,t,i)}}function _N(n,e){return n.createText(e)}function wN(n,e,t){n.setValue(e,t)}function IN(n,e){return n.createComment(mN(e))}function LD(n,e,t){return n.createElement(e,t)}function EN(n,e){VD(n,e),e[Zn]=null,e[dn]=null}function DN(n,e,t,r,i,o){r[Zn]=i,r[dn]=e,Pl(n,r,t,1,i,o)}function VD(n,e){e[bn].changeDetectionScheduler?.notify(9),Pl(n,e,e[Nt],2,null,null)}function CN(n){let e=n[Ea];if(!e)return Jf(n[ge],n);for(;e;){let t=null;if(hi(e))t=e[Ea];else{let r=e[Jt];r&&(t=r)}if(!t){for(;e&&!e[ln]&&e!==n;)hi(e)&&Jf(e[ge],e),e=e[Ct];e===null&&(e=n),hi(e)&&Jf(e[ge],e),t=e&&e[ln]}e=t}}function TN(n,e,t,r){let i=Jt+r,o=t.length;r>0&&(t[i-1][ln]=e),r<o-Jt?(e[ln]=t[i],SE(t,Jt+r,e)):(t.push(e),e[ln]=null),e[Ct]=t;let s=e[bo];s!==null&&t!==s&&jD(s,e);let a=e[So];a!==null&&a.insertView(n),lp(e),e[ie]|=128}function jD(n,e){let t=n[Zu],r=e[Ct];if(hi(r))n[ie]|=Ju.HasTransplantedViews;else{let i=r[Ct][Sn];e[Sn]!==i&&(n[ie]|=Ju.HasTransplantedViews)}t===null?n[Zu]=[e]:t.push(e)}function ag(n,e){let t=n[Zu],r=t.indexOf(e);t.splice(r,1)}function wp(n,e){if(n.length<=Jt)return;let t=Jt+e,r=n[t];if(r){let i=r[bo];i!==null&&i!==n&&ag(i,r),e>0&&(n[t-1][ln]=r[ln]);let o=Wu(n,Jt+e);EN(r[ge],r);let s=o[So];s!==null&&s.detachView(o[ge]),r[Ct]=null,r[ln]=null,r[ie]&=-129}return r}function BD(n,e){if(!(e[ie]&256)){let t=e[Nt];t.destroyNode&&Pl(n,e,t,3,null,null),CN(e)}}function Jf(n,e){if(e[ie]&256)return;let t=Ce(null);try{e[ie]&=-129,e[ie]|=256,e[Zt]&&Cf(e[Zt]),SN(n,e),bN(n,e),e[ge].type===1&&e[Nt].destroy();let r=e[bo];if(r!==null&&Jn(e[Ct])){r!==e[Ct]&&ag(r,e);let i=e[So];i!==null&&i.detachView(n)}vp(e)}finally{Ce(t)}}function bN(n,e){let t=n.cleanup,r=e[qI];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[qI]=null);let i=e[Dr];if(i!==null){e[Dr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function SN(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Da)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Er(4,a,u);try{u.call(a)}finally{Er(5,a,u)}}else{Er(4,i,o);try{o.call(i)}finally{Er(5,i,o)}}}}}function AN(n,e,t){return xN(n,e.parent,t)}function xN(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Zn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Tn.None||o===Tn.Emulated)return null}return xn(r,t)}}function ol(n,e,t,r,i){n.insertBefore(e,t,r,i)}function UD(n,e,t){n.appendChild(e,t)}function rE(n,e,t,r,i){r!==null?ol(n,e,t,r,i):UD(n,e,t)}function $D(n,e){return n.parentNode(e)}function MN(n,e){return n.nextSibling(e)}function RN(n,e,t){return PN(n,e,t)}function NN(n,e,t){return n.type&40?xn(n,t):null}var PN=NN,iE;function Nl(n,e,t,r){let i=AN(n,r,e),o=e[Nt],s=r.parent||e[dn],a=RN(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)rE(o,i,t[u],a,!1);else rE(o,i,t,a,!1);iE!==void 0&&iE(o,r,e,t,i)}function ga(n,e){if(e!==null){let t=e.type;if(t&3)return xn(e,n);if(t&4)return Ip(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ga(n,r);{let i=n[e.index];return Jn(i)?Ip(-1,i):Kn(i)}}else{if(t&128)return ga(n,e.next);if(t&32)return sg(e,n)()||Kn(n[e.index]);{let r=HD(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=gi(n[Sn]);return ga(i,r)}else return ga(n,e.next)}}}return null}function HD(n,e){if(e!==null){let r=n[Sn][dn],i=e.projection;return r.projection[i]}return null}function Ip(n,e){let t=Jt+n+1;if(t<e.length){let r=e[t],i=r[ge].firstChild;if(i!==null)return ga(r,i)}return e[pi]}function kN(n,e,t){n.removeChild(null,e,t)}function cg(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Sr(Kn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)cg(n,e,t.child,r,i,o,!1),_o(e,n,i,a,o);else if(u&32){let l=sg(t,r),h;for(;h=l();)_o(e,n,i,h,o);_o(e,n,i,a,o)}else u&16?ON(n,e,r,t,i,o):_o(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Pl(n,e,t,r,i,o){cg(t,r,n.firstChild,e,i,o,!1)}function ON(n,e,t,r,i,o){let s=t[Sn],u=s[dn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];_o(e,n,i,h,o)}else{let l=u,h=s[Ct];bD(r)&&(l.flags|=128),cg(n,e,l,h,i,o,!0)}}function FN(n,e,t,r,i){let o=t[pi],s=Kn(t);o!==s&&_o(e,n,r,o,i);for(let a=Jt;a<t.length;a++){let u=t[a];Pl(u[ge],u,n,e,r,o)}}function LN(n,e,t){n.setAttribute(e,"style",t)}function qD(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function zD(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&rp(n,e,r),i!==null&&qD(n,e,i),o!==null&&LN(n,e,o)}var Fo={};function he(n=1){GD(Mr(),nt(),Tl()+n,!1)}function GD(n,e,t,r){if(!r)if((e[ie]&3)===3){let o=n.preOrderCheckHooks;o!==null&&$u(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Hu(e,o,0,t)}mi(t)}function $e(n,e=le.Default){let t=nt();if(t===null)return O(n,e);let r=hn();return _D(r,t,Yt(n),e)}function WD(){let n="invalid";throw new Error(n)}function KD(n,e,t,r,i,o){let s=Ce(null);try{let a=null;i&Cr.SignalBased&&(a=e[r][oI]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Cr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):qE(e,a,r,o)}finally{Ce(s)}}function VN(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)mi(~i);else{let o=i,s=t[++r],a=t[++r];DR(s,o);let u=e[o];a(2,u)}}}finally{mi(-1)}}function kl(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Zn]=i,p[ie]=r|4|128|8|64,(l!==null||n&&n[ie]&2048)&&(p[ie]|=2048),QE(p),p[Ct]=p[Aa]=n,p[br]=t,p[bn]=s||n&&n[bn],p[Nt]=a||n&&n[Nt],p[To]=u||n&&n[To]||null,p[dn]=o,p[wl]=nN(),p[Qu]=h,p[$E]=l,p[Sn]=e.type==2?n[Sn]:p,p}function Ma(n,e,t,r,i){let o=n.data[e];if(o===null)o=jN(n,e,t,r,i),ER()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=vR();o.injectorIndex=s===null?-1:s.injectorIndex}return vi(o,!0),o}function jN(n,e,t,r,i){let o=eD(),s=Wp(),a=s?o:o&&o.parent,u=n.data[e]=qN(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function QD(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function YD(n,e,t,r,i){let o=Tl(),s=r&2;try{mi(-1),s&&e.length>Wn&&GD(n,e,Wn,!1),Er(s?2:0,i),t(r,i)}finally{mi(o),Er(s?3:1,i)}}function ug(n,e,t){if(qp(e)){let r=Ce(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Ce(r)}}}function lg(n,e,t){XE()&&(ZN(n,e,t,xn(t,e)),(t.flags&64)===64&&XD(n,e,t))}function dg(n,e,t=xn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function ZD(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=hg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function hg(n,e,t,r,i,o,s,a,u,l,h){let p=Wn+r,m=p+i,v=BN(p,m),b=typeof l=="function"?l():l;return v[ge]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function BN(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Fo);return t}function UN(n,e,t,r){let o=r.get(uN,ND)||t===Tn.ShadowDom,s=n.selectRootElement(e,o);return $N(s),s}function $N(n){HN(n)}var HN=()=>null;function qN(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return gR()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function oE(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Cr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?sE(r,t,l,a,u):sE(r,t,l,a)}return r}function sE(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function zN(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;u=oE(0,p.inputs,h,u,v),l=oE(1,p.outputs,h,l,b);let R=u!==null&&s!==null&&!Up(e)?sP(u,h,s):null;a.push(R)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function GN(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function WN(n,e,t,r,i,o,s,a){let u=xn(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(pg(n,t,h,r,i),Il(e)&&KN(t,e.index)):e.type&3?(r=GN(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function KN(n,e){let t=ko(e,n);t[ie]&16||(t[ie]|=64)}function fg(n,e,t,r){if(XE()){let i=r===null?null:{"":-1},o=XN(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&JD(n,e,t,s,i,a),i&&eP(t,r,i)}t.mergedAttrs=Bp(t.mergedAttrs,t.attrs)}function JD(n,e,t,r,i,o){for(let l=0;l<r.length;l++)LR(gD(t,e),n,r[l].type);nP(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=QD(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Bp(t.mergedAttrs,h.hostAttrs),rP(n,t,e,u,h),tP(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}zN(n,t,o)}function QN(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;YN(s)!=a&&s.push(a),s.push(t,r,o)}}function YN(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function ZN(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Il(t)&&iP(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||gD(t,e),Sr(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=Ca(e,n,a,t);if(Sr(l,e),s!==null&&oP(e,a-i,l,u,t,s),xa(u)){let h=ko(t.index,e);h[br]=Ca(e,n,a,t)}}}function XD(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=CR();try{mi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];dp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&JN(u,l)}}finally{mi(-1),dp(s)}}function JN(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function XN(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(OM(e,s.selectors,!1))if(r||(r=[]),xa(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Ep(n,e,u)}else r.unshift(s),Ep(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Ep(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function eP(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ee(-301,!1);r.push(e[i],o)}}}function tP(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xa(e)&&(t[""]=n)}}function nP(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function rP(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Do(i.type,!0)),s=new Da(o,xa(i),$e);n.blueprint[r]=s,t[r]=s,QN(n,e,r,QD(n,t,i.hostVars,Fo),i)}function iP(n,e,t){let r=xn(e,n),i=ZD(t),o=n[bn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Ol(n,kl(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function oP(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];KD(r,t,u,l,h,p)}}function sP(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function e0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function t0(n,e){let t=n.contentQueries;if(t!==null){let r=Ce(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];iD(o),a.contentQueries(2,e[s],s)}}}finally{Ce(r)}}}function Ol(n,e){return n[Ea]?n[zI][ln]=e:n[Ea]=e,n[zI]=e,e}function Dp(n,e,t){iD(0);let r=Ce(null);try{e(n,t)}finally{Ce(r)}}function aP(n,e){let t=n[To],r=t?t.get(Qn,null):null;r&&r.handleError(e)}function pg(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];KD(h,l,r,a,u,i)}}function n0(n,e,t){let r=uR(e,n);wN(n[Nt],r,t)}function cP(n,e){let t=ko(e,n),r=t[ge];uP(r,t);let i=t[Zn];i!==null&&t[Qu]===null&&(t[Qu]=rg(i,t[To])),gg(r,t,t[br])}function uP(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function gg(n,e,t){Kp(e);try{let r=n.viewQuery;r!==null&&Dp(1,r,t);let i=n.template;i!==null&&YD(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[So]?.finishViewCreation(n),n.staticContentQueries&&t0(n,e),n.staticViewQueries&&Dp(2,n.viewQuery,t);let o=n.components;o!==null&&lP(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,Qp()}}function lP(n,e){for(let t=0;t<e.length;t++)cP(n,e[t])}function dP(n,e,t,r){let i=Ce(null);try{let o=e.tView,a=n[ie]&4096?4096:16,u=kl(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[bo]=l;let h=n[So];return h!==null&&(u[So]=h.createEmbeddedView(o)),gg(o,u,t),u}finally{Ce(i)}}function aE(n,e){return!e||e.firstChild===null||bD(n)}function hP(n,e,t,r=!0){let i=e[ge];if(TN(i,e,n,t),r){let s=Ip(t,n),a=e[Nt],u=$D(a,n[pi]);u!==null&&DN(i,n[dn],a,e,u,s)}let o=e[Qu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function sl(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Kn(o)),Jn(o)&&fP(o,r);let s=t.type;if(s&8)sl(n,e,t.child,r);else if(s&32){let a=sg(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=HD(e,t);if(Array.isArray(a))r.push(...a);else{let u=gi(e[Sn]);sl(u[ge],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function fP(n,e){for(let t=Jt;t<n.length;t++){let r=n[t],i=r[ge].firstChild;i!==null&&sl(r[ge],r,i,e)}n[pi]!==n[Zn]&&e.push(n[pi])}var r0=[];function pP(n){return n[Zt]??gP(n)}function gP(n){let e=r0.pop()??Object.create(yP);return e.lView=n,e}function mP(n){n.lView[Zt]!==n&&(n.lView=null,r0.push(n))}var yP=xe(V({},If),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Cl(n.lView)},consumerOnSignalRead(){this.lView[Zt]=this}});function vP(n){let e=n[Zt]??Object.create(_P);return e.lView=n,e}var _P=xe(V({},If),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=gi(n.lView);for(;e&&!i0(e[ge]);)e=gi(e);e&&YE(e)},consumerOnSignalRead(){this.lView[Zt]=this}});function i0(n){return n.type!==2}var wP=100;function o0(n,e=!0,t=0){let r=n[bn],i=r.rendererFactory,o=!1;o||i.begin?.();try{IP(n,t)}catch(s){throw e&&aP(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function IP(n,e){let t=nD();try{WI(!0),Cp(n,e);let r=0;for(;Dl(n);){if(r===wP)throw new ee(103,!1);r++,Cp(n,1)}}finally{WI(t)}}function EP(n,e,t,r){let i=e[ie];if((i&256)===256)return;let o=!1,s=!1;!o&&e[bn].inlineEffectRunner?.flush(),Kp(e);let a=!0,u=null,l=null;o||(i0(n)?(l=pP(e),u=Ef(l)):sI()===null?(a=!1,l=vP(e),u=Ef(l)):e[Zt]&&(Cf(e[Zt]),e[Zt]=null));try{QE(e),wR(n.bindingStartIndex),t!==null&&YD(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let v=n.preOrderCheckHooks;v!==null&&$u(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Hu(e,v,0,null),Kf(e,0)}if(s||DP(e),s0(e,0),n.contentQueries!==null&&t0(n,e),!o)if(h){let v=n.contentCheckHooks;v!==null&&$u(e,v)}else{let v=n.contentHooks;v!==null&&Hu(e,v,1),Kf(e,1)}VN(n,e);let p=n.components;p!==null&&c0(e,p,0);let m=n.viewQuery;if(m!==null&&Dp(2,m,r),!o)if(h){let v=n.viewCheckHooks;v!==null&&$u(e,v)}else{let v=n.viewHooks;v!==null&&Hu(e,v,2),Kf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Wf]){for(let v of e[Wf])v();e[Wf]=null}o||(e[ie]&=-73)}catch(h){throw o||Cl(e),h}finally{l!==null&&(aI(l,u),a&&mP(l)),Qp()}}function s0(n,e){for(let t=AD(n);t!==null;t=xD(t))for(let r=Jt;r<t.length;r++){let i=t[r];a0(i,e)}}function DP(n){for(let e=AD(n);e!==null;e=xD(e)){if(!(e[ie]&Ju.HasTransplantedViews))continue;let t=e[Zu];for(let r=0;r<t.length;r++){let i=t[r];YE(i)}}}function CP(n,e,t){let r=ko(e,n);a0(r,t)}function a0(n,e){Gp(n)&&Cp(n,e)}function Cp(n,e){let r=n[ge],i=n[ie],o=n[Zt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Df(o)),s||=!1,o&&(o.dirty=!1),n[ie]&=-9217,s)EP(r,n,r.template,n[br]);else if(i&8192){s0(n,1);let a=r.components;a!==null&&c0(n,a,1)}}function c0(n,e,t){for(let r=0;r<e.length;r++)CP(n,e[r],t)}function u0(n,e){let t=nD()?64:1088;for(n[bn].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=gi(n);if(cp(n)&&!r)return n;n=r}return null}var yi=class{get rootNodes(){let e=this._lView,t=e[ge];return sl(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[br]}set context(e){this._lView[br]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ct];if(Jn(e)){let t=e[Yu],r=t?t.indexOf(this):-1;r>-1&&(wp(e,r),Wu(t,r))}this._attachedToViewContainer=!1}BD(this._lView[ge],this._lView)}onDestroy(e){ZE(this._lView,e)}markForCheck(){u0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){lp(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,o0(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=cp(this._lView),t=this._lView[bo];t!==null&&!e&&ag(t,this._lView),VD(this._lView[ge],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=cp(this._lView),r=this._lView[bo];r!==null&&!t&&jD(r,this._lView),lp(this._lView)}},Fl=(()=>{class n{static{this.__NG_ELEMENT_ID__=SP}}return n})(),TP=Fl,bP=class extends TP{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=dP(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new yi(i)}};function SP(){return AP(hn(),nt())}function AP(n,e){return n.type&4?new bP(e,n,xl(n,e)):null}var kq=new RegExp(`^(\\d+)*(${aN}|${sN})*(.*)`);var xP=()=>null;function cE(n,e){return xP(n,e)}var xo=class{},mg=new W("",{providedIn:"root",factory:()=>!1});var l0=new W(""),d0=new W(""),Tp=class{},al=class{};function MP(n){let e=Error(`No component factory found for ${Rt(n)}.`);return e[RP]=n,e}var RP="ngComponent";var bp=class{resolveComponentFactory(e){throw MP(e)}},Mo=class{static{this.NULL=new bp}},Ro=class{};var NP=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>null})}}return n})();function cl(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=kI(i,a);else if(o==2){let u=a,l=e[++s];r=kI(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ul=class extends Mo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Tr(e);return new No(t,this.ngModule)}};function uE(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Cr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Cr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function PP(n){let e=n.toLowerCase();return e==="svg"?aR:e==="math"?cR:null}var No=class extends al{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=uE(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return uE(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=jM(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ce(null);try{i=i||this.ngModule;let s=i instanceof Ut?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new hp(e,s):e,u=a.get(Ro,null);if(u===null)throw new ee(407,!1);let l=a.get(NP,null),h=a.get(xo,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",b=r?UN(m,r,this.componentDef.encapsulation,a):LD(m,v,PP(v)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let N=null;b!==null&&(N=rg(b,a,!0));let B=hg(0,null,null,1,0,null,null,null,null,null,null),q=kl(null,B,null,R,null,null,p,m,a,null,N);Kp(q);let F,Z,te=null;try{let J=this.componentDef,I,y=null;J.findHostDirectiveDefs?(I=[],y=new Map,J.findHostDirectiveDefs(J,I,y),I.push(J)):I=[J];let w=kP(q,b);te=OP(w,b,J,I,q,p,m),Z=KE(B,Wn),b&&VP(m,J,b,r),t!==void 0&&jP(Z,this.ngContentSelectors,t),F=LP(te,J,I,y,q,[BP]),gg(B,q,null)}catch(J){throw te!==null&&vp(te),vp(q),J}finally{Qp()}return new Sp(this.componentType,F,xl(Z,q),q,Z)}finally{Ce(o)}}},Sp=class extends Tp{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new yi(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;pg(o[ge],o,i,e,t),this.previousInputValues.set(e,t);let s=ko(this._tNode.index,o);u0(s,1)}}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kP(n,e){let t=n[ge],r=Wn;return n[r]=e,Ma(t,r,2,"#host",null)}function OP(n,e,t,r,i,o,s){let a=i[ge];FP(r,n,e,s);let u=null;e!==null&&(u=rg(e,i[To]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=kl(i,ZD(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Ep(a,n,r.length-1),Ol(i,p),i[n.index]=p}function FP(n,e,t,r){for(let i of n)e.mergedAttrs=Bp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(cl(e,e.mergedAttrs,!0),t!==null&&zD(r,t,e))}function LP(n,e,t,r,i,o){let s=hn(),a=i[ge],u=xn(s,i);JD(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=Ca(i,a,p,s);Sr(m,i)}XD(a,i,s),u&&Sr(u,i);let l=Ca(i,a,s.directiveStart+s.componentOffset,s);if(n[br]=i[br]=l,o!==null)for(let h of o)h(l,e);return ug(a,s,i),l}function VP(n,e,t,r){if(r)rp(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=BM(e.selectors[0]);i&&rp(n,t,i),o&&o.length>0&&qD(n,t,o.join(" "))}}function jP(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function BP(){let n=hn();Al(nt()[ge],n)}var Lo=(()=>{class n{static{this.__NG_ELEMENT_ID__=UP}}return n})();function UP(){let n=hn();return HP(n,nt())}var $P=Lo,h0=class extends $P{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return xl(this._hostTNode,this._hostLView)}get injector(){return new fi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Yp(this._hostTNode,this._hostLView);if(hD(e)){let t=el(e,this._hostLView),r=Xu(e),i=t[ge].data[r+8];return new fi(i,t)}else return new fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=lE(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Jt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=cE(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,aE(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!rR(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new No(Tr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let R=(s?l:this.parentInjector).get(Ut,null);R&&(o=R)}let h=Tr(u.componentType??{}),p=cE(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,o);return this.insertImpl(v.hostView,a,aE(this._hostTNode,p)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(lR(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ct],l=new h0(u,u[dn],u[Ct]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return hP(s,i,o,r),e.attachToViewContainerRef(),SE(Xf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=lE(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=wp(this._lContainer,t);r&&(Wu(Xf(this._lContainer),t),BD(r[ge],r))}detach(e){let t=this._adjustIndex(e,-1),r=wp(this._lContainer,t);return r&&Wu(Xf(this._lContainer),t)!=null?new yi(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function lE(n){return n[Yu]}function Xf(n){return n[Yu]||(n[Yu]=[])}function HP(n,e){let t,r=e[n.index];return Jn(r)?t=r:(t=e0(r,e,null,n),e[n.index]=t,Ol(e,t)),zP(t,e,n,r),new h0(t,n,e)}function qP(n,e){let t=n[Nt],r=t.createComment(""),i=xn(e,n),o=$D(t,i);return ol(t,o,r,MN(t,i),!1),r}var zP=KP,GP=()=>!1;function WP(n,e,t){return GP(n,e,t)}function KP(n,e,t,r){if(n[pi])return;let i;t.type&8?i=Kn(r):i=qP(e,t),n[pi]=i}var dE=new Set;function yg(n){dE.has(n)||(dE.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function QP(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(XP))}return o}return ll.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(v=>{a[l+m]=v,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>e1(o));e.push(u)}),ZP(),Promise.all(e).then(()=>{})}var ll=new Map,YP=new Set;function ZP(){let n=ll;return ll=new Map,n}function JP(){return ll.size===0}function XP(n){return typeof n=="string"?n:n.text()}function e1(n){YP.delete(n)}var Ar=class{},Ta=class{};var dl=class extends Ar{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ul(this);let o=OE(e);this._bootstrapComponents=FD(o.bootstrap),this._r3Injector=ED(e,t,[{provide:Ar,useValue:this},{provide:Mo,useValue:this.componentFactoryResolver},...r],Rt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},hl=class extends Ta{constructor(e){super(),this.moduleType=e}create(e){return new dl(this.moduleType,e,[])}};function t1(n,e,t){return new dl(n,e,t,!1)}var Ap=class extends Ar{constructor(e){super(),this.componentFactoryResolver=new ul(this),this.instance=null;let t=new Ia([...e.providers,{provide:Ar,useValue:this},{provide:Mo,useValue:this.componentFactoryResolver}],e.parent||Hp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ll(n,e,t=null){return new Ap({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function f0(n){return r1(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function n1(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function r1(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function fl(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function i1(n,e,t,r){let i=fl(n,e,t);return fl(n,e+1,r)||i}function o1(n){return(n.flags&32)===32}function s1(n,e,t,r,i,o,s,a,u){let l=e.consts,h=Ma(e,n,4,s||null,a||null);fg(e,t,h,Ao(l,u)),Al(e,h);let p=h.tView=hg(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function a1(n,e,t,r,i,o,s,a,u,l){let h=t+Wn,p=e.firstCreatePass?s1(h,e,n,r,i,o,s,a,u):e.data[h];vi(p,!1);let m=c1(e,n,p,t);bl()&&Nl(e,n,m,p),Sr(m,n);let v=e0(m,n,m,p);return n[h]=v,Ol(n,v),WP(v,p,n),zp(p)&&lg(e,n,p),u!=null&&dg(n,p,l),p}function kt(n,e,t,r,i,o,s,a){let u=nt(),l=Mr(),h=Ao(l.consts,o);return a1(u,l,n,e,t,r,i,h,s,a),kt}var c1=u1;function u1(n,e,t,r){return Sl(!0),e[Nt].createComment("")}var wo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(wo||{}),p0=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}}return n})(),xp=class n{constructor(){this.ngZone=j(me),this.scheduler=j(xo),this.errorHandler=j(Qn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[wo.EarlyRead,wo.Write,wo.MixedReadWrite,wo.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>new n})}},Mp=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function vg(n,e){!e?.injector&&tR(vg);let t=e?.injector??j(Xt);return yN(t)?(yg("NgAfterNextRender"),d1(n,t,e,!0)):h1}function l1(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function d1(n,e,t,r){let i=e.get(p0);i.impl??=e.get(xp);let o=t?.phase??wo.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Jp):null,a=new Mp(i.impl,l1(n,o),r,s);return i.impl.register(a),a}var h1={destroy(){}};function f1(n,e,t,r){return fl(n,rD(),t)?e+va(t)+r:Fo}function p1(n,e,t,r,i,o){let s=_R(),a=i1(n,s,t,i);return IR(2),a?e+va(t)+r+va(i)+o:Fo}function mt(n,e,t){let r=nt(),i=rD();if(fl(r,i,e)){let o=Mr(),s=bR();WN(o,s,r,n,e,r[Nt],t,!1)}return mt}function hE(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";pg(n,t,o[s],s,r)}function g1(n,e,t,r,i,o){let s=e.consts,a=Ao(s,i),u=Ma(e,n,2,r,a);return fg(e,t,u,Ao(s,o)),u.attrs!==null&&cl(u,u.attrs,!1),u.mergedAttrs!==null&&cl(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ne(n,e,t,r){let i=nt(),o=Mr(),s=Wn+n,a=i[Nt],u=o.firstCreatePass?g1(s,o,i,e,t,r):o.data[s],l=m1(o,i,u,a,e,n);i[s]=l;let h=zp(u);return vi(u,!0),zD(a,l,u),!o1(u)&&bl()&&Nl(o,i,l,u),hR()===0&&Sr(l,i),fR(),h&&(lg(o,i,u),ug(o,u,i)),r!==null&&dg(i,u),ne}function Q(){let n=hn();Wp()?tD():(n=n.parent,vi(n,!1));let e=n;mR(e)&&yR(),pR();let t=Mr();return t.firstCreatePass&&(Al(t,n),qp(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&RR(e)&&hE(t,e,nt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&NR(e)&&hE(t,e,nt(),e.stylesWithoutHost,!1),Q}function $t(n,e,t,r){return ne(n,e,t,r),Q(),$t}var m1=(n,e,t,r,i,o)=>(Sl(!0),LD(r,i,SR()));function y1(n,e,t,r,i){let o=e.consts,s=Ao(o,r),a=Ma(e,n,8,"ng-container",s);s!==null&&cl(a,s,!0);let u=Ao(o,i);return fg(e,t,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function _g(n,e,t){let r=nt(),i=Mr(),o=n+Wn,s=i.firstCreatePass?y1(o,i,r,e,t):i.data[o];vi(s,!0);let a=v1(i,r,s,n);return r[o]=a,bl()&&Nl(i,r,a,s),Sr(a,r),zp(s)&&(lg(i,r,s),ug(i,s,r)),t!=null&&dg(r,s),_g}function wg(){let n=hn(),e=Mr();return Wp()?tD():(n=n.parent,vi(n,!1)),e.firstCreatePass&&(Al(e,n),qp(n)&&e.queries.elementEnd(n)),wg}var v1=(n,e,t,r)=>(Sl(!0),IN(e[Nt],""));var pl="en-US";var _1=pl;function w1(n){typeof n=="string"&&(_1=n.toLowerCase().replace(/_/g,"-"))}function ae(n,e=""){let t=nt(),r=Mr(),i=n+Wn,o=r.firstCreatePass?Ma(r,i,1,e,null):r.data[i],s=I1(r,t,o,e,n);t[i]=s,bl()&&Nl(r,t,s,o),vi(o,!1)}var I1=(n,e,t,r,i)=>(Sl(!0),_N(e[Nt],r));function ze(n){return fn("",n,""),ze}function fn(n,e,t){let r=nt(),i=f1(r,n,e,t);return i!==Fo&&n0(r,Tl(),i),fn}function Ra(n,e,t,r,i){let o=nt(),s=p1(o,n,e,t,r,i);return s!==Fo&&n0(o,Tl(),s),Ra}var E1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=VE(!1,t.type),i=r.length>0?Ll([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:n,providedIn:"environment",factory:()=>new n(O(Ut))})}}return n})();function g0(n){yg("NgStandalone"),n.getStandaloneInjector=e=>e.get(E1).getOrCreateStandaloneInjector(n)}var ju=null;function D1(n){ju!==null&&(n.defaultEncapsulation!==ju.defaultEncapsulation||n.preserveWhitespaces!==ju.preserveWhitespaces)||(ju=n)}var xr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},m0=new xr("18.2.13");var Vl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Ig=new W(""),Na=new W(""),jl=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Eg||(C1(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(O(me),O(Bl),O(Na))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Bl=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Eg?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function C1(n){Eg=n}var Eg;function Pa(n){return!!n&&typeof n.then=="function"}function y0(n){return!!n&&typeof n.subscribe=="function"}var Ul=new W(""),v0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=j(Ul,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Pa(o))t.push(o);else if(y0(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dg=new W("");function T1(){cI(()=>{throw new ee(600,!1)})}function b1(n){return n.isBoundToModule}var S1=10;function A1(n,e,t){try{let r=t();return Pa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function _0(n,e){return Array.isArray(e)?e.reduce(_0,n):V(V({},n),e)}var Rr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=j(XR),this.afterRenderManager=j(p0),this.zonelessEnabled=j(mg),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new qe,this.afterTick=new qe,this.componentTypes=[],this.components=[],this.isStable=j(Oo).hasPendingTasks.pipe(G(t=>!t)),this._injector=j(Ut)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof al;if(!this._injector.get(v0).done){let m=!i&&kE(t),v=!1;throw new ee(405,v)}let s;i?s=t:s=this._injector.get(Mo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=b1(s)?void 0:this._injector.get(Ar),u=r||s.selector,l=s.create(Xt.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Ig,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),qu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ee(101,!1);let t=Ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ce(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ro,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<S1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)x1(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Dl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;qu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Dg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>qu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ee(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function x1(n,e,t,r){if(!t&&!Dl(n))return;o0(n,e,t&&!r?0:1)}var Rp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},$l=(()=>{class n{compileModuleSync(t){return new hl(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=OE(t),o=FD(i.declarations).reduce((s,a)=>{let u=Tr(a);return u&&s.push(new No(u)),s},[]);return new Rp(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),M1=new W("");function R1(n,e,t){let r=new hl(t);return Promise.resolve(r)}function fE(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var N1=(()=>{class n{constructor(){this.zone=j(me),this.changeDetectionScheduler=j(xo),this.applicationRef=j(Rr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function P1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new me(xe(V({},w0()),{scheduleInRootZone:t})),[{provide:me,useFactory:n},{provide:Co,multi:!0,useFactory:()=>{let r=j(N1,{optional:!0});return()=>r.initialize()}},{provide:Co,multi:!0,useFactory:()=>{let r=j(k1);return()=>{r.initialize()}}},e===!0?{provide:l0,useValue:!0}:[],{provide:d0,useValue:t??DD}]}function w0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var k1=(()=>{class n{constructor(){this.subscription=new Be,this.initialized=!1,this.zone=j(me),this.pendingTasks=j(Oo)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O1=(()=>{class n{constructor(){this.appRef=j(Rr),this.taskService=j(Oo),this.ngZone=j(me),this.zonelessEnabled=j(mg),this.disableScheduling=j(l0,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Be,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nl):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(j(d0,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof rl||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?XI:CD;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nl+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,XI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function F1(){return typeof $localize<"u"&&$localize.locale||pl}var Cg=new W("",{providedIn:"root",factory:()=>j(Cg,le.Optional|le.SkipSelf)||F1()});var gl=new W("");function Bu(n){return!n.moduleRef}function L1(n){let e=Bu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(me);return t.run(()=>{Bu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Qn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Bu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(gl);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(gl);s.add(o),n.moduleRef.onDestroy(()=>{qu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return A1(r,t,()=>{let o=e.get(v0);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Cg,pl);if(w1(s||pl),Bu(n)){let a=e.get(Rr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return V1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function V1(n,e){let t=n.injector.get(Rr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}var I0=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>JR(r?.ngZone,xe(V({},w0({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[P1({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:xo,useExisting:O1}],u=t1(t.moduleType,this.injector,a);return L1({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=_0({},r);return R1(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(gl,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(O(Xt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),ya=null,E0=new W("");function j1(n){if(ya&&!ya.get(E0,!1))throw new ee(400,!1);T1(),ya=n;let e=n.get(I0);return $1(n),e}function Tg(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=D0();if(!s||s.injector.get(E0,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):j1(B1(a,r))}return U1(i)}}function B1(n=[],e){return Xt.create({name:e,providers:[{provide:_l,useValue:"platform"},{provide:gl,useValue:new Set([()=>ya=null])},...n]})}function U1(n){let e=D0();if(!e)throw new ee(401,!1);return e}function D0(){return ya?.get(I0)??null}function $1(n){n.get(tg,null)?.forEach(t=>t())}function bg(){return!1}var ka=(()=>{class n{static{this.__NG_ELEMENT_ID__=H1}}return n})();function H1(n){return q1(hn(),nt(),(n&16)===16)}function q1(n,e,t){if(Il(n)&&!t){let r=ko(n.index,e);return new yi(r,r)}else if(n.type&175){let r=e[Sn];return new yi(r,e)}return null}var Np=class{constructor(){}supports(e){return f0(e)}create(e){return new Pp(e)}},z1=(n,e)=>e,Pp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||z1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<pE(r,i,o)?t:r,a=pE(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<o.length?o[m]:o[m]=0,b=v+m;h<=b&&b<l&&(o[m]=v+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!f0(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,n1(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new kp(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new ml),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ml),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},kp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Op=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},ml=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Op,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function pE(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function gE(){return new Sg([new Np])}var Sg=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:gE})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||gE()),deps:[[n,new Vp,new Po]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new ee(901,!1)}}return n})();var C0=Tg(null,"core",[]),T0=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(O(Rr))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function b0(n){let e=Tr(n);if(!e)return null;let t=new No(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var N0=null;function wi(){return N0}function P0(n){N0??=n}var Hl=class{};var Ot=new W(""),Ng=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(Q1),providedIn:"platform"})}}return n})(),k0=new W(""),Q1=(()=>{class n extends Ng{constructor(){super(),this._doc=j(Ot),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wi().getBaseHref(this._doc)}onPopState(t){let r=wi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=wi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function Pg(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function S0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Xn(n){return n&&n[0]!=="?"?"?"+n:n}var Ii=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(kg),providedIn:"root"})}}return n})(),O0=new W(""),kg=(()=>{class n extends Ii{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??j(Ot).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Pg(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Xn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Ng),O(O0,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),F0=(()=>{class n extends Ii{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Pg(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Xn(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(O(Ng),O(O0,8))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Vo=(()=>{class n{constructor(t){this._subject=new Dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=J1(S0(A0(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xn(r))}normalize(t){return n.stripTrailingSlash(Z1(this._basePath,A0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Xn}static{this.joinWithSlash=Pg}static{this.stripTrailingSlash=S0}static{this.\u0275fac=function(r){return new(r||n)(O(Ii))}}static{this.\u0275prov=H({token:n,factory:()=>Y1(),providedIn:"root"})}}return n})();function Y1(){return new Vo(O(Ii))}function Z1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function A0(n){return n.replace(/\/index.html$/,"")}function J1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function L0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ag=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},en=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ag(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),x0(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);x0(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)($e(Lo),$e(Fl),$e(Sg))}}static{this.\u0275dir=Sa({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function x0(n,e){n.context.$implicit=e.item}var V0=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new xg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){M0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){M0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)($e(Lo),$e(Fl))}}static{this.\u0275dir=Sa({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),xg=class{constructor(){this.$implicit=null,this.ngIf=null}};function M0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Rt(e)}'.`)}var j0=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})(),Og="browser",X1="server";function ek(n){return n===Og}function Ei(n){return n===X1}var B0=(()=>{class n{static{this.\u0275prov=H({token:n,providedIn:"root",factory:()=>ek(j(Pt))?new Mg(j(Ot),window):new Rg})}}return n})(),Mg=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=tk(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function tk(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var Rg=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ql=class{};var Vg=class extends Hl{constructor(){super(...arguments),this.supportsDOMEvents=!0}},jg=class n extends Vg{static makeCurrent(){P0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=rk();return t==null?null:ik(t)}resetBaseElement(){Oa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return L0(document.cookie,e)}},Oa=null;function rk(){return Oa=Oa||document.querySelector("base"),Oa?Oa.getAttribute("href"):null}function ik(n){return new URL(n,document.baseURI).pathname}var Bg=class{addToWindow(e){Yn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new ee(5103,!1);return o},Yn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Yn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Yn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Yn.frameworkStabilizers||(Yn.frameworkStabilizers=[]),Yn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?wi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},ok=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Ug=new W(""),q0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new ee(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(O(Ug),O(me))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),zl=class{constructor(e){this._doc=e}},Fg="ng-app-id",z0=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ei(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Fg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(Fg),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Fg,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(O(Ot),O(Rl),O(ng,8),O(Pt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Lg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Hg=/%COMP%/g,G0="%COMP%",sk=`_nghost-${G0}`,ak=`_ngcontent-${G0}`,ck=!0,uk=new W("",{providedIn:"root",factory:()=>ck});function lk(n){return ak.replace(Hg,n)}function dk(n){return sk.replace(Hg,n)}function W0(n,e){return e.map(t=>t.replace(Hg,n))}var U0=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ei(a),this.defaultRenderer=new Fa(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Tn.ShadowDom&&(r=xe(V({},r),{encapsulation:Tn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Gl?i.applyToHost(t):i instanceof La&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Tn.Emulated:o=new Gl(u,l,r,this.appId,h,s,a,p);break;case Tn.ShadowDom:return new $g(u,l,t,r,s,a,this.nonce,p);default:o=new La(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(O(q0),O(z0),O(Rl),O(uk),O(Ot),O(Pt),O(me),O(ng))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),Fa=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Lg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){($0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&($0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Lg[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Lg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_i.DashCase|_i.Important)?e.style.setProperty(t,r,i&_i.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_i.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=wi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function $0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var $g=class extends Fa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=W0(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},La=class extends Fa{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?W0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gl=class extends La{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=lk(l),this.hostAttr=dk(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},hk=(()=>{class n extends zl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})(),H0=["alt","control","meta","shift"],fk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},gk=(()=>{class n extends zl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),H0.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=fk[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),H0.forEach(s=>{if(s!==i){let a=pk[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function mk(){jg.makeCurrent()}function yk(){return new Qn}function vk(){return RD(document),document}var _k=[{provide:Pt,useValue:Og},{provide:tg,useValue:mk,multi:!0},{provide:Ot,useFactory:vk,deps:[]}],K0=Tg(C0,"browser",_k),wk=new W(""),Ik=[{provide:Na,useClass:Bg,deps:[]},{provide:Ig,useClass:jl,deps:[me,Bl,Na]},{provide:jl,useClass:jl,deps:[me,Bl,Na]}],Ek=[{provide:_l,useValue:"root"},{provide:Qn,useFactory:yk,deps:[]},{provide:Ug,useClass:hk,multi:!0,deps:[Ot,me,Pt]},{provide:Ug,useClass:gk,multi:!0,deps:[Ot]},U0,z0,q0,{provide:Ro,useExisting:U0},{provide:ql,useClass:ok,deps:[]},[]],Q0=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Rl,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(O(wk,12))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({providers:[...Ek,...Ik],imports:[j0,T0]})}}return n})();var Y0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(O(Ot))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ce="primary",Ja=Symbol("RouteTitle"),Kg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zo(n){return new Kg(n)}function Dk(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ck(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Mn(n[t],e[t]))return!1;return!0}function Mn(n,e){let t=n?Qg(n):void 0,r=e?Qg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!cC(n[i],e[i]))return!1;return!0}function Qg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function cC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function uC(n){return n.length>0?n[n.length-1]:null}function Pr(n){return jf(n)?n:Pa(n)?Ee(Promise.resolve(n)):X(n)}var Tk={exact:dC,subset:hC},lC={exact:bk,subset:Sk,ignored:()=>!0};function J0(n,e,t){return Tk[t.paths](n.root,e.root,t.matrixParams)&&lC[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function bk(n,e){return Mn(n,e)}function dC(n,e,t){if(!Ci(n.segments,e.segments)||!Ql(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!dC(n.children[r],e.children[r],t))return!1;return!0}function Sk(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cC(n[t],e[t]))}function hC(n,e,t){return fC(n,e,e.segments,t)}function fC(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ci(i,t)||e.hasChildren()||!Ql(i,t,r))}else if(n.segments.length===t.length){if(!Ci(n.segments,t)||!Ql(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!hC(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ci(n.segments,i)||!Ql(n.segments,i,r)||!n.children[ce]?!1:fC(n.children[ce],e,o,r)}}function Ql(n,e,t){return e.every((r,i)=>lC[t](n[i].parameters,r.parameters))}var tr=class{constructor(e=new De([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=zo(this.queryParams),this._queryParamMap}toString(){return Mk.serialize(this)}},De=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yl(this)}},Di=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zo(this.parameters),this._parameterMap}toString(){return gC(this)}};function Ak(n,e){return Ci(n,e)&&n.every((t,r)=>Mn(t.parameters,e[r].parameters))}function Ci(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function xk(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var Xa=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>new Go,providedIn:"root"})}}return n})(),Go=class{parse(e){let t=new Zg(e);return new tr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Va(e.root,!0)}`,r=Pk(e.queryParams),i=typeof e.fragment=="string"?`#${Rk(e.fragment)}`:"";return`${t}${r}${i}`}},Mk=new Go;function Yl(n){return n.segments.map(e=>gC(e)).join("/")}function Va(n,e){if(!n.hasChildren())return Yl(n);if(e){let t=n.children[ce]?Va(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ce&&r.push(`${i}:${Va(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=xk(n,(r,i)=>i===ce?[Va(n.children[ce],!1)]:[`${i}:${Va(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${Yl(n)}/${t[0]}`:`${Yl(n)}/(${t.join("//")})`}}function pC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wl(n){return pC(n).replace(/%3B/gi,";")}function Rk(n){return encodeURI(n)}function Yg(n){return pC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zl(n){return decodeURIComponent(n)}function X0(n){return Zl(n.replace(/\+/g,"%20"))}function gC(n){return`${Yg(n.path)}${Nk(n.parameters)}`}function Nk(n){return Object.entries(n).map(([e,t])=>`;${Yg(e)}=${Yg(t)}`).join("")}function Pk(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Wl(t)}=${Wl(i)}`).join("&"):`${Wl(t)}=${Wl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var kk=/^[^\/()?;#]+/;function qg(n){let e=n.match(kk);return e?e[0]:""}var Ok=/^[^\/()?;=#]+/;function Fk(n){let e=n.match(Ok);return e?e[0]:""}var Lk=/^[^=?&#]+/;function Vk(n){let e=n.match(Lk);return e?e[0]:""}var jk=/^[^&#]+/;function Bk(n){let e=n.match(jk);return e?e[0]:""}var Zg=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new De(e,t)),r}parseSegment(){let e=qg(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new Di(Zl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Fk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=qg(this.remaining);i&&(r=i,this.capture(r))}e[Zl(t)]=Zl(r)}parseQueryParam(e){let t=Vk(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Bk(this.remaining);s&&(r=s,this.capture(r))}let i=X0(t),o=X0(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=qg(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ce);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ce]:new De([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function mC(n){return n.segments.length>0?new De([],{[ce]:n}):n}function yC(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=yC(i);if(r===ce&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new De(n.segments,e);return Uk(t)}function Uk(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new De(n.segments.concat(e.segments),e.children)}return n}function qa(n){return n instanceof tr}function $k(n,e,t=null,r=null){let i=vC(n);return _C(i,e,t,r)}function vC(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new De(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=mC(r);return e??i}function _C(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return zg(i,i,i,t,r);let o=Hk(e);if(o.toRoot())return zg(i,i,new De([],{}),t,r);let s=qk(o,i,n),a=s.processChildren?Ua(s.segmentGroup,s.index,o.commands):IC(s.segmentGroup,s.index,o.commands);return zg(i,s.segmentGroup,a,t,r)}function Jl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function za(n){return typeof n=="object"&&n!=null&&n.outlets}function zg(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=wC(n,e,t);let a=mC(yC(s));return new tr(a,o,i)}function wC(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=wC(o,e,t)}),new De(n.segments,r)}var Xl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Jl(r[0]))throw new ee(4003,!1);let i=r.find(za);if(i&&i!==uC(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Hk(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Xl(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Xl(t,e,r)}var $o=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function qk(n,e,t){if(n.isAbsolute)return new $o(e,!0,0);if(!t)return new $o(e,!1,NaN);if(t.parent===null)return new $o(t,!0,0);let r=Jl(n.commands[0])?0:1,i=t.segments.length-1+r;return zk(t,i,n.numberOfDoubleDots)}function zk(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new $o(r,!1,i-o)}function Gk(n){return za(n[0])?n[0].outlets:{[ce]:n}}function IC(n,e,t){if(n??=new De([],{}),n.segments.length===0&&n.hasChildren())return Ua(n,e,t);let r=Wk(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new De(n.segments.slice(0,r.pathIndex),{});return o.children[ce]=new De(n.segments.slice(r.pathIndex),n.children),Ua(o,0,i)}else return r.match&&i.length===0?new De(n.segments,{}):r.match&&!n.hasChildren()?Jg(n,e,t):r.match?Ua(n,0,i):Jg(n,e,t)}function Ua(n,e,t){if(t.length===0)return new De(n.segments,{});{let r=Gk(t),i={};if(Object.keys(r).some(o=>o!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let o=Ua(n.children[ce],e,t);return new De(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=IC(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new De(n.segments,i)}}function Wk(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(za(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!tC(u,l,s))return o;r+=2}else{if(!tC(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Jg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(za(o)){let u=Kk(o.outlets);return new De(r,u)}if(i===0&&Jl(t[0])){let u=n.segments[e];r.push(new Di(u.path,eC(t[0]))),i++;continue}let s=za(o)?o.outlets[ce]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Jl(a)?(r.push(new Di(s,eC(a))),i+=2):(r.push(new Di(s,{})),i++)}return new De(r,{})}function Kk(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Jg(new De([],{}),0,r))}),e}function eC(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tC(n,e,t){return n==t.path&&Mn(e,t.parameters)}var $a="imperative",st=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(st||{}),tn=class{constructor(e,t){this.id=e,this.url=t}},Wo=class extends tn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=st.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},nr=class extends tn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=st.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qt||{}),ed=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(ed||{}),er=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Nr=class extends tn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=st.NavigationSkipped}},Ga=class extends tn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=st.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},td=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xg=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},em=class extends tn{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=st.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tm=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nm=class extends tn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=st.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rm=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},im=class{constructor(e){this.route=e,this.type=st.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},om=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sm=class{constructor(e){this.snapshot=e,this.type=st.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},am=class{constructor(e){this.snapshot=e,this.type=st.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cm=class{constructor(e){this.snapshot=e,this.type=st.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=st.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Wa=class{},Ko=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Qk(n,e){return n.providers&&!n._injector&&(n._injector=Ll(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pn(n){return n.outlet||ce}function Yk(n,e){let t=n.filter(r=>pn(r)===e);return t.push(...n.filter(r=>pn(r)!==e)),t}function ec(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var um=class{get injector(){return ec(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new tc(this.rootInjector),this.attachRef=null}},tc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new um(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(O(Ut))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=lm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=lm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=dm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dm(e,this._root).map(t=>t.value)}};function lm(n,e){if(n===e.value)return e;for(let t of e.children){let r=lm(n,t);if(r)return r}return null}function dm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=dm(n,t);if(r.length)return r.unshift(e),r}return[]}var Ht=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Uo(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var id=class extends rd{constructor(e,t){super(e),this.snapshot=t,wm(this,e)}toString(){return this.snapshot.toString()}};function EC(n){let e=Zk(n),t=new ct([new Di("",{})]),r=new ct({}),i=new ct({}),o=new ct({}),s=new ct(""),a=new Qo(t,r,o,s,i,ce,n,e.root);return a.snapshot=e.root,new id(new Ht(a,[]),e)}function Zk(n){let e={},t={},r={},i="",o=new Ho([],e,r,i,t,ce,n,null,{});return new sd("",new Ht(o,[]))}var Qo=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(G(l=>l[Ja]))??X(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>zo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>zo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function od(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&CC(i)&&(r.resolve[Ja]=i.title),r}var Ho=class{get title(){return this.data?.[Ja]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},sd=class extends rd{constructor(e,t){super(t),this.url=e,wm(this,t)}toString(){return DC(this._root)}};function wm(n,e){e.value._routerState=n,e.children.forEach(t=>wm(n,t))}function DC(n){let e=n.children.length>0?` { ${n.children.map(DC).join(", ")} } `:"";return`${n.value}${e}`}function Gg(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Mn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Mn(e.params,t.params)||n.paramsSubject.next(t.params),Ck(e.url,t.url)||n.urlSubject.next(t.url),Mn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hm(n,e){let t=Mn(n.params,e.params)&&Ak(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||hm(n.parent,e.parent))}function CC(n){return typeof n.title=="string"||n.title===null}var Jk=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.attachEvents=new Dt,this.detachEvents=new Dt,this.parentContexts=j(tc),this.location=j(Lo),this.changeDetector=j(ka),this.inputBinder=j(dd,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new fm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Sa({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[El]})}}return n})(),fm=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Qo?this.route:e===tc?this.childContexts:this.parent.get(e,t)}},dd=new W(""),nC=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=ha([r.queryParams,r.params,r.data]).pipe(Ue(([o,s,a],u)=>(a=V(V(V({},o),s),a),u===0?X(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=b0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function Xk(n,e,t){let r=Ka(n,e._root,t?t._root:void 0);return new id(r,e)}function Ka(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=eO(n,e,t);return new Ht(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Ka(n,a)),s}}let r=tO(e.value),i=e.children.map(o=>Ka(n,o));return new Ht(r,i)}}function eO(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ka(n,r,i);return Ka(n,r)})}function tO(n){return new Qo(new ct(n.url),new ct(n.params),new ct(n.queryParams),new ct(n.fragment),new ct(n.data),n.outlet,n.component,n)}var Qa=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},TC="ngNavigationCancelingError";function ad(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=qa(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=bC(!1,qt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function bC(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[TC]=!0,t.cancellationCode=e,t}function nO(n){return SC(n)&&qa(n.url)}function SC(n){return!!n&&n[TC]}var rO=(n,e,t,r)=>G(i=>(new pm(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),pm=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Uo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Uo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Uo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Uo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new cm(o.value.snapshot))}),e.children.length&&this.forwardEvent(new sm(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Gg(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Gg(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},cd=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},qo=class{constructor(e,t){this.component=e,this.route=t}};function iO(n,e,t){let r=n._root,i=e?e._root:null;return ja(r,i,t,[r.value])}function oO(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Zo(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!wE(n)?n:e.get(n):r}function ja(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Uo(e);return n.children.forEach(s=>{sO(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Ha(a,t.getContext(s),i)),i}function sO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=aO(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new cd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?ja(n,e,a?a.children:null,r,i):ja(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new qo(a.outlet.component,s))}else s&&Ha(e,a,i),i.canActivateChecks.push(new cd(r)),o.component?ja(n,null,a?a.children:null,r,i):ja(n,null,t,r,i);return i}function aO(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ci(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ci(n.url,e.url)||!Mn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hm(n,e)||!Mn(n.queryParams,e.queryParams);case"paramsChange":default:return!hm(n,e)}}function Ha(n,e,t){let r=Uo(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Ha(s,e.children.getContext(o),t):Ha(s,null,t):Ha(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new qo(e.outlet.component,i)):t.canDeactivateChecks.push(new qo(null,i)):t.canDeactivateChecks.push(new qo(null,i))}function nc(n){return typeof n=="function"}function cO(n){return typeof n=="boolean"}function uO(n){return n&&nc(n.canLoad)}function lO(n){return n&&nc(n.canActivate)}function dO(n){return n&&nc(n.canActivateChild)}function hO(n){return n&&nc(n.canDeactivate)}function fO(n){return n&&nc(n.canMatch)}function AC(n){return n instanceof zn||n?.name==="EmptyError"}var Kl=Symbol("INITIAL_VALUE");function Yo(){return Ue(n=>ha(n.map(e=>e.pipe(Gn(1),di(Kl)))).pipe(G(e=>{for(let t of e)if(t!==!0){if(t===Kl)return Kl;if(t===!1||pO(t))return t}return!0}),ut(e=>e!==Kl),Gn(1)))}function pO(n){return qa(n)||n instanceof Qa}function gO(n,e){return Ye(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?X(xe(V({},t),{guardsResult:!0})):mO(s,r,i,n).pipe(Ye(a=>a&&cO(a)?yO(r,o,n,e):X(a)),G(a=>xe(V({},t),{guardsResult:a})))})}function mO(n,e,t,r){return Ee(n).pipe(Ye(i=>EO(i.component,i.route,t,e,r)),Kt(i=>i!==!0,!0))}function yO(n,e,t,r){return Ee(e).pipe(ui(i=>go(_O(i.route.parent,r),vO(i.route,r),IO(n,i.path,t),wO(n,i.route,t))),Kt(i=>i!==!0,!0))}function vO(n,e){return n!==null&&e&&e(new am(n)),X(!0)}function _O(n,e){return n!==null&&e&&e(new om(n)),X(!0)}function wO(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(o=>ku(()=>{let s=ec(e)??t,a=Zo(o,s),u=lO(a)?a.canActivate(e,n):An(s,()=>a(e,n));return Pr(u).pipe(Kt())}));return X(i).pipe(Yo())}function IO(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>oO(s)).filter(s=>s!==null).map(s=>ku(()=>{let a=s.guards.map(u=>{let l=ec(s.node)??t,h=Zo(u,l),p=dO(h)?h.canActivateChild(r,n):An(l,()=>h(r,n));return Pr(p).pipe(Kt())});return X(a).pipe(Yo())}));return X(o).pipe(Yo())}function EO(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return X(!0);let s=o.map(a=>{let u=ec(e)??i,l=Zo(a,u),h=hO(l)?l.canDeactivate(n,e,t,r):An(u,()=>l(n,e,t,r));return Pr(h).pipe(Kt())});return X(s).pipe(Yo())}function DO(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let o=i.map(s=>{let a=Zo(s,n),u=uO(a)?a.canLoad(e,t):An(n,()=>a(e,t));return Pr(u)});return X(o).pipe(Yo(),xC(r))}function xC(n){return Pf(tt(e=>{if(typeof e!="boolean")throw ad(n,e)}),G(e=>e===!0))}function CO(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let o=i.map(s=>{let a=Zo(s,n),u=fO(a)?a.canMatch(e,t):An(n,()=>a(e,t));return Pr(u)});return X(o).pipe(Yo(),xC(r))}var Ya=class{constructor(e){this.segmentGroup=e||null}},Za=class extends Error{constructor(e){super(),this.urlTree=e}};function Bo(n){return po(new Ya(n))}function TO(n){return po(new ee(4e3,!1))}function bO(n){return po(bC(!1,qt.GuardRejected))}var gm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[ce])return TO(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:v,data:b,title:R}=i,N=An(o,()=>a({params:v,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:R}));if(N instanceof tr)throw new Za(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Za(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new tr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new De(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},mm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function SO(n,e,t,r,i){let o=MC(n,e,t);return o.matched?(r=Qk(e,r),CO(r,e,t,i).pipe(G(s=>s===!0?o:V({},mm)))):X(o)}function MC(n,e,t){if(e.path==="**")return AO(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},mm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Dk)(t,n,e);if(!i)return V({},mm);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?V(V({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function AO(n){return{matched:!0,parameters:n.length>0?uC(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function rC(n,e,t,r){return t.length>0&&RO(n,t,r)?{segmentGroup:new De(e,MO(r,new De(t,n.children))),slicedSegments:[]}:t.length===0&&NO(n,t,r)?{segmentGroup:new De(n.segments,xO(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new De(n.segments,n.children),slicedSegments:t}}function xO(n,e,t,r){let i={};for(let o of t)if(hd(n,e,o)&&!r[pn(o)]){let s=new De([],{});i[pn(o)]=s}return V(V({},r),i)}function MO(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&pn(r)!==ce){let i=new De([],{});t[pn(r)]=i}return t}function RO(n,e,t){return t.some(r=>hd(n,e,r)&&pn(r)!==ce)}function NO(n,e,t){return t.some(r=>hd(n,e,r))}function hd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function PO(n,e,t){return e.length===0&&!n.children[t]}var ym=class{};function kO(n,e,t,r,i,o,s="emptyOnly"){return new vm(n,e,t,r,i,s,o).recognize()}var OO=31,vm=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new gm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=rC(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:t,rootSnapshot:r})=>{let i=new Ht(r,t),o=new sd("",i),s=$k(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ho([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(G(r=>({children:r,rootSnapshot:t})),_r(r=>{if(r instanceof Za)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ya?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(G(s=>s instanceof Ht?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ee(o).pipe(ui(s=>{let a=r.children[s],u=Yk(t,s);return this.processSegmentGroup(e,u,a,s,i)}),li((s,a)=>(s.push(...a),s)),wr(null),Hf(),Ye(s=>{if(s===null)return Bo(r);let a=RC(s);return FO(a),X(a)}))}processSegment(e,t,r,i,o,s,a){return Ee(t).pipe(ui(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(_r(l=>{if(l instanceof Ya)return X(null);throw l}))),Kt(u=>!!u),_r(u=>{if(AC(u))return PO(r,i,o)?X(new ym):Bo(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return pn(r)!==s&&(s===ce||!hd(i,o,r))?Bo(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):Bo(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=MC(t,i,o);if(!u)return Bo(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>OO&&(this.allowRedirects=!1));let v=new Ho(o,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,iC(i),pn(i),i.component??i._loadedComponent??null,i,oC(i)),b=od(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(b.params),v.data=Object.freeze(b.data);let R=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(Ye(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=SO(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ue(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ue(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:v}=u,b=new Ho(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,iC(r),pn(r),r.component??r._loadedComponent??null,r,oC(r)),R=od(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(R.params),b.data=Object.freeze(R.data);let{segmentGroup:N,slicedSegments:B}=rC(t,m,v,l);if(B.length===0&&N.hasChildren())return this.processChildren(h,l,N,b).pipe(G(F=>new Ht(b,F)));if(l.length===0&&B.length===0)return X(new Ht(b,[]));let q=pn(r)===o;return this.processSegment(h,l,N,B,q?ce:o,!0,b).pipe(G(F=>new Ht(b,F instanceof Ht?[F]:[])))}))):Bo(t)))}getChildConfig(e,t,r){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):DO(e,t,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,t).pipe(tt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):bO(t))):X({routes:[],injector:e})}};function FO(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function LO(n){let e=n.value.routeConfig;return e&&e.path===""}function RC(n){let e=[],t=new Set;for(let r of n){if(!LO(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=RC(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!t.has(r))}function iC(n){return n.data||{}}function oC(n){return n.resolve||{}}function VO(n,e,t,r,i,o){return Ye(s=>kO(n,e,t,r,s.extractedUrl,i,o).pipe(G(({state:a,tree:u})=>xe(V({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function jO(n,e){return Ye(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return X(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of NC(u))s.add(l);let a=0;return Ee(s).pipe(ui(u=>o.has(u)?BO(u,r,n,e):(u.data=od(u,u.parent,n).resolve,X(void 0))),tt(()=>a++),mo(1),Ye(u=>a===s.size?X(t):Et))})}function NC(n){let e=n.children.map(t=>NC(t)).flat();return[n,...e]}function BO(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!CC(i)&&(o[Ja]=i.title),UO(o,n,e,r).pipe(G(s=>(n._resolvedData=s,n.data=od(n,n.parent,t).resolve,null)))}function UO(n,e,t,r){let i=Qg(n);if(i.length===0)return X({});let o={};return Ee(i).pipe(Ye(s=>$O(n[s],e,t,r).pipe(Kt(),tt(a=>{if(a instanceof Qa)throw ad(new Go,a);o[s]=a}))),mo(1),Uf(o),_r(s=>AC(s)?Et:po(s)))}function $O(n,e,t,r){let i=ec(e)??r,o=Zo(n,i),s=o.resolve?o.resolve(e,t):An(i,()=>o(e,t));return Pr(s)}function Wg(n){return Ue(e=>{let t=n(e);return t?Ee(t).pipe(G(()=>e)):X(e)})}var PC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[Ja]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(HO),providedIn:"root"})}}return n})(),HO=(()=>{class n extends PC{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(O(Y0))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rc=new W("",{providedIn:"root",factory:()=>({})}),qO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ot({type:n,selectors:[["ng-component"]],standalone:!0,features:[g0],decls:1,vars:0,template:function(r,i){r&1&&$t(0,"router-outlet")},dependencies:[Jk],encapsulation:2})}}return n})();function Im(n){let e=n.children&&n.children.map(Im),t=e?xe(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=qO),t}var ud=new W(""),Em=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=j($l)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return X(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Pr(t.loadComponent()).pipe(G(kC),tt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),fa(()=>{this.componentLoaders.delete(t)})),i=new uo(r,()=>new qe).pipe(co());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=zO(r,this.compiler,t,this.onLoadEndListener).pipe(fa(()=>{this.childrenLoaders.delete(r)})),s=new uo(o,()=>new qe).pipe(co());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zO(n,e,t,r){return Pr(n.loadChildren()).pipe(G(kC),Ye(i=>i instanceof Ta||Array.isArray(i)?X(i):Ee(e.compileModuleAsync(i))),G(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(ud,[],{optional:!0,self:!0}).flat()),{routes:s.map(Im),injector:o}}))}function GO(n){return n&&typeof n=="object"&&"default"in n}function kC(n){return GO(n)?n.default:n}var Dm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(WO),providedIn:"root"})}}return n})(),WO=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),OC=new W(""),FC=new W("");function KO(n,e,t){let r=n.get(FC),i=n.get(Ot);return n.get(me).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),QO(n))),{onViewTransitionCreated:u}=r;return u&&An(n,()=>u({transition:a,from:e,to:t})),s})}function QO(n){return new Promise(e=>{vg({read:()=>setTimeout(e)},{injector:n})})}var YO=new W(""),Cm=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new qe,this.transitionAbortSubject=new qe,this.configLoader=j(Em),this.environmentInjector=j(Ut),this.urlSerializer=j(Xa),this.rootContexts=j(tc),this.location=j(Vo),this.inputBindingEnabled=j(dd,{optional:!0})!==null,this.titleStrategy=j(PC),this.options=j(rc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=j(Dm),this.createViewTransition=j(OC,{optional:!0}),this.navigationErrorHandler=j(YO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let t=i=>this.events.next(new rm(i)),r=i=>this.events.next(new im(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new ct({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:$a,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ut(o=>o.id!==0),G(o=>xe(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ue(o=>{let s=!1,a=!1;return X(o).pipe(Ue(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),Et;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?xe(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new Nr(u.id,this.urlSerializer.serialize(u.rawUrl),p,ed.IgnoredSameUrlNavigation)),u.resolve(!1),Et}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return X(u).pipe(Ue(p=>{let m=this.transitions?.getValue();return this.events.next(new Wo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Et:Promise.resolve(p)}),VO(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),tt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new td(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:v,restoredState:b,extras:R}=u,N=new Wo(p,this.urlSerializer.serialize(m),v,b);this.events.next(N);let B=EC(this.rootComponentType).snapshot;return this.currentTransition=o=xe(V({},u),{targetSnapshot:B,urlAfterRedirects:m,extras:xe(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,X(o)}else{let p="";return this.events.next(new Nr(u.id,this.urlSerializer.serialize(u.extractedUrl),p,ed.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Et}}),tt(u=>{let l=new Xg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),G(u=>(this.currentTransition=o=xe(V({},u),{guards:iO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),gO(this.environmentInjector,u=>this.events.next(u)),tt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw ad(this.urlSerializer,u.guardsResult);let l=new em(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),ut(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",qt.GuardRejected),!1)),Wg(u=>{if(u.guards.canActivateChecks.length)return X(u).pipe(tt(l=>{let h=new tm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ue(l=>{let h=!1;return X(l).pipe(jO(this.paramsInheritanceStrategy,this.environmentInjector),tt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",qt.NoDataFromResolver)}}))}),tt(l=>{let h=new nm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Wg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(tt(m=>{h.component=m}),G(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ha(l(u.targetSnapshot.root)).pipe(wr(null),Gn(1))}),Wg(()=>this.afterPreactivation()),Ue(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ee(h).pipe(G(()=>o)):X(o)}),G(u=>{let l=Xk(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=xe(V({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),tt(()=>{this.events.next(new Wa)}),rO(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Gn(1),tt({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new nr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),zf(this.transitionAbortSubject.pipe(tt(u=>{throw u}))),fa(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",qt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),_r(u=>{if(a=!0,SC(u))this.events.next(new er(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),nO(u)?this.events.next(new Ko(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Ga(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=An(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Qa){let{message:p,cancellationCode:m}=ad(this.urlSerializer,h);this.events.next(new er(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Ko(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Et}))}))}cancelNavigationTransition(t,r,i){let o=new er(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZO(n){return n!==$a}var JO=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(XO),providedIn:"root"})}}return n})(),_m=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},XO=(()=>{class n extends _m{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Zp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),LC=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:()=>j(eF),providedIn:"root"})}}return n})(),eF=(()=>{class n extends LC{constructor(){super(...arguments),this.location=j(Vo),this.urlSerializer=j(Xa),this.options=j(rc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=j(Dm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new tr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=EC(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Wo)this.stateMemento=this.createStateMemento();else if(t instanceof Nr)this.rawUrlTree=r.initialUrl;else if(t instanceof td){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Wa?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof er&&(t.code===qt.GuardRejected||t.code===qt.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ga?this.restoreHistory(r,!0):t instanceof nr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof tr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=V(V({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Zp(n)))(i||n)}})()}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ba=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ba||{});function VC(n,e){n.events.pipe(ut(t=>t instanceof nr||t instanceof er||t instanceof Ga||t instanceof Nr),G(t=>t instanceof nr||t instanceof Nr?Ba.COMPLETE:(t instanceof er?t.code===qt.Redirect||t.code===qt.SupersededByNewNavigation:!1)?Ba.REDIRECTING:Ba.FAILED),ut(t=>t!==Ba.REDIRECTING),Gn(1)).subscribe(()=>{e()})}function tF(n){throw n}var nF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ti=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=j(Vl),this.stateManager=j(LC),this.options=j(rc,{optional:!0})||{},this.pendingTasks=j(Oo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=j(Cm),this.urlSerializer=j(Xa),this.location=j(Vo),this.urlHandlingStrategy=j(Dm),this._events=new qe,this.errorHandler=this.options.errorHandler||tF,this.navigated=!1,this.routeReuseStrategy=j(JO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=j(ud,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!j(dd,{optional:!0}),this.eventsSubscription=new Be,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof er&&r.code!==qt.Redirect&&r.code!==qt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof nr)this.navigated=!0;else if(r instanceof Ko){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ZO(i.source)},s);this.scheduleNavigation(a,$a,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}oF(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$a,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Im),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=vC(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return _C(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=qa(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,$a,null,r)}navigate(t,r={skipLocationChange:!1}){return iF(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},nF):r===!1?i=V({},rF):i=r,qa(t))return J0(this.currentUrlTree,t,i);let o=this.parseUrl(t);return J0(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return VC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iF(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function oF(n){return!(n instanceof Wa)&&!(n instanceof Ko)}var ld=class{};var sF=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(ut(t=>t instanceof nr),ui(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ll(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ee(i).pipe(vr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=X(null);let o=i.pipe(Ye(s=>s===null?X(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ee([o,s]).pipe(vr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(O(Ti),O($l),O(Ut),O(ld),O(Em))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),jC=new W(""),aF=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Wo?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nr?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Nr&&t.code===ed.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new nd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){WD()}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac})}}return n})();function cF(n){return n.routerState.root}function ic(n,e){return{\u0275kind:n,\u0275providers:e}}function uF(){let n=j(Xt);return e=>{let t=n.get(Rr);if(e!==t.components[0])return;let r=n.get(Ti),i=n.get(BC);n.get(Tm)===1&&r.initialNavigation(),n.get(UC,null,le.Optional)?.setUpPreloading(),n.get(jC,null,le.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var BC=new W("",{factory:()=>new qe}),Tm=new W("",{providedIn:"root",factory:()=>1});function lF(){return ic(2,[{provide:Tm,useValue:0},{provide:Ul,multi:!0,deps:[Xt],useFactory:e=>{let t=e.get(k0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ti),o=e.get(BC);VC(i,()=>{r(!0)}),e.get(Cm).afterPreactivation=()=>(r(!0),o.closed?X(void 0):o),i.initialNavigation()}))}}])}function dF(){return ic(3,[{provide:Ul,multi:!0,useFactory:()=>{let e=j(Ti);return()=>{e.setUpLocationChangeListener()}}},{provide:Tm,useValue:2}])}var UC=new W("");function hF(n){return ic(0,[{provide:UC,useExisting:sF},{provide:ld,useExisting:n}])}function fF(){return ic(8,[nC,{provide:dd,useExisting:nC}])}function pF(n){let e=[{provide:OC,useValue:KO},{provide:FC,useValue:V({skipNextTransition:!!n?.skipInitialTransition},n)}];return ic(9,e)}var sC=new W("ROUTER_FORROOT_GUARD"),gF=[Vo,{provide:Xa,useClass:Go},Ti,tc,{provide:Qo,useFactory:cF,deps:[Ti]},Em,[]],bm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[gF,[],{provide:ud,multi:!0,useValue:t},{provide:sC,useFactory:_F,deps:[[Ti,new Po,new Vp]]},{provide:rc,useValue:r||{}},r?.useHash?yF():vF(),mF(),r?.preloadingStrategy?hF(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?wF(r):[],r?.bindToComponentInputs?fF().\u0275providers:[],r?.enableViewTransitions?pF().\u0275providers:[],IF()]}}static forChild(t){return{ngModule:n,providers:[{provide:ud,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(O(sC,8))}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({})}}return n})();function mF(){return{provide:jC,useFactory:()=>{let n=j(B0),e=j(me),t=j(rc),r=j(Cm),i=j(Xa);return t.scrollOffset&&n.setOffset(t.scrollOffset),new aF(i,r,n,e,t)}}}function yF(){return{provide:Ii,useClass:F0}}function vF(){return{provide:Ii,useClass:kg}}function _F(n){return"guarded"}function wF(n){return[n.initialNavigation==="disabled"?dF().\u0275providers:[],n.initialNavigation==="enabledBlocking"?lF().\u0275providers:[]]}var aC=new W("");function IF(){return[{provide:aC,useFactory:uF},{provide:Dg,multi:!0,useExisting:aC}]}var EF=[],$C=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n})}static{this.\u0275inj=Tt({imports:[bm.forRoot(EF),bm]})}}return n})();var fd=class{constructor(){this.name="name",this.goalLife="goal",this.photoUrl="photo",this.email="email@domain.com",this.phoneNumber="999-999-9999",this.location="city, country",this.socialNetwork="@facebook"}};var DF="firebase",CF="10.14.1";yr(DF,CF,"app");var oc=new xr("ANGULARFIRE2_VERSION");var TF=(n,e)=>{let t=e?[e]:iI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},bi=class{constructor(){return TF(bF)}},bF="app-check";function Sm(){}var pd=class{zone;delegate;constructor(e,t=Lf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Am=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sm,{},Sm,Sm)),t.pipe(tt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},gd=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new pd(Zone.current)),this.insideAngular=t.run(()=>new pd(Zone.current,da)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(O(me))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SF(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Ft(n){return AF(SF())(n)}function AF(n){return function(t){return t=t.lift(new Am(n.ngZone)),t.pipe(cn(n.outsideAngular),Wt(n.insideAngular))}}var RF=new Map,NF={activated:!1,tokenObservers:[]},PF={initialized:!1,enabled:!1};function gn(n){return RF.get(n)||Object.assign({},NF)}function KC(){return PF}var kF="https://content-firebaseappcheck.googleapis.com/v1";var OF="exchangeDebugToken",qC={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},v9=24*60*60*1e3;var Mm=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return M(this,null,function*(){this.stop();try{this.pending=new mf,this.pending.promise.catch(t=>{}),yield FF(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new mf,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function FF(n){return new Promise(e=>{setTimeout(e,n)})}var LF={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},kr=new nI("appCheck","AppCheck",LF);function QC(n){if(!gn(n).activated)throw kr.create("use-before-activation",{appName:n.name})}function YC(r,i){return M(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(v){throw kr.create("fetch-network-error",{originalErrorMessage:v?.message})}if(u.status!==200)throw kr.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(v){throw kr.create("fetch-parse-error",{originalErrorMessage:v?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function ZC(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${kF}/projects/${t}/apps/${r}:${OF}?key=${i}`,body:{debug_token:e}}}var VF="firebase-app-check-database",jF=1,Rm="firebase-app-check-store";var md=null;function BF(){return md||(md=new Promise((n,e)=>{try{let t=indexedDB.open(VF,jF);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(kr.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Rm,{keyPath:"compositeKey"})}}}catch(t){e(kr.create("storage-open",{originalErrorMessage:t?.message}))}}),md)}function UF(n,e){return $F(HF(n),e)}function $F(n,e){return M(this,null,function*(){let r=(yield BF()).transaction(Rm,"readwrite"),o=r.objectStore(Rm).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(kr.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function HF(n){return`${n.options.appId}-${n.name}`}var Nm=new pu("@firebase/app-check");function xm(n,e){return fu()?UF(n,e).catch(t=>{Nm.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function JC(){return KC().enabled}function XC(){return M(this,null,function*(){let n=KC();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var qF={error:"UNKNOWN_ERROR"};function zF(n){return Xw.encodeString(JSON.stringify(n),!1)}function Pm(n,e=!1){return M(this,null,function*(){let t=n.app;QC(t);let r=gn(t),i=r.token,o;if(i&&!sc(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(sc(u)?i=u:yield xm(t,void 0))}if(!e&&i&&sc(i))return{token:i.token};let s=!1;if(JC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=YC(ZC(t,yield XC()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield xm(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield gn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Nm.warn(u.message):Nm.error(u),o=u}let a;return i?o?sc(i)?a={token:i.token,internalError:o}:a=GC(o):(a={token:i.token},r.token=i,yield xm(t,i)):a=GC(o),s&&QF(t,a),a})}function GF(n){return M(this,null,function*(){let e=n.app;QC(e);let{provider:t}=gn(e);if(JC()){let r=yield XC(),{token:i}=yield YC(ZC(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function WF(n,e,t,r){let{app:i}=n,o=gn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&sc(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),zC(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>zC(n))}function eT(n,e){let t=gn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function zC(n){let{app:e}=n,t=gn(e),r=t.tokenRefresher;r||(r=KF(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function KF(n){let{app:e}=n;return new Mm(()=>M(this,null,function*(){let t=gn(e),r;if(t.token?r=yield Pm(n,!0):r=yield Pm(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=gn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},qC.RETRIAL_MIN_WAIT,qC.RETRIAL_MAX_WAIT)}function QF(n,e){let t=gn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function sc(n){return n.expireTimeMillis-Date.now()>0}function GC(n){return{token:zF(qF),error:n}}var km=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=gn(this.app);for(let t of e)eT(this.app,t.next);return Promise.resolve()}};function YF(n,e){return new km(n,e)}function ZF(n){return{getToken:e=>Pm(n,e),getLimitedUseToken:()=>GF(n),addTokenListener:e=>WF(n,"INTERNAL",e),removeTokenListener:e=>eT(n.app,e)}}var JF="@firebase/app-check",XF="0.8.8";var eL="app-check",WC="app-check-internal";function tL(){aa(new oi(eL,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return YF(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(WC).initialize()})),aa(new oi(WC,n=>{let e=n.getProvider("app-check").getImmediate();return ZF(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),yr(JF,XF)}tL();var nL=["localhost","0.0.0.0","127.0.0.1"],M9=typeof window<"u"&&nL.includes(window.location.hostname);var rL="firebase",iL="10.14.1";Bt.registerVersion(rL,iL,"app-compat");var oL=["ngOnDestroy"],rT=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(oL.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var yd=class{constructor(e){return e}},Jo=new W("angularfire2.app.options"),Xo=new W("angularfire2.app.name");function ac(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=Bt.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Bt.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;sL("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new yd(s)}var sL=(n,...e)=>{bg()&&typeof console<"u"&&console[n](...e)},aL={provide:yd,useFactory:ac,deps:[Jo,me,[new Po,Xo]]},iT=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Jo,useValue:t},{provide:Xo,useValue:r}]}}constructor(t){Bt.registerVersion("angularfire",oc.full,"core"),Bt.registerVersion("angularfire",oc.full,"app-compat"),Bt.registerVersion("angular",m0.full,t.toString())}static \u0275fac=function(r){return new(r||n)(O(Pt))};static \u0275mod=bt({type:n});static \u0275inj=Tt({providers:[aL]})}return n})();function vd(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return cL(i,s)||(nT("error",`${e} was already initialized on the ${t} Firebase App with different settings.${uL?" You may need to reload as Firebase is not HMR aware.":""}`),nT("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function cL(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var uL=typeof module<"u"&&!!module.hot,nT=(n,...e)=>{bg()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Om=new W("angularfire2.auth.use-emulator"),Fm=new W("angularfire2.auth.settings"),Lm=new W("angularfire2.auth.tenant-id"),Vm=new W("angularfire2.auth.langugage-code"),jm=new W("angularfire2.auth.use-device-language"),Bm=new W("angularfire.auth.persistence"),Um=(n,e,t,r,i,o,s,a)=>vd(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),oT=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,v){let b=new qe,R=X(void 0).pipe(Wt(s.outsideAngular),Ue(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),G(()=>ac(t,o,r)),G(N=>Um(N,o,a,l,h,p,u,m)),Fu({bufferSize:1,refCount:!1}));if(Ei(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=X(null);else{R.pipe(Kt()).subscribe();let N=R.pipe(Ue(F=>F.getRedirectResult().then(Z=>Z,()=>null)),Ft,Fu({bufferSize:1,refCount:!1})),B=R.pipe(Ue(F=>new pe(Z=>({unsubscribe:o.runOutsideAngular(()=>F.onAuthStateChanged(te=>Z.next(te),te=>Z.error(te),()=>Z.complete()))})))),q=R.pipe(Ue(F=>new pe(Z=>({unsubscribe:o.runOutsideAngular(()=>F.onIdTokenChanged(te=>Z.next(te),te=>Z.error(te),()=>Z.complete()))}))));this.authState=N.pipe(Lu(B),cn(s.outsideAngular),Wt(s.insideAngular)),this.user=N.pipe(Lu(q),cn(s.outsideAngular),Wt(s.insideAngular)),this.idToken=this.user.pipe(Ue(F=>F?Ee(F.getIdToken()):X(null))),this.idTokenResult=this.user.pipe(Ue(F=>F?Ee(F.getIdTokenResult()):X(null))),this.credential=Bf(N,b,this.authState.pipe(ut(F=>!F))).pipe(G(F=>F?.user?F:null),cn(s.outsideAngular),Wt(s.insideAngular))}return rT(this,R,o,{spy:{apply:(N,B,q)=>{(N.startsWith("signIn")||N.startsWith("createUser"))&&q.then(F=>b.next(F))}}})}static \u0275fac=function(r){return new(r||n)(O(Jo),O(Xo,8),O(Pt),O(me),O(gd),O(Om,8),O(Fm,8),O(Lm,8),O(Vm,8),O(jm,8),O(Bm,8),O(bi,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var sT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},aT={};var Or,$m;(function(){var n;function e(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,D,T){for(var _=Array(arguments.length-2),Un=2;Un<arguments.length;Un++)_[Un-2]=arguments[Un];return y.prototype[D].apply(E,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,y,w){w||(w=0);var E=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)E[D]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(D=0;16>D;++D)E[D]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],D=I.g[2];var T=I.g[3],_=y+(T^w&(D^T))+E[0]+3614090360&4294967295;y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[1]+3905402710&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[4]+4118548399&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[5]+1200080426&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[8]+1770035416&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[9]+2336552879&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(T^w&(D^T))+E[12]+1804603682&4294967295,y=w+(_<<7&4294967295|_>>>25),_=T+(D^y&(w^D))+E[13]+4254626195&4294967295,T=y+(_<<12&4294967295|_>>>20),_=D+(w^T&(y^w))+E[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(y^D&(T^y))+E[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=y+(D^T&(w^D))+E[1]+4129170786&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[6]+3225465664&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[5]+3593408605&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[10]+38016083&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[9]+568446438&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[14]+3275163606&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(D^T&(w^D))+E[13]+2850285829&4294967295,y=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(y^w))+E[2]+4243563512&4294967295,T=y+(_<<9&4294967295|_>>>23),_=D+(y^w&(T^y))+E[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^y&(D^T))+E[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=y+(w^D^T)+E[5]+4294588738&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[8]+2272392833&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[1]+2763975236&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[4]+1272893353&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[13]+681279174&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[0]+3936430074&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(w^D^T)+E[9]+3654602809&4294967295,y=w+(_<<4&4294967295|_>>>28),_=T+(y^w^D)+E[12]+3873151461&4294967295,T=y+(_<<11&4294967295|_>>>21),_=D+(T^y^w)+E[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^y)+E[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=y+(D^(w|~T))+E[0]+4096336452&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[7]+1126891415&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[12]+1700485571&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[3]+2399980690&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[8]+1873313359&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[15]+4264355552&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=y+(D^(w|~T))+E[4]+4149444226&4294967295,y=w+(_<<6&4294967295|_>>>26),_=T+(w^(y|~D))+E[11]+3174756917&4294967295,T=y+(_<<10&4294967295|_>>>22),_=D+(y^(T|~w))+E[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~y))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,E=this.B,D=this.h,T=0;T<y;){if(D==0)for(;T<=w;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<y;)if(E[D++]=I.charCodeAt(T++),D==this.blockSize){i(this,E),D=0;break}}else for(;T<y;)if(E[D++]=I[T++],D==this.blockSize){i(this,E),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var E=0;32>E;E+=8)I[w++]=this.g[y]>>>E&255;return I};function o(I,y){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function s(I,y){this.h=y;for(var w=[],E=!0,D=I.length-1;0<=D;D--){var T=I[D]|0;E&&T==y||(w[D]=T,E=!1)}this.g=w}var a={};function u(I){return-128<=I&&128>I?o(I,function(y){return new s([y|0],0>y?-1:0)}):new s([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return N(l(-I));for(var y=[],w=1,E=0;I>=w;E++)y[E]=I/w|0,w*=4294967296;return new s(y,0)}function h(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return N(h(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(y,8)),E=p,D=0;D<I.length;D+=8){var T=Math.min(8,I.length-D),_=parseInt(I.substring(D,D+T),y);8>T?(T=l(Math.pow(y,T)),E=E.j(T).add(l(_))):(E=E.j(w),E=E.add(l(_)))}return E}var p=u(0),m=u(1),v=u(16777216);n=s.prototype,n.m=function(){if(R(this))return-N(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*y,y*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(R(this))return"-"+N(this).toString(I);for(var y=l(Math.pow(I,6)),w=this,E="";;){var D=Z(w,y).g;w=B(w,D.j(y));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=D,b(w))return T+E;for(;6>T.length;)T="0"+T;E=T+E}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function R(I){return I.h==-1}n.l=function(I){return I=B(this,I),R(I)?-1:b(I)?0:1};function N(I){for(var y=I.g.length,w=[],E=0;E<y;E++)w[E]=~I.g[E];return new s(w,~I.h).add(m)}n.abs=function(){return R(this)?N(this):this},n.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0,D=0;D<=y;D++){var T=E+(this.i(D)&65535)+(I.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);E=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function B(I,y){return I.add(N(y))}n.j=function(I){if(b(this)||b(I))return p;if(R(this))return R(I)?N(this).j(N(I)):N(N(this).j(I));if(R(I))return N(this.j(N(I)));if(0>this.l(v)&&0>I.l(v))return l(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],E=0;E<2*y;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var D=0;D<I.g.length;D++){var T=this.i(E)>>>16,_=this.i(E)&65535,Un=I.i(D)>>>16,Us=I.i(D)&65535;w[2*E+2*D]+=_*Us,q(w,2*E+2*D),w[2*E+2*D+1]+=T*Us,q(w,2*E+2*D+1),w[2*E+2*D+1]+=_*Un,q(w,2*E+2*D+1),w[2*E+2*D+2]+=T*Un,q(w,2*E+2*D+2)}for(E=0;E<y;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=y;E<2*y;E++)w[E]=0;return new s(w,0)};function q(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function F(I,y){this.g=I,this.h=y}function Z(I,y){if(b(y))throw Error("division by zero");if(b(I))return new F(p,p);if(R(I))return y=Z(N(I),y),new F(N(y.g),N(y.h));if(R(y))return y=Z(I,N(y)),new F(N(y.g),y.h);if(30<I.g.length){if(R(I)||R(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=y;0>=E.l(I);)w=te(w),E=te(E);var D=J(w,1),T=J(E,1);for(E=J(E,2),w=J(w,2);!b(E);){var _=T.add(E);0>=_.l(I)&&(D=D.add(w),T=_),E=J(E,1),w=J(w,1)}return y=B(I,D.j(y)),new F(D,y)}for(D=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),T=l(w),_=T.j(y);R(_)||0<_.l(I);)w-=E,T=l(w),_=T.j(y);b(T)&&(T=m),D=D.add(T),I=B(I,_)}return new F(D,I)}n.A=function(I){return Z(this,I).h},n.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)&I.i(E);return new s(w,this.h&I.h)},n.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)|I.i(E);return new s(w,this.h|I.h)},n.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],E=0;E<y;E++)w[E]=this.i(E)^I.i(E);return new s(w,this.h^I.h)};function te(I){for(var y=I.g.length+1,w=[],E=0;E<y;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new s(w,I.h)}function J(I,y){var w=y>>5;y%=32;for(var E=I.g.length-w,D=[],T=0;T<E;T++)D[T]=0<y?I.i(T+w)>>>y|I.i(T+w+1)<<32-y:I.i(T+w);return new s(D,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$m=aT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,Or=aT.Integer=s}).apply(typeof sT<"u"?sT:typeof self<"u"?self:typeof window<"u"?window:{});var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rr={};var Hm,dL,es,qm,cc,wd,zm,Gm,Wm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof _d=="object"&&_d];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,A){for(var L=Array(arguments.length-2),be=2;be<arguments.length;be++)L[be-2]=arguments[be];return d.prototype[C].apply(g,L)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function N(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,A=g.length||0;c.length=C+A;for(let L=0;L<A;L++)c[C+L]=g[L]}else c.push(g)}}class B{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function F(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var te=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function J(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function I(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let A=0;A<w.length;A++)f=w[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=Hh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Un{constructor(){this.h=this.g=null}add(d,f){let g=Us.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Us=new B(()=>new nx,c=>c.reset());class nx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let $s,Hs=!1,Hh=new Un,Q_=()=>{let c=a.Promise.resolve(void 0);$s=()=>{c.then(rx)}};var rx=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Us;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Hs=!1};function fr(){this.s=this.s,this.C=this.C}fr.prototype.s=!1,fr.prototype.ma=function(){this.s||(this.s=!0,this.N())},fr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var ix=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function qs(c,d){if(ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(te){e:{try{Z(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ox[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&qs.aa.h.call(this)}}b(qs,ht);var ox={2:"touch",3:"pen",4:"mouse"};qs.prototype.h=function(){qs.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var zs="closure_listenable_"+(1e6*Math.random()|0),sx=0;function ax(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++sx,this.da=this.fa=!1}function Qc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Yc(c){this.src=c,this.g={},this.h=0}Yc.prototype.add=function(c,d,f,g,C){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var L=zh(c,d,g,C);return-1<L?(d=c[L],f||(d.fa=!1)):(d=new ax(d,this.src,A,!!g,C),d.fa=f,c.push(d)),d};function qh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=C)&&Array.prototype.splice.call(g,C,1),A&&(Qc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function zh(c,d,f,g){for(var C=0;C<c.length;++C){var A=c[C];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return C}return-1}var Gh="closure_lm_"+(1e6*Math.random()|0),Wh={};function Y_(c,d,f,g,C){if(g&&g.once)return J_(c,d,f,g,C);if(Array.isArray(d)){for(var A=0;A<d.length;A++)Y_(c,d[A],f,g,C);return null}return f=Zh(f),c&&c[zs]?c.K(d,f,l(g)?!!g.capture:!!g,C):Z_(c,d,f,!1,g,C)}function Z_(c,d,f,g,C,A){if(!d)throw Error("Invalid event type");var L=l(C)?!!C.capture:!!C,be=Qh(c);if(be||(c[Gh]=be=new Yc(c)),f=be.add(d,f,g,L,A),f.proxy)return f;if(g=cx(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)ix||(C=L),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(ew(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function cx(){function c(f){return d.call(c.src,c.listener,f)}let d=ux;return c}function J_(c,d,f,g,C){if(Array.isArray(d)){for(var A=0;A<d.length;A++)J_(c,d[A],f,g,C);return null}return f=Zh(f),c&&c[zs]?c.L(d,f,l(g)?!!g.capture:!!g,C):Z_(c,d,f,!0,g,C)}function X_(c,d,f,g,C){if(Array.isArray(d))for(var A=0;A<d.length;A++)X_(c,d[A],f,g,C);else g=l(g)?!!g.capture:!!g,f=Zh(f),c&&c[zs]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=zh(A,f,g,C),-1<f&&(Qc(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=Qh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=zh(d,f,g,C)),(f=-1<c?d[c]:null)&&Kh(f))}function Kh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[zs])qh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(ew(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=Qh(d))?(qh(f,c),f.h==0&&(f.src=null,d[Gh]=null)):Qc(c)}}}function ew(c){return c in Wh?Wh[c]:Wh[c]="on"+c}function ux(c,d){if(c.da)c=!0;else{d=new qs(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Kh(c),c=f.call(g,d)}return c}function Qh(c){return c=c[Gh],c instanceof Yc?c:null}var Yh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zh(c){return typeof c=="function"?c:(c[Yh]||(c[Yh]=function(d){return c.handleEvent(d)}),c[Yh])}function ft(){fr.call(this),this.i=new Yc(this),this.M=this,this.F=null}b(ft,fr),ft.prototype[zs]=!0,ft.prototype.removeEventListener=function(c,d,f,g){X_(this,c,d,f,g)};function _t(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ht(d,c);else if(d instanceof ht)d.target=d.target||c;else{var C=d;d=new ht(g,c),E(d,C)}if(C=!0,f)for(var A=f.length-1;0<=A;A--){var L=d.g=f[A];C=Zc(L,g,!0,d)&&C}if(L=d.g=c,C=Zc(L,g,!0,d)&&C,C=Zc(L,g,!1,d)&&C,f)for(A=0;A<f.length;A++)L=d.g=f[A],C=Zc(L,g,!1,d)&&C}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Qc(f[g]);delete c.g[d],c.h--}}this.F=null},ft.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ft.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Zc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,A=0;A<d.length;++A){var L=d[A];if(L&&!L.da&&L.capture==f){var be=L.listener,at=L.ha||L.src;L.fa&&qh(c.i,L),C=be.call(at,g)!==!1&&C}}return C&&!g.defaultPrevented}function tw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function nw(c){c.g=tw(()=>{c.g=null,c.i&&(c.i=!1,nw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class lx extends fr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:nw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gs(c){fr.call(this),this.h=c,this.g={}}b(Gs,fr);var rw=[];function iw(c){J(c.g,function(d,f){this.g.hasOwnProperty(f)&&Kh(d)},c),c.g={}}Gs.prototype.N=function(){Gs.aa.N.call(this),iw(this)},Gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jh=a.JSON.stringify,dx=a.JSON.parse,hx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xh(){}Xh.prototype.h=null;function ow(c){return c.h||(c.h=c.i())}function sw(){}var Ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ef(){ht.call(this,"d")}b(ef,ht);function tf(){ht.call(this,"c")}b(tf,ht);var ti={},aw=null;function Jc(){return aw=aw||new ft}ti.La="serverreachability";function cw(c){ht.call(this,ti.La,c)}b(cw,ht);function Ks(c){let d=Jc();_t(d,new cw(d))}ti.STAT_EVENT="statevent";function uw(c,d){ht.call(this,ti.STAT_EVENT,c),this.stat=d}b(uw,ht);function wt(c){let d=Jc();_t(d,new uw(d,c))}ti.Ma="timingevent";function lw(c,d){ht.call(this,ti.Ma,c),this.size=d}b(lw,ht);function Qs(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Ys(){this.g=!0}Ys.prototype.xa=function(){this.g=!1};function fx(c,d,f,g,C,A){c.info(function(){if(c.g)if(A)for(var L="",be=A.split("&"),at=0;at<be.length;at++){var we=be[at].split("=");if(1<we.length){var pt=we[0];we=we[1];var gt=pt.split("_");L=2<=gt.length&&gt[1]=="type"?L+(pt+"="+we+"&"):L+(pt+"=redacted&")}}else L=null;else L=A;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+L})}function px(c,d,f,g,C,A,L){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+A+" "+L})}function eo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+mx(c,f)+(g?" "+g:"")})}function gx(c,d){c.info(function(){return"TIMEOUT: "+d})}Ys.prototype.info=function(){};function mx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var A=C[0];if(A!="noop"&&A!="stop"&&A!="close")for(var L=1;L<C.length;L++)C[L]=""}}}}return Jh(f)}catch{return d}}var Xc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nf;function eu(){}b(eu,Xh),eu.prototype.g=function(){return new XMLHttpRequest},eu.prototype.i=function(){return{}},nf=new eu;function pr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Gs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hw}function hw(){this.i=null,this.g="",this.h=!1}var fw={},rf={};function of(c,d,f){c.L=1,c.v=iu($n(d)),c.m=f,c.P=!0,pw(c,null)}function pw(c,d){c.F=Date.now(),tu(c),c.A=$n(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),Aw(f.i,"t",g),c.C=0,f=c.j.J,c.h=new hw,c.g=Gw(c.j,f?d:null,!c.m),0<c.O&&(c.M=new lx(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(rw[0]=C.toString()),C=rw);for(var A=0;A<C.length;A++){var L=Y_(f,C[A],g||d.handleEvent,!1,d.h||d);if(!L)break;d.g[L.key]=L}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ks(),fx(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Hn(c)==3?d.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{let gt=Hn(this.g);var d=this.g.Ba();let ro=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Ow(this.g)))){this.J||gt!=4||d==7||(d==8||0>=ro?Ks(3):Ks(2)),sf(this);var f=this.g.Z();this.X=f;t:if(gw(this)){var g=Ow(this.g);c="";var C=g.length,A=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Zs(this);var L="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=f==200,px(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,at=this.g;if((be=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(be)){var we=be;break t}}we=null}if(f=we)eo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,af(this,f);else{this.o=!1,this.s=3,wt(12),ni(this),Zs(this);break e}}if(this.P){f=!0;let sn;for(;!this.J&&this.C<L.length;)if(sn=yx(this,L),sn==rf){gt==4&&(this.s=4,wt(14),f=!1),eo(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==fw){this.s=4,wt(15),eo(this.i,this.l,L,"[Invalid Chunk]"),f=!1;break}else eo(this.i,this.l,sn,null),af(this,sn);if(gw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||L.length!=0||this.h.h||(this.s=1,wt(16),f=!1),this.o=this.o&&f,!f)eo(this.i,this.l,L,"[Invalid Chunked Response]"),ni(this),Zs(this);else if(0<L.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),ff(pt),pt.M=!0,wt(11))}}else eo(this.i,this.l,L,null),af(this,L);gt==4&&ni(this),this.o&&!this.J&&(gt==4?$w(this.j,this):(this.o=!1,tu(this)))}else kx(this.g),f==400&&0<L.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),ni(this),Zs(this)}}}catch{}finally{}};function gw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function yx(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?rf:(f=Number(d.substring(f,g)),isNaN(f)?fw:(g+=1,g+f>d.length?rf:(d=d.slice(g,g+f),c.C=g+f,d)))}pr.prototype.cancel=function(){this.J=!0,ni(this)};function tu(c){c.S=Date.now()+c.I,mw(c,c.I)}function mw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Qs(m(c.ba,c),d)}function sf(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(gx(this.i,this.A),this.L!=2&&(Ks(),wt(17)),ni(this),this.s=2,Zs(this)):mw(this,this.S-c)};function Zs(c){c.j.G==0||c.J||$w(c.j,c)}function ni(c){sf(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,iw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function af(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||cf(f.h,c))){if(!c.K&&cf(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)uu(f),au(f);else break e;hf(f),wt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Qs(m(f.Za,f),6e3));if(1>=_w(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ii(f,11)}else if((c.K||f.g==c)&&uu(f),!q(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let we=C[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let pt=we[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));let gt=we[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let ro=we[5];ro!=null&&typeof ro=="number"&&0<ro&&(g=1.5*ro,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let sn=c.g;if(sn){let du=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(du){var A=g.h;A.g||du.indexOf("spdy")==-1&&du.indexOf("quic")==-1&&du.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(uf(A,A.h),A.h=null))}if(g.D){let pf=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;pf&&(g.ya=pf,Re(g.I,g.D,pf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var L=c;if(g.qa=zw(g,g.J?g.ia:null,g.W),L.K){ww(g.h,L);var be=L,at=g.L;at&&(be.I=at),be.B&&(sf(be),tu(be)),g.g=L}else Bw(g);0<f.i.length&&cu(f)}else we[0]!="stop"&&we[0]!="close"||ii(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?ii(f,7):df(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}Ks(4)}catch{}}var vx=class{constructor(c,d){this.g=c,this.map=d}};function yw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function _w(c){return c.h?1:c.g?c.g.size:0}function cf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function uf(c,d){c.g?c.g.add(d):c.h=d}function ww(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}yw.prototype.cancel=function(){if(this.i=Iw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Iw(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function _x(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function wx(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Ew(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=wx(c),g=_x(c),C=g.length,A=0;A<C;A++)d.call(void 0,g[A],f&&f[A],c)}var Dw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ix(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var A=c[f].substring(0,g);C=c[f].substring(g+1)}else A=c[f];d(A,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ri){this.h=c.h,nu(this,c.j),this.o=c.o,this.g=c.g,ru(this,c.s),this.l=c.l;var d=c.i,f=new ea;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Cw(this,f),this.m=c.m}else c&&(d=String(c).match(Dw))?(this.h=!1,nu(this,d[1]||"",!0),this.o=Js(d[2]||""),this.g=Js(d[3]||"",!0),ru(this,d[4]),this.l=Js(d[5]||"",!0),Cw(this,d[6]||"",!0),this.m=Js(d[7]||"")):(this.h=!1,this.i=new ea(null,this.h))}ri.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Xs(d,Tw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Xs(d,Tw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Xs(f,f.charAt(0)=="/"?Cx:Dx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Xs(f,bx)),c.join("")};function $n(c){return new ri(c)}function nu(c,d,f){c.j=f?Js(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function ru(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Cw(c,d,f){d instanceof ea?(c.i=d,Sx(c.i,c.h)):(f||(d=Xs(d,Tx)),c.i=new ea(d,c.h))}function Re(c,d,f){c.i.set(d,f)}function iu(c){return Re(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Js(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Xs(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,Ex),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ex(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Tw=/[#\/\?@]/g,Dx=/[#\?:]/g,Cx=/[#\?]/g,Tx=/[#\?@]/g,bx=/#/g;function ea(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function gr(c){c.g||(c.g=new Map,c.h=0,c.i&&Ix(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=ea.prototype,n.add=function(c,d){gr(this),this.i=null,c=to(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function bw(c,d){gr(c),d=to(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Sw(c,d){return gr(c),d=to(c,d),c.g.has(d)}n.forEach=function(c,d){gr(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){gr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let A=0;A<C.length;A++)f.push(d[g])}return f},n.V=function(c){gr(this);let d=[];if(typeof c=="string")Sw(this,c)&&(d=d.concat(this.g.get(to(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return gr(this),this.i=null,c=to(this,c),Sw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function Aw(c,d,f){bw(c,d),0<f.length&&(c.i=null,c.g.set(to(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),L=this.V(g);for(g=0;g<L.length;g++){var C=A;L[g]!==""&&(C+="="+encodeURIComponent(String(L[g]))),c.push(C)}}return this.i=c.join("&")};function to(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Sx(c,d){d&&!c.j&&(gr(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(bw(this,g),Aw(this,C,f))},c)),c.j=d}function Ax(c,d){let f=new Ys;if(a.Image){let g=new Image;g.onload=v(mr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(mr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(mr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(mr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function xx(c,d){let f=new Ys,g=new AbortController,C=setTimeout(()=>{g.abort(),mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(C),A.ok?mr(f,"TestPingServer: ok",!0,d):mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),mr(f,"TestPingServer: error",!1,d)})}function mr(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function Mx(){this.g=new hx}function Rx(c,d,f){let g=f||"";try{Ew(c,function(C,A){let L=C;l(C)&&(L=Jh(C)),d.push(g+A+"="+encodeURIComponent(L))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function ta(c){this.l=c.Ub||null,this.j=c.eb||!1}b(ta,Xh),ta.prototype.g=function(){return new ou(this.l,this.j)},ta.prototype.i=function(c){return function(){return c}}({});function ou(c,d){ft.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ou,ft),n=ou.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,ra(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,na(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ra(this)),this.g&&(this.readyState=3,ra(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function xw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?na(this):ra(this),this.readyState==3&&xw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,na(this))},n.Qa=function(c){this.g&&(this.response=c,na(this))},n.ga=function(){this.g&&na(this)};function na(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ra(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function ra(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ou.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mw(c){let d="";return J(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function lf(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=Mw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Re(c,d,f))}function je(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(je,ft);var Nx=/^https?$/i,Px=["POST","PUT"];n=je.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nf.g(),this.v=this.o?ow(this.o):ow(nf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){Rw(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Px,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,L]of f)this.g.setRequestHeader(A,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{kw(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){Rw(this,A)}};function Rw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Nw(c),su(c)}function Nw(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),su(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),su(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Pw(this):this.bb())},n.bb=function(){Pw(this)};function Pw(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)tw(c.Ea,0,c);else if(_t(c,"readystatechange"),Hn(c)==4){c.h=!1;try{let L=c.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=L===0){var C=String(c.D).match(Dw)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!Nx.test(C?C.toLowerCase():"")}f=g}if(f)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var A=2<Hn(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",Nw(c)}}finally{su(c)}}}}function su(c,d){if(c.g){kw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||_t(c,"ready");try{f.onreadystatechange=g}catch{}}}function kw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),dx(d)}};function Ow(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kx(c){let d={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[C]||[];d[C]=A,A.push(f)}I(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ia(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Fw(c){this.Aa=0,this.i=[],this.j=new Ys,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ia("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ia("baseRetryDelayMs",5e3,c),this.cb=ia("retryDelaySeedMs",1e4,c),this.Wa=ia("forwardChannelMaxRetries",2,c),this.wa=ia("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new yw(c&&c.concurrentRequestLimit),this.Da=new Mx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){wt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=zw(this,null,this.W),cu(this)};function df(c){if(Lw(c),c.G==3){var d=c.U++,f=$n(c.I);if(Re(f,"SID",c.K),Re(f,"RID",d),Re(f,"TYPE","terminate"),oa(c,f),d=new pr(c,c.j,d),d.L=2,d.v=iu($n(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=Gw(d.j,null),d.g.ea(d.v)),d.F=Date.now(),tu(d)}qw(c)}function au(c){c.g&&(ff(c),c.g.cancel(),c.g=null)}function Lw(c){au(c),c.u&&(a.clearTimeout(c.u),c.u=null),uu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function cu(c){if(!vw(c.h)&&!c.s){c.s=!0;var d=c.Ga;$s||Q_(),Hs||($s(),Hs=!0),Hh.add(d,c),c.B=0}}function Ox(c,d){return _w(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Qs(m(c.Ga,c,d),Hw(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new pr(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(C.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=jw(this,C,d),f=$n(this.I),Re(f,"RID",c),Re(f,"CVER",22),this.D&&Re(f,"X-HTTP-Session-Id",this.D),oa(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(Mw(A)))+"&"+d:this.m&&lf(f,this.m,A)),uf(this.h,C),this.Ua&&Re(f,"TYPE","init"),this.P?(Re(f,"$req",d),Re(f,"SID","null"),C.T=!0,of(C,f,null)):of(C,f,d),this.G=2}}else this.G==3&&(c?Vw(this,c):this.i.length==0||vw(this.h)||Vw(this))};function Vw(c,d){var f;d?f=d.l:f=c.U++;let g=$n(c.I);Re(g,"SID",c.K),Re(g,"RID",f),Re(g,"AID",c.T),oa(c,g),c.m&&c.o&&lf(g,c.m,c.o),f=new pr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=jw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),uf(c.h,f),of(f,g,d)}function oa(c,d){c.H&&J(c.H,function(f,g){Re(d,g,f)}),c.l&&Ew({},function(f,g){Re(d,g,f)})}function jw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let A=-1;for(;;){let L=["count="+f];A==-1?0<f?(A=C[0].g,L.push("ofs="+A)):A=0:L.push("ofs="+A);let be=!0;for(let at=0;at<f;at++){let we=C[at].g,pt=C[at].map;if(we-=A,0>we)A=Math.max(0,C[at].g-100),be=!1;else try{Rx(pt,L,"req"+we+"_")}catch{g&&g(pt)}}if(be){g=L.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function Bw(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;$s||Q_(),Hs||($s(),Hs=!0),Hh.add(d,c),c.v=0}}function hf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Qs(m(c.Fa,c),Hw(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,Uw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Qs(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),au(this),Uw(this))};function ff(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Uw(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=$n(c.qa);Re(d,"RID","rpc"),Re(d,"SID",c.K),Re(d,"AID",c.T),Re(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Re(d,"TO",c.ja),Re(d,"TYPE","xmlhttp"),oa(c,d),c.m&&c.o&&lf(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=iu($n(d)),f.m=null,f.P=!0,pw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,au(this),hf(this),wt(19))};function uu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function $w(c,d){var f=null;if(c.g==d){uu(c),ff(c),c.g=null;var g=2}else if(cf(c.h,d))f=d.D,ww(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=Jc(),_t(g,new lw(g,f)),cu(c)}else Bw(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&Ox(c,d)||g==2&&hf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ii(c,5);break;case 4:ii(c,10);break;case 3:ii(c,6);break;default:ii(c,2)}}}function Hw(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ii(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||nu(g,"https"),iu(g),C?Ax(g.toString(),f):xx(g.toString(),f)}else wt(2);c.G=0,c.l&&c.l.sa(d),qw(c),Lw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function qw(c){if(c.G=0,c.ka=[],c.l){let d=Iw(c.h);(d.length!=0||c.i.length!=0)&&(N(c.ka,d),N(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function zw(c,d,f){var g=f instanceof ri?$n(f):new ri(f);if(g.g!="")d&&(g.g=d+"."+g.g),ru(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var A=new ri(null);g&&nu(A,g),d&&(A.g=d),C&&ru(A,C),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Re(g,f,d),Re(g,"VER",c.la),oa(c,g),g}function Gw(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new je(new ta({eb:f})):new je(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ww(){}n=Ww.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function lu(){}lu.prototype.g=function(c,d){return new jt(c,d)};function jt(c,d){ft.call(this),this.g=new Fw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new no(this)}b(jt,ft),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){df(this.g)},jt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Jh(c),c=f);d.i.push(new vx(d.Ya++,c)),d.G==3&&cu(d)},jt.prototype.N=function(){this.g.l=null,delete this.j,df(this.g),delete this.g,jt.aa.N.call(this)};function Kw(c){ef.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(Kw,ef);function Qw(){tf.call(this),this.status=1}b(Qw,tf);function no(c){this.g=c}b(no,Ww),no.prototype.ua=function(){_t(this.g,"a")},no.prototype.ta=function(c){_t(this.g,new Kw(c))},no.prototype.sa=function(c){_t(this.g,new Qw)},no.prototype.ra=function(){_t(this.g,"b")},lu.prototype.createWebChannel=lu.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,Wm=rr.createWebChannelTransport=function(){return new lu},Gm=rr.getStatEventTarget=function(){return Jc()},zm=rr.Event=ti,wd=rr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xc.NO_ERROR=0,Xc.TIMEOUT=8,Xc.HTTP_ERROR=6,cc=rr.ErrorCode=Xc,dw.COMPLETE="complete",qm=rr.EventType=dw,sw.EventType=Ws,Ws.OPEN="a",Ws.CLOSE="b",Ws.ERROR="c",Ws.MESSAGE="d",ft.prototype.listen=ft.prototype.K,es=rr.WebChannel=sw,dL=rr.FetchXmlHttpFactory=ta,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,Hm=rr.XhrIo=je}).apply(typeof _d<"u"?_d:typeof self<"u"?self:typeof window<"u"?window:{});var cT="@firebase/firestore";var Xe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");var Rs="10.14.0";var $r=new pu("@firebase/firestore");function os(){return $r.logLevel}function db(n){$r.setLogLevel(n)}function k(n,...e){if($r.logLevel<=In.DEBUG){let t=e.map(Jv);$r.debug(`Firestore (${Rs}): ${n}`,...t)}}function Ge(n,...e){if($r.logLevel<=In.ERROR){let t=e.map(Jv);$r.error(`Firestore (${Rs}): ${n}`,...t)}}function mn(n,...e){if($r.logLevel<=In.WARN){let t=e.map(Jv);$r.warn(`Firestore (${Rs}): ${n}`,...t)}}function Jv(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function z(n="Unexpected state"){let e=`FIRESTORE (${Rs}) INTERNAL ASSERTION FAILED: `+n;throw Ge(e),new Error(e)}function K(n,e){n||z()}function hb(n,e){n||z()}function U(n,e){return n}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},P=class extends tI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var rt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Md=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Xm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xe.UNAUTHENTICATED))}shutdown(){}},ey=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},ty=class{constructor(e){this.t=e,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){K(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new rt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>M(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{k("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(k("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(k("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(K(typeof r.accessToken=="string"),new Md(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return K(e===null||typeof e=="string"),new Xe(e)}},ny=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ry=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new ny(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},iy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},oy=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){K(this.o===void 0);let r=o=>{o.error!=null&&k("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,k("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{k("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):k("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(K(typeof t.token=="string"),this.R=t.token,new iy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function hL(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Rd=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=hL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function oe(n,e){return n<e?-1:n>e?1:0}function ps(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function fb(n){return n+"\0"}var Le=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new P(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new P(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Le(0,0))}static max(){return new n(new Le(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Nd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&z(),r===void 0?r=e.length-t:r>e.length-t&&z(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ve=class n extends Nd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},fL=/^[_a-zA-Z][_a-zA-Z0-9]*$/,We=class n extends Nd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return fL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new P(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new P(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new P(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var $=class n{constructor(e){this.path=e}static fromPath(e){return new n(ve.fromString(e))}static fromName(e){return new n(ve.fromString(e).popFirst(5))}static empty(){return new n(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ve(e.slice()))}};var gs=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function sy(n){return n.fields.find(e=>e.kind===2)}function Ai(n){return n.fields.filter(e=>e.kind!==2)}gs.UNKNOWN_ID=-1;var ds=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var wc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,rn.min())}};function pb(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new Le(t+1,0):new Le(t,r));return new rn(i,$.empty(),e)}function gb(n){return new rn(n.readTime,n.key,-1)}var rn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Y.min(),$.empty(),-1)}static max(){return new n(Y.max(),$.empty(),-1)}};function Xv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=$.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var mb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Jr(n){return M(this,null,function*(){if(n.code!==x.FAILED_PRECONDITION||n.message!==mb)throw n;k("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var kd=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new rt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ki(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=e_(r.target.error);this.V.reject(new ki(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new ki(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(k("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new cy(t)}},Hr=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(sa())===12.2&&Ge("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return k("SimpleDb","Removing database:",e),xi(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!fu())return!1;if(n.v())return!0;let e=sa(),t=n.S(e),r=0<t&&t<10,i=yb(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return M(this,null,function*(){return this.db||(k("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new ki(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new P(x.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new P(x.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ki(e,s))},i.onupgradeneeded=o=>{k("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{k("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return M(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=kd.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(k("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function yb(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var ay=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return xi(this.B.delete())}},ki=class extends P{constructor(e,t){super(x.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Xr(n){return n.name==="IndexedDbTransactionError"}var cy=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(k("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(k("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),xi(r)}add(e){return k("SimpleDb","ADD",this.store.name,e,e),xi(this.store.add(e))}get(e){return xi(this.store.get(e)).next(t=>(t===void 0&&(t=null),k("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return k("SimpleDb","DELETE",this.store.name,e),xi(this.store.delete(e))}count(){return k("SimpleDb","COUNT",this.store.name),xi(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){k("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=e_(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new ay(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function xi(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=e_(r.target.error);t(i)}})}var uT=!1;function e_(n){let e=Hr.S(sa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new P("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return uT||(uT=!0,setTimeout(()=>{throw r},0)),r}}return n}var uy=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){k("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>M(this,null,function*(){this.task=null;try{k("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Xr(t)?k("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Jr(t)}yield this.X(6e4)}))}},ly=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return M(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return k("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(k("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=gb(o);Xv(s,r)>0&&(r=s)}),new rn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var zt=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Uc(n){return n==null}function Ic(n){return n===0&&1/n==-1/0}function vb(n){return typeof n=="number"&&Number.isInteger(n)&&!Ic(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function St(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=lT(e)),e=pL(n.get(t),e);return lT(e)}function pL(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function lT(n){return n+""}function Rn(n){let e=n.length;if(K(e>=2),e===2)return K(n.charAt(0)===""&&n.charAt(1)===""),ve.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&z(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:z()}o=s+2}return new ve(r)}var dT=["userId","batchId"];function Td(n,e){return[n,St(e)]}function _b(n,e,t){return[n,St(e),t]}var gL={},mL=["prefixPath","collectionGroup","readTime","documentId"],yL=["prefixPath","collectionGroup","documentId"],vL=["collectionGroup","readTime","prefixPath","documentId"],_L=["canonicalId","targetId"],wL=["targetId","path"],IL=["path","targetId"],EL=["collectionId","parent"],DL=["indexId","uid"],CL=["uid","sequenceNumber"],TL=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bL=["indexId","uid","orderedDocumentKey"],SL=["userId","collectionPath","documentId"],AL=["userId","collectionPath","largestBatchId"],xL=["userId","collectionGroup","largestBatchId"],wb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ML=[...wb,"documentOverlays"],Ib=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Eb=Ib,t_=[...Eb,"indexConfiguration","indexState","indexEntries"],RL=t_,NL=[...t_,"globals"];var Ec=class extends Pd{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function it(n,e){let t=U(n);return Hr.F(t._e,e)}function hT(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Gi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Db(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ls(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ls(this.root,e,this.comparator,!1)}getReverseIterator(){return new ls(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ls(this.root,e,this.comparator,!0)}},ls=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pn=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw z();let e=this.left.check();if(e!==this.right.check())throw z();return e+(this.isRed()?0:1)}};Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw z()}get value(){throw z()}get color(){throw z()}get left(){throw z()}get right(){throw z()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ae=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Od(this.data.getIterator())}getIteratorFrom(e){return new Od(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Od=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ts(n){return n.hasNext()?n.getNext():void 0}var Gt=class n{constructor(e){this.fields=e,e.sort(We.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ae(We.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ps(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Fd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function Cb(){return typeof atob<"u"}var Qe=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Fd("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Qe.EMPTY_BYTE_STRING=new Qe("");var PL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(n){if(K(!!n),typeof n=="string"){let e=0,t=PL.exec(n);if(K(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(n.seconds),nanos:ke(n.nanos)}}function ke(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qr(n){return typeof n=="string"?Qe.fromBase64String(n):Qe.fromUint8Array(n)}function Sh(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function n_(n){let e=n.mapValue.fields.__previous_value__;return Sh(e)?n_(e):e}function Dc(n){let e=sr(n.mapValue.fields.__local_write_time__.timestampValue);return new Le(e.seconds,e.nanos)}var dy=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},zr=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Br={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bd={nullValue:"NULL_VALUE"};function Oi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sh(n)?4:Tb(n)?9007199254740991:Ah(n)?10:11:z()}function Fn(n,e){if(n===e)return!0;let t=Oi(n);if(t!==Oi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dc(n).isEqual(Dc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=sr(i.timestampValue),a=sr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return qr(i.bytesValue).isEqual(qr(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ke(i.geoPointValue.latitude)===ke(o.geoPointValue.latitude)&&ke(i.geoPointValue.longitude)===ke(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ke(i.integerValue)===ke(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=ke(i.doubleValue),a=ke(o.doubleValue);return s===a?Ic(s)===Ic(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ps(n.arrayValue.values||[],e.arrayValue.values||[],Fn);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(hT(s)!==hT(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Fn(s[u],a[u])))return!1;return!0}(n,e);default:return z()}}function Cc(n,e){return(n.values||[]).find(t=>Fn(t,e))!==void 0}function Gr(n,e){if(n===e)return 0;let t=Oi(n),r=Oi(e);if(t!==r)return oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=ke(o.integerValue||o.doubleValue),u=ke(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return fT(n.timestampValue,e.timestampValue);case 4:return fT(Dc(n),Dc(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=qr(o),u=qr(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=oe(a[l],u[l]);if(h!==0)return h}return oe(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=oe(ke(o.latitude),ke(s.latitude));return a!==0?a:oe(ke(o.longitude),ke(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return pT(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},v=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,R=oe(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:pT(v,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Br.mapValue&&s===Br.mapValue)return 0;if(o===Br.mapValue)return 1;if(s===Br.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=oe(u[p],h[p]);if(m!==0)return m;let v=Gr(a[u[p]],l[h[p]]);if(v!==0)return v}return oe(u.length,h.length)}(n.mapValue,e.mapValue);default:throw z()}}function fT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=sr(n),r=sr(e),i=oe(t.seconds,r.seconds);return i!==0?i:oe(t.nanos,r.nanos)}function pT(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Gr(t[i],r[i]);if(o)return o}return oe(t.length,r.length)}function ms(n){return hy(n)}function hy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=sr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return $.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=hy(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${hy(t.fields[s])}`;return i+"}"}(n.mapValue):z()}function Fi(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fy(n){return!!n&&"integerValue"in n}function Tc(n){return!!n&&"arrayValue"in n}function gT(n){return!!n&&"nullValue"in n}function mT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Sd(n){return!!n&&"mapValue"in n}function Ah(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function gc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Gi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Tb(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var bb={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function kL(n){return"nullValue"in n?bd:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fi(zr.empty(),$.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Ah(n)?bb:{mapValue:{}}:z()}function OL(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fi(zr.empty(),$.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?bb:"mapValue"in n?Ah(n)?{mapValue:{}}:Br:z()}function yT(n,e){let t=Gr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vT(n,e){let t=Gr(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Sd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(t)}setAll(e){let t=We.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=gc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Sd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Sd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Gi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(gc(this.value))}};function Sb(n){let e=[];return Gi(n.fields,(t,r)=>{let i=new We([t]);if(Sd(r)){let o=Sb(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gt(e)}var et=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Y.min(),Y.min(),Y.min(),vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Y.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Y.min(),Y.min(),vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Y.min(),Y.min(),vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ln=class{constructor(e,t){this.position=e,this.inclusive=t}};function _T(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=$.comparator($.fromName(s.referenceValue),t.key):r=Gr(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function wT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fn(n.position[t],e.position[t]))return!1;return!0}var Li=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function FL(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ld=class{},fe=class n extends Ld{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new my(e,t,r):t==="array-contains"?new _y(e,r):t==="in"?new Vd(e,r):t==="not-in"?new wy(e,r):t==="array-contains-any"?new Iy(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new yy(e,r):new vy(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Gr(t,this.value)):t!==null&&Oi(this.value)===Oi(t)&&this.matchesComparison(Gr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Te=class n extends Ld{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ys(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ys(n){return n.op==="and"}function py(n){return n.op==="or"}function r_(n){return Ab(n)&&ys(n)}function Ab(n){for(let e of n.filters)if(e instanceof Te)return!1;return!0}function gy(n){if(n instanceof fe)return n.field.canonicalString()+n.op.toString()+ms(n.value);if(r_(n))return n.filters.map(e=>gy(e)).join(",");{let e=n.filters.map(t=>gy(t)).join(",");return`${n.op}(${e})`}}function xb(n,e){return n instanceof fe?function(r,i){return i instanceof fe&&r.op===i.op&&r.field.isEqual(i.field)&&Fn(r.value,i.value)}(n,e):n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&xb(s,i.filters[a]),!0):!1}(n,e):void z()}function Mb(n,e){let t=n.filters.concat(e);return Te.create(t,n.op)}function Rb(n){return n instanceof fe?function(t){return`${t.field.canonicalString()} ${t.op} ${ms(t.value)}`}(n):n instanceof Te?function(t){return t.op.toString()+" {"+t.getFilters().map(Rb).join(" ,")+"}"}(n):"Filter"}var my=class extends fe{constructor(e,t,r){super(e,t,r),this.key=$.fromName(r.referenceValue)}matches(e){let t=$.comparator(e.key,this.key);return this.matchesComparison(t)}},yy=class extends fe{constructor(e,t){super(e,"in",t),this.keys=Nb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},vy=class extends fe{constructor(e,t){super(e,"not-in",t),this.keys=Nb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Nb(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>$.fromName(r.referenceValue))}var _y=class extends fe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Tc(t)&&Cc(t.arrayValue,this.value)}},Vd=class extends fe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Cc(this.value.arrayValue,t)}},wy=class extends fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Cc(this.value.arrayValue,t)}},Iy=class extends fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Tc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Cc(this.value.arrayValue,r))}};var Ey=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function Dy(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Ey(n,e,t,r,i,o,s)}function Vi(n){let e=U(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gy(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Uc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ms(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ms(r)).join(",")),e.ue=t}return e.ue}function $c(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FL(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!xb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!wT(n.startAt,e.startAt)&&wT(n.endAt,e.endAt)}function jd(n){return $.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Bd(n,e){return n.filters.filter(t=>t instanceof fe&&t.field.isEqual(e))}function IT(n,e,t){let r=bd,i=!0;for(let o of Bd(n,e)){let s=bd,a=!0;switch(o.op){case"<":case"<=":s=kL(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=bd}yT({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];yT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function ET(n,e,t){let r=Br,i=!0;for(let o of Bd(n,e)){let s=Br,a=!0;switch(o.op){case">=":case">":s=OL(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=Br}vT({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];vT({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var yn=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Pb(n,e,t,r,i,o,s,a){return new yn(n,e,t,r,i,o,s,a)}function Ns(n){return new yn(n)}function DT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function i_(n){return n.collectionGroup!==null}function hs(n){let e=U(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ae(We.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Li(o,r))}),t.has(We.keyField().canonicalString())||e.ce.push(new Li(We.keyField(),r))}return e.ce}function At(n){let e=U(n);return e.le||(e.le=LL(e,hs(n))),e.le}function LL(n,e){if(n.limitType==="F")return Dy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Li(i.field,o)});let t=n.endAt?new Ln(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ln(n.startAt.position,n.startAt.inclusive):null;return Dy(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Cy(n,e){let t=n.filters.concat([e]);return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ud(n,e,t){return new yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hc(n,e){return $c(At(n),At(e))&&n.limitType===e.limitType}function kb(n){return`${Vi(At(n))}|lt:${n.limitType}`}function ss(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Rb(i)).join(", ")}]`),Uc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ms(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ms(i)).join(",")),`Target(${r})`}(At(n))}; limitType=${n.limitType})`}function qc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):$.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of hs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=_T(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,hs(r),i)||r.endAt&&!function(s,a,u){let l=_T(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,hs(r),i))}(n,e)}function Ob(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Fb(n){return(e,t)=>{let r=!1;for(let i of hs(n)){let o=VL(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function VL(n,e,t){let r=n.field.isKeyField()?$.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Gr(u,l):z()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return z()}}var Vn=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Db(this.inner)}size(){return this.innerSize}};var jL=new Ne($.comparator);function Lt(){return jL}var Lb=new Ne($.comparator);function fc(...n){let e=Lb;for(let t of n)e=e.insert(t.key,t);return e}function Vb(n){let e=Lb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nn(){return mc()}function jb(){return mc()}function mc(){return new Vn(n=>n.toString(),(n,e)=>n.isEqual(e))}var BL=new Ne($.comparator),UL=new Ae($.comparator);function se(...n){let e=UL;for(let t of n)e=e.add(t);return e}var $L=new Ae(oe);function o_(){return $L}function s_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ic(e)?"-0":e}}function Bb(n){return{integerValue:""+n}}function Ub(n,e){return vb(e)?Bb(e):s_(n,e)}var vs=class{constructor(){this._=void 0}};function HL(n,e,t){return n instanceof Wr?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Sh(o)&&(o=n_(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof ar?Hb(n,e):n instanceof cr?qb(n,e):function(i,o){let s=$b(i,o),a=CT(s)+CT(i.Pe);return fy(s)&&fy(i.Pe)?Bb(a):s_(i.serializer,a)}(n,e)}function qL(n,e,t){return n instanceof ar?Hb(n,e):n instanceof cr?qb(n,e):t}function $b(n,e){return n instanceof Kr?function(r){return fy(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Wr=class extends vs{},ar=class extends vs{constructor(e){super(),this.elements=e}};function Hb(n,e){let t=zb(e);for(let r of n.elements)t.some(i=>Fn(i,r))||t.push(r);return{arrayValue:{values:t}}}var cr=class extends vs{constructor(e){super(),this.elements=e}};function qb(n,e){let t=zb(e);for(let r of n.elements)t=t.filter(i=>!Fn(i,r));return{arrayValue:{values:t}}}var Kr=class extends vs{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function CT(n){return ke(n.integerValue||n.doubleValue)}function zb(n){return Tc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var ji=class{constructor(e,t){this.field=e,this.transform=t}};function zL(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ar&&i instanceof ar||r instanceof cr&&i instanceof cr?ps(r.elements,i.elements,Fn):r instanceof Kr&&i instanceof Kr?Fn(r.Pe,i.Pe):r instanceof Wr&&i instanceof Wr}(n.transform,e.transform)}var Ty=class{constructor(e,t){this.version=e,this.transformResults=t}},He=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ad(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var _s=class{};function Gb(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Yr(n.key,He.none()):new Qr(n.key,n.data,He.none());{let t=n.data,r=vt.empty(),i=new Ae(We.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new vn(n.key,r,new Gt(i.toArray()),He.none())}}function GL(n,e,t){n instanceof Qr?function(i,o,s){let a=i.value.clone(),u=bT(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof vn?function(i,o,s){if(!Ad(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=bT(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(Wb(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function yc(n,e,t,r){return n instanceof Qr?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let l=o.value.clone(),h=ST(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof vn?function(o,s,a,u){if(!Ad(o.precondition,s))return a;let l=ST(o.fieldTransforms,u,s),h=s.data;return h.setAll(Wb(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Ad(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function WL(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=$b(r.transform,i||null);o!=null&&(t===null&&(t=vt.empty()),t.set(r.field,o))}return t||null}function TT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ps(r,i,(o,s)=>zL(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Qr=class extends _s{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},vn=class extends _s{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Wb(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function bT(n,e,t){let r=new Map;K(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,qL(s,a,t[i]))}return r}function ST(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,HL(o,s,e))}return r}var Yr=class extends _s{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bc=class extends _s{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Sc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&GL(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=yc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=yc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=jb();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=Gb(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&ps(this.mutations,e.mutations,(t,r)=>TT(t,r))&&ps(this.baseMutations,e.baseMutations,(t,r)=>TT(t,r))}},by=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){K(e.mutations.length===r.length);let i=function(){return BL}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ac=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Sy=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ze,ye;function Kb(n){switch(n){default:return z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function Qb(n){if(n===void 0)return Ge("GRPC error has no .code"),x.UNKNOWN;switch(n){case Ze.OK:return x.OK;case Ze.CANCELLED:return x.CANCELLED;case Ze.UNKNOWN:return x.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return x.INTERNAL;case Ze.UNAVAILABLE:return x.UNAVAILABLE;case Ze.UNAUTHENTICATED:return x.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case Ze.NOT_FOUND:return x.NOT_FOUND;case Ze.ALREADY_EXISTS:return x.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return x.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case Ze.ABORTED:return x.ABORTED;case Ze.OUT_OF_RANGE:return x.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return x.UNIMPLEMENTED;case Ze.DATA_LOSS:return x.DATA_LOSS;default:return z()}}(ye=Ze||(Ze={}))[ye.OK=0]="OK",ye[ye.CANCELLED=1]="CANCELLED",ye[ye.UNKNOWN=2]="UNKNOWN",ye[ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ye[ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ye[ye.NOT_FOUND=5]="NOT_FOUND",ye[ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",ye[ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",ye[ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",ye[ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ye[ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ye[ye.ABORTED=10]="ABORTED",ye[ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",ye[ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",ye[ye.INTERNAL=13]="INTERNAL",ye[ye.UNAVAILABLE=14]="UNAVAILABLE",ye[ye.DATA_LOSS=15]="DATA_LOSS";var AT=null;function Yb(){return new TextEncoder}var KL=new Or([4294967295,4294967295],0);function xT(n){let e=Yb().encode(n),t=new $m;return t.update(e),new Uint8Array(t.digest())}function MT(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Or([t,r],0),new Or([i,o],0)]}var Ay=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Pi(`Invalid padding: ${t}`);if(r<0)throw new Pi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Pi(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Pi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Or.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Or.fromNumber(r)));return i.compare(KL)===1&&(i=new Or([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=xT(e),[r,i]=MT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=xT(e),[r,i]=MT(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Pi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var xc=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Y.min(),i,new Ne(oe),Lt(),se())}},Mc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,se(),se(),se())}};var fs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},$d=class{constructor(e,t){this.targetId=e,this.me=t}},Hd=class{constructor(e,t,r=Qe.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},qd=class{constructor(){this.fe=0,this.ge=NT(),this.pe=Qe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),t=se(),r=se();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:z()}}),new Mc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=NT()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,K(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},xy=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Lt(),this.qe=RT(),this.Qe=new Ne(oe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:z()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(jd(o))if(r===0){let s=new $(o.path);this.Ue(t,s,et.newNoDocument(s,Y.min()))}else K(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}AT?.et(function(h,p,m,v,b){var R,N,B,q,F,Z;let te={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},J=p.unchangedNames;return J&&(te.bloomFilter={applied:b===0,hashCount:(R=J?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(q=(B=(N=J?.bits)===null||N===void 0?void 0:N.bitmap)===null||B===void 0?void 0:B.length)!==null&&q!==void 0?q:0,padding:(Z=(F=J?.bits)===null||F===void 0?void 0:F.padding)!==null&&Z!==void 0?Z:0,mightContain:I=>{var y;return(y=v?.mightContain(I))!==null&&y!==void 0&&y}}),te}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=qr(r).toUint8Array()}catch(u){if(u instanceof Fd)return mn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Ay(s,i,o)}catch(u){return mn(u instanceof Pi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&jd(a.target)){let u=new $(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,et.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=se();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new xc(e,t,this.Qe,this.ke,r);return this.ke=Lt(),this.qe=RT(),this.Qe=new Ne(oe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new qd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ae(oe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||k("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new qd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function RT(){return new Ne($.comparator)}function NT(){return new Ne($.comparator)}var QL={asc:"ASCENDING",desc:"DESCENDING"},YL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZL={and:"AND",or:"OR"},My=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Ry(n,e){return n.useProto3Json||Uc(e)?e:{value:e}}function ws(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zb(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JL(n,e){return ws(n,e.toTimestamp())}function Ke(n){return K(!!n),Y.fromTimestamp(function(t){let r=sr(t);return new Le(r.seconds,r.nanos)}(n))}function a_(n,e){return Ny(n,e).canonicalString()}function Ny(n,e){let t=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Jb(n){let e=ve.fromString(n);return K(cS(e)),e}function Rc(n,e){return a_(n.databaseId,e.path)}function kn(n,e){let t=Jb(e);if(t.get(1)!==n.databaseId.projectId)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new P(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $(tS(t))}function Xb(n,e){return a_(n.databaseId,e)}function eS(n){let e=Jb(n);return e.length===4?ve.emptyPath():tS(e)}function Py(n){return new ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tS(n){return K(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function PT(n,e,t){return{name:Rc(n,e),fields:t.value.mapValue.fields}}function nS(n,e,t){let r=kn(n,e.name),i=Ke(e.updateTime),o=e.createTime?Ke(e.createTime):Y.min(),s=new vt({mapValue:{fields:e.fields}}),a=et.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function XL(n,e){return"found"in e?function(r,i){K(!!i.found),i.found.name,i.found.updateTime;let o=kn(r,i.found.name),s=Ke(i.found.updateTime),a=i.found.createTime?Ke(i.found.createTime):Y.min(),u=new vt({mapValue:{fields:i.found.fields}});return et.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){K(!!i.missing),K(!!i.readTime);let o=kn(r,i.missing),s=Ke(i.readTime);return et.newNoDocument(o,s)}(n,e):z()}function eV(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(K(h===void 0||typeof h=="string"),Qe.fromBase64String(h||"")):(K(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Qe.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?x.UNKNOWN:Qb(l.code);return new P(h,l.message||"")}(s);t=new Hd(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kn(n,r.document.name),o=Ke(r.document.updateTime),s=r.document.createTime?Ke(r.document.createTime):Y.min(),a=new vt({mapValue:{fields:r.document.fields}}),u=et.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new fs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kn(n,r.document),o=r.readTime?Ke(r.readTime):Y.min(),s=et.newNoDocument(i,o),a=r.removedTargetIds||[];t=new fs([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kn(n,r.document),o=r.removedTargetIds||[];t=new fs([],o,i,null)}else{if(!("filter"in e))return z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Sy(i,o),a=r.targetId;t=new $d(a,s)}}return t}function Nc(n,e){let t;if(e instanceof Qr)t={update:PT(n,e.key,e.value)};else if(e instanceof Yr)t={delete:Rc(n,e.key)};else if(e instanceof vn)t={update:PT(n,e.key,e.data),updateMask:sV(e.fieldMask)};else{if(!(e instanceof bc))return z();t={verify:Rc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Wr)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ar)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kr)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw z()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:JL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:z()}(n,e.precondition)),t}function ky(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?He.updateTime(Ke(o.updateTime)):o.exists!==void 0?He.exists(o.exists):He.none()}(e.currentDocument):He.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)K(a.setToServerValue==="REQUEST_TIME"),u=new Wr;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new ar(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new cr(h)}else"increment"in a?u=new Kr(s,a.increment):z();let l=We.fromServerFormat(a.fieldPath);return new ji(l,u)}(n,i)):[];if(e.update){e.update.name;let i=kn(n,e.update.name),o=new vt({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new Gt(l.map(h=>We.fromServerFormat(h)))}(e.updateMask);return new vn(i,o,s,t,r)}return new Qr(i,o,t,r)}if(e.delete){let i=kn(n,e.delete);return new Yr(i,t)}if(e.verify){let i=kn(n,e.verify);return new bc(i,t)}return z()}function tV(n,e){return n&&n.length>0?(K(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Ke(i.updateTime):Ke(o);return s.isEqual(Y.min())&&(s=Ke(o)),new Ty(s,i.transformResults||[])}(t,e))):[]}function rS(n,e){return{documents:[Xb(n,e.path)]}}function iS(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Xb(n,i);let o=function(l){if(l.length!==0)return aS(Te.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:as(m.field),direction:rV(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=Ry(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function oS(n){let e=eS(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){K(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=sS(p);return m instanceof Te&&r_(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Li(cs(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Uc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new Ln(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new Ln(v,m)}(t.endAt)),Pb(e,i,s,o,a,"F",u,l)}function nV(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return z()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sS(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=cs(t.unaryFilter.field);return fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=cs(t.unaryFilter.field);return fe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=cs(t.unaryFilter.field);return fe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=cs(t.unaryFilter.field);return fe.create(s,"!=",{nullValue:"NULL_VALUE"});default:return z()}}(n):n.fieldFilter!==void 0?function(t){return fe.create(cs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return z()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Te.create(t.compositeFilter.filters.map(r=>sS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return z()}}(t.compositeFilter.op))}(n):z()}function rV(n){return QL[n]}function iV(n){return YL[n]}function oV(n){return ZL[n]}function as(n){return{fieldPath:n.canonicalString()}}function cs(n){return We.fromServerFormat(n.fieldPath)}function aS(n){return n instanceof fe?function(t){if(t.op==="=="){if(mT(t.value))return{unaryFilter:{field:as(t.field),op:"IS_NAN"}};if(gT(t.value))return{unaryFilter:{field:as(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mT(t.value))return{unaryFilter:{field:as(t.field),op:"IS_NOT_NAN"}};if(gT(t.value))return{unaryFilter:{field:as(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(t.field),op:iV(t.op),value:t.value}}}(n):n instanceof Te?function(t){let r=t.getFilters().map(i=>aS(i));return r.length===1?r[0]:{compositeFilter:{op:oV(t.op),filters:r}}}(n):z()}function sV(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Is=class n{constructor(e,t,r,i,o=Y.min(),s=Y.min(),a=Qe.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var zd=class{constructor(e){this.ct=e}};function aV(n,e){let t;if(e.document)t=nS(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=$.fromSegments(e.noDocument.path),i=Ui(e.noDocument.readTime);t=et.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return z();{let r=$.fromSegments(e.unknownDocument.path),i=Ui(e.unknownDocument.version);t=et.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new Le(i[0],i[1]);return Y.fromTimestamp(o)}(e.readTime)),t}function kT(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Gd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Rc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:ws(o,s.version.toTimestamp()),createTime:ws(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Bi(e.version)};else{if(!e.isUnknownDocument())return z();r.unknownDocument={path:t.path.toArray(),version:Bi(e.version)}}return r}function Gd(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Bi(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ui(n){let e=new Le(n.seconds,n.nanoseconds);return Y.fromTimestamp(e)}function Mi(n,e){let t=(e.baseMutations||[]).map(o=>ky(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>ky(n.ct,o)),i=Le.fromMillis(e.localWriteTimeMs);return new Sc(e.batchId,i,t,r)}function pc(n){let e=Ui(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Ui(n.lastLimboFreeSnapshotVersion):Y.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return K(o.documents.length===1),At(Ns(eS(o.documents[0])))}(n.query):function(o){return At(oS(o))}(n.query),new Is(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Qe.fromBase64String(n.resumeToken))}function uS(n,e){let t=Bi(e.snapshotVersion),r=Bi(e.lastLimboFreeSnapshotVersion),i;i=jd(e.target)?rS(n.ct,e.target):iS(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vi(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function c_(n){let e=oS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Ud(e,e.limit,"L"):e}function Km(n,e){return new Ac(e.largestBatchId,ky(n.ct,e.overlayMutation))}function OT(n,e){let t=e.path.lastSegment();return[n,St(e.path.popLast()),t]}function FT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Bi(r.readTime),documentKey:St(r.documentKey.path),largestBatchId:r.largestBatchId}}var Oy=class{getBundleMetadata(e,t){return LT(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:Ui(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return LT(e).put(function(i){return{bundleId:i.id,createTime:Bi(Ke(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return VT(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:c_(o.bundledQuery),readTime:Ui(o.readTime)}}(r)})}saveNamedQuery(e,t){return VT(e).put(function(i){return{name:i.name,readTime:Bi(Ke(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function LT(n){return it(n,"bundles")}function VT(n){return it(n,"namedQueries")}var Wd=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return uc(e).get(OT(this.userId,t)).next(r=>r?Km(this.serializer,r):null)}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ac(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(St(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(uc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=Nn(),o=St(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return uc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Km(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=Nn(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return uc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Km(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return uc(e).put(function(i,o,s){let[a,u,l]=OT(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Nc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function uc(n){return it(n,"documentOverlays")}var Fy=class{Pt(e){return it(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?Qe.fromUint8Array(r):Qe.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ir=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ke(e.integerValue));else if("doubleValue"in e){let r=ke(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Ic(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=sr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(qr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Tb(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ah(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):z()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ke(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),$.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ir.vt=new ir;function cV(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function jT(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=cV(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var Ly=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=jT(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=jT(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},Vy=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},jy=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ri=class{constructor(){this.jt=new Ly,this.Ht=new Vy(this.jt),this.Jt=new jy(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ni=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Fr(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=BT(n.arrayValue,e.arrayValue),t!==0?t:(t=BT(n.directionalValue,e.directionalValue),t!==0?t:$.comparator(n.documentKey,e.documentKey)))}function BT(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Kd=class{constructor(e){this.Xt=new Ae((t,r)=>We.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(K(e.collectionGroup===this.collectionId),this.nn)return!1;let t=sy(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ai(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ae(We.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ds(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ds(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ds(r.field,r.dir==="asc"?0:1)));return new gs(gs.UNKNOWN_ID,this.collectionId,t,wc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function lS(n){var e,t;if(K(n instanceof fe||n instanceof Te),n instanceof fe){if(n instanceof Vd){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>fe.create(n.field,"==",o)))||[];return Te.create(i,"or")}return n}let r=n.filters.map(i=>lS(i));return Te.create(r,n.op)}function uV(n){if(n.getFilters().length===0)return[];let e=$y(lS(n));return K(dS(e)),By(e)||Uy(e)?[e]:e.getFilters()}function By(n){return n instanceof fe}function Uy(n){return n instanceof Te&&r_(n)}function dS(n){return By(n)||Uy(n)||function(t){if(t instanceof Te&&py(t)){for(let r of t.getFilters())if(!By(r)&&!Uy(r))return!1;return!0}return!1}(n)}function $y(n){if(K(n instanceof fe||n instanceof Te),n instanceof fe)return n;if(n.filters.length===1)return $y(n.filters[0]);let e=n.filters.map(r=>$y(r)),t=Te.create(e,n.op);return t=Qd(t),dS(t)?t:(K(t instanceof Te),K(ys(t)),K(t.filters.length>1),t.filters.reduce((r,i)=>u_(r,i)))}function u_(n,e){let t;return K(n instanceof fe||n instanceof Te),K(e instanceof fe||e instanceof Te),t=n instanceof fe?e instanceof fe?function(i,o){return Te.create([i,o],"and")}(n,e):UT(n,e):e instanceof fe?UT(e,n):function(i,o){if(K(i.filters.length>0&&o.filters.length>0),ys(i)&&ys(o))return Mb(i,o.getFilters());let s=py(i)?i:o,a=py(i)?o:i,u=s.filters.map(l=>u_(l,a));return Te.create(u,"or")}(n,e),Qd(t)}function UT(n,e){if(ys(e))return Mb(e,n.getFilters());{let t=e.filters.map(r=>u_(n,r));return Te.create(t,"or")}}function Qd(n){if(K(n instanceof fe||n instanceof Te),n instanceof fe)return n;let e=n.getFilters();if(e.length===1)return Qd(e[0]);if(Ab(n))return n;let t=e.map(i=>Qd(i)),r=[];return t.forEach(i=>{i instanceof fe?r.push(i):i instanceof Te&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Te.create(r,n.op)}var Hy=class{constructor(){this.un=new Pc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(rn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(rn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Pc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ae(ve.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ae(ve.comparator)).toArray()}};var Id=new Uint8Array(0),qy=class{constructor(e,t){this.databaseId=t,this.cn=new Pc,this.ln=new Vn(r=>Vi(r),(r,i)=>$c(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:St(i)};return $T(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[fb(t),""],!1,!0);return $T(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(Rn(s.parent))}return r})}addFieldIndex(e,t){let r=lc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=rs(e);return o.next(a=>{s.put(FT(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=lc(e),i=rs(e),o=ns(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=lc(e),r=ns(e),i=rs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new Kd(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=ns(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=se(),a=[];return S.forEach(o,(u,l)=>{k("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(Z=>`${Z.fieldPath}:${Z.kind}`).join(",")}`}(u)} to execute ${Vi(t)}`);let h=function(F,Z){let te=sy(Z);if(te===void 0)return null;for(let J of Bd(F,te.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null}(l,u),p=function(F,Z){let te=new Map;for(let J of Ai(Z))for(let I of Bd(F,J.fieldPath))switch(I.op){case"==":case"in":te.set(J.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return te.set(J.fieldPath.canonicalString(),I.value),Array.from(te.values())}return null}(l,u),m=function(F,Z){let te=[],J=!0;for(let I of Ai(Z)){let y=I.kind===0?IT(F,I.fieldPath,F.startAt):ET(F,I.fieldPath,F.startAt);te.push(y.value),J&&(J=y.inclusive)}return new Ln(te,J)}(l,u),v=function(F,Z){let te=[],J=!0;for(let I of Ai(Z)){let y=I.kind===0?ET(F,I.fieldPath,F.endAt):IT(F,I.fieldPath,F.endAt);te.push(y.value),J&&(J=y.inclusive)}return new Ln(te,J)}(l,u),b=this.In(u,l,m),R=this.In(u,l,v),N=this.Tn(u,l,p),B=this.En(u.indexId,h,b,m.inclusive,R,v.inclusive,N);return S.forEach(B,q=>r.G(q,t.limit).next(F=>{F.forEach(Z=>{let te=$.fromSegments(Z.documentKey);s.has(te)||(s=s.add(te),a.push(te))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=uV(Te.create(e.filters,"and")).map(r=>Dy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):Id,v=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),R=a.map(N=>this.An(e,m,N,!0));h.push(...this.createRange(v,b,R))}return h}An(e,t,r,i){let o=new Ni(e,$.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new Ni(e,$.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new Kd(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Ae(We.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ri;for(let i of Ai(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);ir.vt.It(o,s)}return r.zt()}dn(e){let t=new Ri;return ir.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ri;return ir.vt.It(Fi(this.databaseId,t),r.Yt(function(o){let s=Ai(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ri);let o=0;for(let s of Ai(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&Tc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);ir.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new Ri;u.seed(a.zt()),ir.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=lc(e),i=rs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new wc(p.sequenceNumber,new rn(Ui(p.readTime),new $(Rn(p.documentKey)),p.largestBatchId)):wc.empty(),v=h.fields.map(([b,R])=>new ds(We.fromServerFormat(b),R));return new gs(h.indexId,h.collectionGroup,v,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:oe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=lc(e),o=rs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(FT(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return ns(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ns(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=ns(e),o=new Ae(Fr);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new Ni(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Ae(Fr),i=this.Vn(t,e);if(i==null)return r;let o=sy(t);if(o!=null){let s=e.data.field(o.fieldPath);if(Tc(s))for(let a of s.arrayValue.values||[])r=r.add(new Ni(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Ni(t.indexId,e.key,Id,i));return r}bn(e,t,r,i,o){k("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let v=u.getIterator(),b=l.getIterator(),R=ts(v),N=ts(b);for(;R||N;){let B=!1,q=!1;if(R&&N){let F=h(R,N);F<0?q=!0:F>0&&(B=!0)}else R!=null?q=!0:B=!0;B?(p(N),N=ts(b)):q?(m(R),R=ts(v)):(R=ts(v),N=ts(b))}}(i,o,Fr,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return rs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>Fr(s,a)).filter((s,a,u)=>!a||Fr(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=Fr(s,e),u=Fr(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Id,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Id,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return Fr(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(HT)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||z())).next(HT)}};function $T(n){return it(n,"collectionParents")}function ns(n){return it(n,"indexEntries")}function lc(n){return it(n,"indexConfiguration")}function rs(n){return it(n,"indexState")}function HT(n){K(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;Xv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new rn(e.readTime,e.documentKey,t)}var qT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},nn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function hS(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{K(a===1)}));let l=[];for(let h of t.mutations){let p=_b(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function Yd(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw z();e=n.noDocument}return JSON.stringify(e).length}nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(41943040,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var Zd=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){K(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=us(e),s=Lr(e);return s.add({}).next(a=>{K(typeof a=="number");let u=new Sc(a,t,r,i),l=function(v,b,R){let N=R.baseMutations.map(q=>Nc(v.ct,q)),B=R.mutations.map(q=>Nc(v.ct,q));return{userId:b,batchId:R.batchId,localWriteTimeMs:R.localWriteTime.toMillis(),baseMutations:N,mutations:B}}(this.serializer,this.userId,u),h=[],p=new Ae((m,v)=>oe(m.canonicalString(),v.canonicalString()));for(let m of i){let v=_b(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(v,gL))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return Lr(e).get(t).next(r=>r?(K(r.userId===this.userId),Mi(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Lr(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(K(a.batchId>=r),o=Mi(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Lr(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lr(e).U("userMutationsIndex",t).next(r=>r.map(i=>Mi(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Td(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return us(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=Rn(h);if(l===this.userId&&t.path.isEqual(m))return Lr(e).get(p).next(v=>{if(!v)throw z();K(v.userId===this.userId),o.push(Mi(this.serializer,v))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(oe),i=[];return t.forEach(o=>{let s=Td(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=us(e).J({range:a},(l,h,p)=>{let[m,v,b]=l,R=Rn(v);m===this.userId&&o.path.isEqual(R)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Td(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Ae(oe);return us(e).J({range:s},(u,l,h)=>{let[p,m,v]=u,b=Rn(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(v)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(Lr(e).get(o).next(s=>{if(s===null)throw z();K(s.userId===this.userId),r.push(Mi(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return hS(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return us(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=Rn(o[1]);i.push(u)}else a.done()}).next(()=>{K(i.length===0)})})}containsKey(e,t){return fS(e,this.userId,t)}Nn(e){return pS(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function fS(n,e,t){let r=Td(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return us(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function Lr(n){return it(n,"mutations")}function us(n){return it(n,"documentMutations")}function pS(n){return it(n,"mutationQueues")}var Es=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var zy=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Es(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Y.fromTimestamp(new Le(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>is(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(K(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return is(e).J((s,a)=>{let u=pc(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return is(e).J((r,i)=>{let o=pc(i);t(o)})}qn(e){return zT(e).get("targetGlobalKey").next(t=>(K(t!==null),t))}Qn(e,t){return zT(e).put("targetGlobalKey",t)}Kn(e,t){return is(e).put(uS(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Vi(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return is(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=pc(a);$c(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=Vr(e);return t.forEach(s=>{let a=St(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=Vr(e);return S.forEach(t,o=>{let s=St(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=Vr(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Vr(e),o=se();return i.J({range:r,H:!0},(s,a,u)=>{let l=Rn(s[1]),h=new $(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=St(t.path),i=IDBKeyRange.bound([r],[fb(r)],!1,!0),o=0;return Vr(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return is(e).get(t).next(r=>r?pc(r):null)}};function is(n){return it(n,"targets")}function zT(n){return it(n,"targetGlobal")}function Vr(n){return it(n,"targetDocuments")}function GT([n,e],[t,r]){let i=oe(n,t);return i===0?oe(e,r):i}var Gy=class{constructor(e){this.Un=e,this.buffer=new Ae(GT),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();GT(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},Wy=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){k("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>M(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xr(t)?k("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Jr(t)}yield this.Hn(3e5)}))}},Ky=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(zt.oe);let r=new Gy(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(k("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(qT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(k("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qT):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(k("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),os()<=In.DEBUG&&k("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function lV(n,e){return new Ky(n,e)}var Qy=class{constructor(e,t){this.db=e,this.garbageCollector=lV(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Ed(e,r)}removeReference(e,t,r){return Ed(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Ed(e,t)}nr(e,t){return function(i,o){let s=!1;return pS(i).Y(a=>fS(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,Y.min()),Vr(e).delete(function(p){return[0,St(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Ed(e,t)}tr(e,t){let r=Vr(e),i,o=zt.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==zt.oe&&t(new $(Rn(i)),o),o=l,i=u):o=zt.oe}).next(()=>{o!==zt.oe&&t(new $(Rn(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Ed(n,e){return Vr(n).put(function(r,i){return{targetId:0,path:St(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Jd=class{constructor(){this.changes=new Vn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,et.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Yy=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Si(e).put(r)}removeEntry(e,t,r){return Si(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Gd(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=et.newInvalidDocument(t);return Si(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(dc(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:et.newInvalidDocument(t)};return Si(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(dc(t))},(i,o)=>{r={document:this.ir(t,o),size:Yd(o)}}).next(()=>r)}getEntries(e,t){let r=Lt();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=Lt(),i=new Ne($.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,Yd(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Ae(QT);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(dc(i.first()),dc(i.last())),s=i.getIterator(),a=s.getNext();return Si(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=$.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&QT(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(dc(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),Gd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Si(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=Lt();for(let p of l){let m=this.ir($.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(qc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=Lt(),s=KT(t,r),a=KT(t,rn.max());return Si(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir($.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new Zy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return WT(e).get("remoteDocumentGlobalKey").next(t=>(K(!!t),t))}rr(e,t){return WT(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=aV(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Y.min())))return r}return et.newInvalidDocument(e)}};function gS(n){return new Yy(n)}var Zy=class extends Jd{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Vn(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ae((o,s)=>oe(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=kT(this.cr.serializer,s);i=i.add(o.path.popLast());let l=Yd(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=kT(this.cr.serializer,s.convertToNoDocument(Y.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function WT(n){return it(n,"remoteDocumentGlobal")}function Si(n){return it(n,"remoteDocumentsV14")}function dc(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function KT(n,e){let t=e.documentKey.path.toArray();return[n,Gd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function QT(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=oe(t[o],r[o]),i)return i;return i=oe(t.length,r.length),i||(i=oe(t[t.length-2],r[r.length-2]),i||oe(t[t.length-1],r[r.length-1]))}var Jy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Xd=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yc(r.mutation,i,Gt.empty(),Le.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,t,r=se()){let i=Nn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=fc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Nn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Lt(),s=mc(),a=function(){return mc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof vn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),yc(h.mutation,l,h.mutation.getFieldMask(),Le.now())):s.set(l.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new Jy(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=mc(),i=new Ne((s,a)=>s-a),o=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Gt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||se()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=jb();h.forEach(m=>{if(!o.has(m)){let v=Gb(t.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return $.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):i_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(Nn()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,se())).next(h=>({batchId:a,changes:Vb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $(t)).next(r=>{let i=fc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=fc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new yn(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,et.newInvalidDocument(h)))});let a=fc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&yc(h.mutation,l,Gt.empty(),Le.now()),qc(t,l)&&(a=a.insert(u,l))}),a})}};var Xy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Ke(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:c_(i.bundledQuery),readTime:Ke(i.readTime)}}(t)),S.resolve()}};var ev=class{constructor(){this.overlays=new Ne($.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Nn();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=Nn(),o=t.length+1,s=new $(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=Nn(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Nn(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ac(t,r));let o=this.Ir.get(t);o===void 0&&(o=se(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var tv=class{constructor(){this.sessionToken=Qe.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var kc=class{constructor(){this.Tr=new Ae(Je.Er),this.dr=new Ae(Je.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Je(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Je(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new $(new ve([])),r=new Je(t,e),i=new Je(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new $(new ve([])),r=new Je(t,e),i=new Je(t,e+1),o=se();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Je(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Je=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return $.comparator(e.key,t.key)||oe(e.wr,t.wr)}static Ar(e,t){return oe(e.wr,t.wr)||$.comparator(e.key,t.key)}};var nv=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ae(Je.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new Sc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new Je(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Je(t,0),i=new Je(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ae(oe);return t.forEach(i=>{let o=new Je(i,0),s=new Je(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;$.isDocumentKey(o)||(o=o.child(""));let s=new Je(new $(o),0),a=new Ae(oe);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){K(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new Je(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Je(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var rv=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne($.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():et.newInvalidDocument(t))}getEntries(e,t){let r=Lt();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():et.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Lt(),s=t.path,a=new $(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||Xv(gb(h),r)<=0||(i.has(h.key)||qc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){z()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new iv(this)}getSize(e){return S.resolve(this.size)}},iv=class extends Jd{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var ov=class{constructor(e){this.persistence=e,this.Nr=new Vn(t=>Vi(t),$c),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new kc,this.targetCount=0,this.kr=Es.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Es(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var eh=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zt(0),this.Kr=!1,this.Kr=!0,this.$r=new tv,this.referenceDelegate=e(this),this.Ur=new ov(this),this.indexManager=new Hy,this.remoteDocumentCache=function(i){return new rv(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zd(t),this.Gr=new Xy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ev,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new nv(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("MemoryPersistence","Starting transaction:",e);let i=new sv(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},sv=class extends Pd{constructor(e){super(),this.currentSequenceNumber=e}},th=class n{constructor(e){this.persistence=e,this.Jr=new kc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw z()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=$.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Y.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var av=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new kd("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dT,{unique:!0}),u.createObjectStore("documentMutations")}(e),YT(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),YT(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Y.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",dT,{unique:!0});let p=l.store("mutations"),m=h.map(v=>p.put(v));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:SL});l.createIndex("collectionPathOverlayIndex",AL,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",xL,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:mL});l.createIndex("documentKeyIndex",yL),l.createIndex("collectionGroupIndex",vL)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:DL}).createIndex("sequenceNumberIndex",CL,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:TL}).createIndex("documentKeyIndex",bL,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Yd(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{K(u.userId===o.userId);let l=Mi(this.serializer,u);return hS(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new ve(s),l=function(p){return[0,St(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:St(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:EL});let r=t.store("collectionParents"),i=new Pc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:St(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new ve(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=Rn(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=pc(i),s=uS(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new $(ve.fromString(p.document.name).popFirst(5)):p.noDocument?$.fromSegments(p.noDocument.path):p.unknownDocument?$.fromSegments(p.unknownDocument.path):z()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=gS(this.serializer),o=new eh(th.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:se();Mi(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new Xe(l),p=Wd.lt(this.serializer,h),m=o.getIndexManager(h),v=Zd.lt(h,this.serializer,m,o.referenceDelegate);return new Xd(i,v,p,m).recalculateAndSaveOverlaysForDocumentKeys(new Ec(t,zt.oe),u).next()})})}};function YT(n){n.createObjectStore("targetDocuments",{keyPath:wL}).createIndex("documentTargetsIndex",IL,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_L,{unique:!0}),n.createObjectStore("targetGlobal")}var Qm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",cv=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new P(x.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qy(this,i),this.Ai=t+"main",this.serializer=new zd(u),this.Ri=new Hr(this.Ai,this.hi,new av(this.serializer)),this.$r=new Fy,this.Ur=new zy(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gS(this.serializer),this.Gr=new Oy,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ge("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Qm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zt(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>M(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>M(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>M(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Xr(e))return k("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return k("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return hc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return Dd(e).delete(this.clientId)}Fi(){return M(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=it(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):hc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new P(x.FAILED_PRECONDITION,Qm);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dd(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&k("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return M(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Ec(e,zt.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Dd(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Zd.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new qy(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Wd.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){k("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?NL:u===16?RL:u===15?t_:u===14?Eb:u===13?Ib:u===12?ML:u===11?wb:void z()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new Ec(a,this.Qr?this.Qr.next():zt.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ge(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new P(x.FAILED_PRECONDITION,mb);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return hc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new P(x.FAILED_PRECONDITION,Qm)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return hc(e).put("owner",t)}static D(){return Hr.D()}bi(e){let t=hc(e);return t.get("owner").next(r=>this.vi(r)?(k("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ge(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;yf()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return k("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ge("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ge("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function hc(n){return it(n,"owner")}function Dd(n){return it(n,"clientMetadata")}function l_(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var uv=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=se(),i=se();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var lv=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var nh=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return yf()?8:yb(sa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new lv;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(os()<=In.DEBUG&&k("QueryEngine","SDK will not create cache indexes for query:",ss(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(os()<=In.DEBUG&&k("QueryEngine","Query:",ss(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(os()<=In.DEBUG&&k("QueryEngine","The SDK decides to create cache indexes for query:",ss(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,At(t))):S.resolve())}Yi(e,t){if(DT(t))return S.resolve(null);let r=At(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Ud(t,null,"F"),r=At(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=se(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,Ud(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return DT(t)||i.isEqual(Y.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(os()<=In.DEBUG&&k("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ss(t)),this.rs(e,s,t,pb(i,-1)).next(a=>a))})}ts(e,t){let r=new Ae(Fb(e));return t.forEach((i,o)=>{qc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return os()<=In.DEBUG&&k("QueryEngine","Using full collection scan to execute query:",ss(t)),this.Ji.getDocumentsMatchingQuery(e,t,rn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var dv=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(oe),this._s=new Vn(o=>Vi(o),$c),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xd(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function mS(n,e,t,r){return new dv(n,e,t,r)}function yS(n,e){return M(this,null,function*(){let t=U(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=se();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function dV(n,e){let t=U(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=S.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(u,b)).next(R=>{let N=l.docVersions.get(b);K(N!==null),R.version.compareTo(N)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function vS(n){let e=U(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function hV(n,e){let t=U(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Qe.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(R,N,B){return R.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0}(m,v,h)&&a.push(t.Ur.updateTargetData(o,v))});let u=Lt(),l=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(_S(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(Y.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function _S(n,e,t){let r=se(),i=se();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Lt();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):k("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function fV(n,e){let t=U(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ds(n,e){let t=U(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new Is(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Cs(n,e,t){return M(this,null,function*(){let r=U(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Xr(s))throw s;k("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function rh(n,e,t){let r=U(n),i=Y.min(),o=se();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=U(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,At(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:Y.min(),t?o:se())).next(a=>(ES(r,Ob(e),a),{documents:a,Ts:o})))}function wS(n,e){let t=U(n),r=U(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function IS(n,e){let t=U(n),r=t.us.get(e)||Y.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,pb(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(ES(t,e,i),i))}function ES(n,e,t){let r=n.us.get(e)||Y.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function pV(n,e,t,r){return M(this,null,function*(){let i=U(n),o=se(),s=Lt();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield Ds(i,function(h){return At(Ns(ve.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>_S(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function gV(r,i){return M(this,arguments,function*(n,e,t=se()){let o=yield Ds(n,At(c_(e.bundledQuery))),s=U(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Ke(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(Qe.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function ZT(n,e){return`firestore_clients_${n}_${e}`}function JT(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Ym(n,e){return`firestore_targets_${n}_${e}`}var ih=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new P(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ge("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},vc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new P(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ge("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},oh=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=o_();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=vb(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ge("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},hv=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ge("SharedClientState",`Failed to parse online state: ${e}`),null)}},Oc=class{constructor(){this.activeTargetIds=o_()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},_c=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ne(oe),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=ZT(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Oc),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return M(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(ZT(this.persistenceKey,r));if(i){let o=oh.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Ym(this.persistenceKey,e));if(i){let o=vc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ym(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return k("SharedClientState","READ",e,t),t}setItem(e,t){k("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){k("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(k("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ge("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>M(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=zt.oe;if(o!=null)try{let a=JSON.parse(o);K(typeof a=="number"),s=a}catch(a){Ge("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==zt.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new ih(this.currentUser,e,t,r),o=JT(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=JT(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Ym(this.persistenceKey,e),o=new vc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return oh.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return ih.Rs(new Xe(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return vc.Rs(i,t)}Ls(e){return hv.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return M(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);k("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=o_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},sh=class{constructor(){this.so=new Oc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Oc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var fv=class{_o(e){}shutdown(){}};var ah=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){k("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){k("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cd=null;function Zm(){return Cd===null?Cd=function(){return 268435456+Math.round(2147483648*Math.random())}():Cd++,"0x"+Cd.toString(16)}var mV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var pv=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",gv=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Zm(),u=this.xo(t,r.toUriEncodedString());k("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(k("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw mn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rs}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=mV[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Zm();return new Promise((s,a)=>{let u=new Hm;u.setWithCredentials(!0),u.listenOnce(qm.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case cc.NO_ERROR:let h=u.getResponseJson();k(yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case cc.TIMEOUT:k(yt,`RPC '${e}' ${o} timed out`),a(new P(x.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:let p=u.getStatus();if(k(yt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(N){let B=N.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(B)>=0?B:x.UNKNOWN}(v.status);a(new P(b,v.message))}else a(new P(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new P(x.UNAVAILABLE,"Connection failed."));break;default:z()}}finally{k(yt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);k(yt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Zm(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Wm(),a=Gm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");k(yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,v=!1,b=new pv({Io:N=>{v?k(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(k(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),k(yt,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),R=(N,B,q)=>{N.listen(B,F=>{try{q(F)}catch(Z){setTimeout(()=>{throw Z},0)}})};return R(p,es.EventType.OPEN,()=>{v||(k(yt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),R(p,es.EventType.CLOSE,()=>{v||(v=!0,k(yt,`RPC '${e}' stream ${i} transport closed`),b.So())}),R(p,es.EventType.ERROR,N=>{v||(v=!0,mn(yt,`RPC '${e}' stream ${i} transport errored:`,N),b.So(new P(x.UNAVAILABLE,"The operation could not be completed")))}),R(p,es.EventType.MESSAGE,N=>{var B;if(!v){let q=N.data[0];K(!!q);let F=q,Z=F.error||((B=F[0])===null||B===void 0?void 0:B.error);if(Z){k(yt,`RPC '${e}' stream ${i} received error:`,Z);let te=Z.status,J=function(w){let E=Ze[w];if(E!==void 0)return Qb(E)}(te),I=Z.message;J===void 0&&(J=x.INTERNAL,I="Unknown error status: "+te+" with message "+Z.message),v=!0,b.So(new P(J,I)),p.close()}else k(yt,`RPC '${e}' stream ${i} received:`,q),b.bo(q)}}),R(a,zm.STAT_EVENT,N=>{N.stat===wd.PROXY?k(yt,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===wd.NOPROXY&&k(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function DS(){return typeof window<"u"?window:null}function xd(){return typeof document<"u"?document:null}function zc(n){return new My(n,!0)}var Fc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&k("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var ch=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Fc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return M(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return M(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return M(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===x.RESOURCE_EXHAUSTED?(Ge(t.toString()),Ge("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new P(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>M(this,null,function*(){this.state=0,this.start()}))}I_(e){return k("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(k("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},mv=class extends ch{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=eV(this.serializer,e),r=function(o){if(!("targetChange"in o))return Y.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Y.min():s.readTime?Ke(s.readTime):Y.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Py(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=jd(u)?{documents:rS(o,u)}:{query:iS(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=Zb(o,s.resumeToken);let l=Ry(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Y.min())>0){a.readTime=ws(o,s.snapshotVersion.toTimestamp());let l=Ry(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=nV(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Py(this.serializer),t.removeTarget=e,this.a_(t)}},yv=class extends ch{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return K(!!e.streamToken),this.lastStreamToken=e.streamToken,K(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){K(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=tV(e.writeResults,e.commitTime),r=Ke(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Py(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Nc(this.serializer,r))};this.a_(t)}};var vv=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,Ny(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new P(x.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,Ny(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new P(x.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},_v=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ge(t),this.D_=!1):k("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var wv=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>M(this,null,function*(){ei(this)&&(k("RemoteStore","Restarting streams for network reachability change."),yield function(u){return M(this,null,function*(){let l=U(u);l.L_.add(4),yield Ps(l),l.q_.set("Unknown"),l.L_.delete(4),yield Gc(l)})}(this))}))}),this.q_=new _v(r,i)}};function Gc(n){return M(this,null,function*(){if(ei(n))for(let e of n.B_)yield e(!0)})}function Ps(n){return M(this,null,function*(){for(let e of n.B_)yield e(!1)})}function xh(n,e){let t=U(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),f_(t)?h_(t):Os(t).r_()&&d_(t,e))}function Ts(n,e){let t=U(n),r=Os(t);t.N_.delete(e),r.r_()&&CS(t,e),t.N_.size===0&&(r.r_()?r.o_():ei(t)&&t.q_.set("Unknown"))}function d_(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Os(n).A_(e)}function CS(n,e){n.Q_.xe(e),Os(n).R_(e)}function h_(n){n.Q_=new xy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Os(n).start(),n.q_.v_()}function f_(n){return ei(n)&&!Os(n).n_()&&n.N_.size>0}function ei(n){return U(n).L_.size===0}function TS(n){n.Q_=void 0}function yV(n){return M(this,null,function*(){n.q_.set("Online")})}function vV(n){return M(this,null,function*(){n.N_.forEach((e,t)=>{d_(n,e)})})}function _V(n,e){return M(this,null,function*(){TS(n),f_(n)?(n.q_.M_(e),h_(n)):n.q_.set("Unknown")})}function wV(n,e,t){return M(this,null,function*(){if(n.q_.set("Online"),e instanceof Hd&&e.state===2&&e.cause)try{yield function(i,o){return M(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){k("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uh(n,r)}else if(e instanceof fs?n.Q_.Ke(e):e instanceof $d?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Y.min()))try{let r=yield vS(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(Qe.EMPTY_BYTE_STRING,h.snapshotVersion)),CS(o,u);let p=new Is(h.target,u,l,h.sequenceNumber);d_(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){k("RemoteStore","Failed to raise snapshot:",r),yield uh(n,r)}})}function uh(n,e,t){return M(this,null,function*(){if(!Xr(e))throw e;n.L_.add(1),yield Ps(n),n.q_.set("Offline"),t||(t=()=>vS(n.localStore)),n.asyncQueue.enqueueRetryable(()=>M(this,null,function*(){k("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Gc(n)}))})}function bS(n,e){return e().catch(t=>uh(n,t,e))}function ks(n){return M(this,null,function*(){let e=U(n),t=Zr(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;IV(e);)try{let i=yield fV(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,EV(e,i)}catch(i){yield uh(e,i)}SS(e)&&AS(e)})}function IV(n){return ei(n)&&n.O_.length<10}function EV(n,e){n.O_.push(e);let t=Zr(n);t.r_()&&t.V_&&t.m_(e.mutations)}function SS(n){return ei(n)&&!Zr(n).n_()&&n.O_.length>0}function AS(n){Zr(n).start()}function DV(n){return M(this,null,function*(){Zr(n).p_()})}function CV(n){return M(this,null,function*(){let e=Zr(n);for(let t of n.O_)e.m_(t.mutations)})}function TV(n,e,t){return M(this,null,function*(){let r=n.O_.shift(),i=by.from(r,e,t);yield bS(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ks(n)})}function bV(n,e){return M(this,null,function*(){e&&Zr(n).V_&&(yield function(r,i){return M(this,null,function*(){if(function(s){return Kb(s)&&s!==x.ABORTED}(i.code)){let o=r.O_.shift();Zr(r).s_(),yield bS(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield ks(r)}})}(n,e)),SS(n)&&AS(n)})}function XT(n,e){return M(this,null,function*(){let t=U(n);t.asyncQueue.verifyOperationInProgress(),k("RemoteStore","RemoteStore received new credentials");let r=ei(t);t.L_.add(3),yield Ps(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Gc(t)})}function Iv(n,e){return M(this,null,function*(){let t=U(n);e?(t.L_.delete(2),yield Gc(t)):e||(t.L_.add(2),yield Ps(t),t.q_.set("Unknown"))})}function Os(n){return n.K_||(n.K_=function(t,r,i){let o=U(t);return o.w_(),new mv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:yV.bind(null,n),Ro:vV.bind(null,n),mo:_V.bind(null,n),d_:wV.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.K_.s_(),f_(n)?h_(n):n.q_.set("Unknown")):(yield n.K_.stop(),TS(n))}))),n.K_}function Zr(n){return n.U_||(n.U_=function(t,r,i){let o=U(t);return o.w_(),new yv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:DV.bind(null,n),mo:bV.bind(null,n),f_:CV.bind(null,n),g_:TV.bind(null,n)}),n.B_.push(e=>M(this,null,function*(){e?(n.U_.s_(),yield ks(n)):(yield n.U_.stop(),n.O_.length>0&&(k("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Ev=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new rt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new P(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Fs(n,e){if(Ge("AsyncQueue",`${e}: ${n}`),Xr(n))return new P(x.UNAVAILABLE,`${e}: ${n}`);throw n}var lh=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$.comparator(t.key,r.key):(t,r)=>$.comparator(t.key,r.key),this.keyedMap=fc(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var dh=class{constructor(){this.W_=new Ne($.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):z():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},bs=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,lh.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Dv=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Cv=class{constructor(){this.queries=eb(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=U(t),o=i.queries;i.queries=eb(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new P(x.ABORTED,"Firestore shutting down"))}};function eb(){return new Vn(n=>kb(n),Hc)}function p_(n,e){return M(this,null,function*(){let t=U(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new Dv,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Fs(s,`Initialization of query '${ss(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&m_(t)})}function g_(n,e){return M(this,null,function*(){let t=U(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function SV(n,e){let t=U(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&m_(t)}function AV(n,e,t){let r=U(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function m_(n){n.Y_.forEach(e=>{e.next()})}var Tv,tb;(tb=Tv||(Tv={})).ea="default",tb.Cache="cache";var Lc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Tv.Cache}};var bv=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var hh=class{constructor(e){this.serializer=e}Es(e){return kn(this.serializer,e)}ds(e){return e.metadata.exists?nS(this.serializer,e.document,!1):et.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Ke(e)}},Sv=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xS(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new hh(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||se()).add(o);t.set(s,a)}}return t}complete(){return M(this,null,function*(){let e=yield pV(this.localStore,new hh(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield gV(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function xS(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var fh=class{constructor(e){this.key=e}},ph=class{constructor(e){this.key=e}},gh=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=Fb(e),this.Ra=new lh(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new dh,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=qc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?b!==R&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(u&&this.Aa(v,u)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(u||l)&&(a=!0)),N&&(v?(s=s.add(v),o=R?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(v,b){let R=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return z()}};return R(v)-R(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new bs(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new dh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ph(r))}),this.da.forEach(r=>{e.has(r)||t.push(new fh(r))}),t}ba(e){this.Ta=e.Ts,this.da=se();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return bs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Av=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},xv=class{constructor(e){this.key=e,this.va=!1}},Mv=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new Vn(a=>kb(a),Hc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne($.comparator),this.Na=new Map,this.La=new kc,this.Ba={},this.ka=new Map,this.qa=Es.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function xV(n,e,t=!0){return M(this,null,function*(){let r=Mh(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield MS(r,e,t,!0),i})}function MV(n,e){return M(this,null,function*(){let t=Mh(n);yield MS(t,e,!0,!1)})}function MS(n,e,t,r){return M(this,null,function*(){let i=yield Ds(n.localStore,At(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield y_(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&xh(n.remoteStore,i),a})}function y_(n,e,t,r,i){return M(this,null,function*(){n.Ka=(p,m,v)=>function(R,N,B,q){return M(this,null,function*(){let F=N.view.ma(B);F.ns&&(F=yield rh(R.localStore,N.query,!1).then(({documents:I})=>N.view.ma(I,F)));let Z=q&&q.targetChanges.get(N.targetId),te=q&&q.targetMismatches.get(N.targetId)!=null,J=N.view.applyChanges(F,R.isPrimaryClient,Z,te);return Rv(R,N.targetId,J.wa),J.snapshot})}(n,p,m,v);let o=yield rh(n.localStore,e,!0),s=new gh(e,o.Ts),a=s.ma(o.documents),u=Mc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);Rv(n,t,l.wa);let h=new Av(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function RV(n,e,t){return M(this,null,function*(){let r=U(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Hc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Cs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ts(r.remoteStore,i.targetId),Ss(r,i.targetId)}).catch(Jr))):(Ss(r,i.targetId),yield Cs(r.localStore,i.targetId,!0))})}function NV(n,e){return M(this,null,function*(){let t=U(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ts(t.remoteStore,r.targetId))})}function PV(n,e,t){return M(this,null,function*(){let r=I_(n);try{let i=yield function(s,a){let u=U(s),l=Le.now(),h=a.reduce((v,b)=>v.add(b.key),se()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Lt(),R=se();return u.cs.getEntries(v,h).next(N=>{b=N,b.forEach((B,q)=>{q.isValidDocument()||(R=R.add(B))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,b)).next(N=>{p=N;let B=[];for(let q of a){let F=WL(q,p.get(q.key).overlayedDocument);F!=null&&B.push(new vn(q.key,F,Sb(F.value.mapValue),He.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,B,a)}).next(N=>{m=N;let B=N.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(v,N.batchId,B)})}).then(()=>({batchId:m.batchId,changes:Vb(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ne(oe)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield dr(r,i.changes),yield ks(r.remoteStore)}catch(i){let o=Fs(i,"Failed to persist write");t.reject(o)}})}function RS(n,e){return M(this,null,function*(){let t=U(n);try{let r=yield hV(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(K(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?K(s.va):i.removedDocuments.size>0&&(K(s.va),s.va=!1))}),yield dr(t,r,e)}catch(r){yield Jr(r)}})}function nb(n,e,t){let r=U(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=U(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&m_(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kV(n,e,t){return M(this,null,function*(){let r=U(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ne($.comparator);s=s.insert(o,et.newNoDocument(o,Y.min()));let a=se().add(o),u=new xc(Y.min(),new Map,new Ne(oe),s,a);yield RS(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),w_(r)}else yield Cs(r.localStore,e,!1).then(()=>Ss(r,e,t)).catch(Jr)})}function OV(n,e){return M(this,null,function*(){let t=U(n),r=e.batch.batchId;try{let i=yield dV(t.localStore,e);__(t,r,null),v_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield dr(t,i)}catch(i){yield Jr(i)}})}function FV(n,e,t){return M(this,null,function*(){let r=U(n);try{let i=yield function(s,a){let u=U(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(K(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);__(r,e,t),v_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield dr(r,i)}catch(i){yield Jr(i)}})}function LV(n,e){return M(this,null,function*(){let t=U(n);ei(t.remoteStore)||k("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=U(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Fs(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function v_(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function __(n,e,t){let r=U(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ss(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||NS(n,r)})}function NS(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ts(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),w_(n))}function Rv(n,e,t){for(let r of t)r instanceof fh?(n.La.addReference(r.key,e),VV(n,r)):r instanceof ph?(k("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||NS(n,r.key)):z()}function VV(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(k("SyncEngine","New document in limbo: "+t),n.xa.add(r),w_(n))}function w_(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new $(ve.fromString(e)),r=n.qa.next();n.Na.set(r,new xv(t)),n.Oa=n.Oa.insert(t,r),xh(n.remoteStore,new Is(At(Ns(t.path)),r,"TargetPurposeLimboResolution",zt.oe))}}function dr(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=uv.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return M(this,null,function*(){let h=U(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>S.forEach(m.Ui,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Xr(p))throw p;k("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.os.get(m),b=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,R)}}})}(r.localStore,o))})}function jV(n,e){return M(this,null,function*(){let t=U(n);if(!t.currentUser.isEqual(e)){k("SyncEngine","User change. New user:",e.toKey());let r=yield yS(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new P(x.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield dr(t,r.hs)}})}function BV(n,e){let t=U(n),r=t.Na.get(e);if(r&&r.va)return se().add(r.key);{let i=se(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function UV(n,e){return M(this,null,function*(){let t=U(n),r=yield rh(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&Rv(t,e.targetId,i.wa),i})}function $V(n,e){return M(this,null,function*(){let t=U(n);return IS(t.localStore,e).then(r=>dr(t,r))})}function HV(n,e,t,r){return M(this,null,function*(){let i=U(n),o=yield function(a,u){let l=U(a),h=U(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield ks(i.remoteStore):t==="acknowledged"||t==="rejected"?(__(i,e,r||null),v_(i,e),function(a,u){U(U(a).mutationQueue).On(u)}(i.localStore,e)):z(),yield dr(i,o)):k("SyncEngine","Cannot apply mutation batch with id: "+e)})}function qV(n,e){return M(this,null,function*(){let t=U(n);if(Mh(t),I_(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield rb(t,r.toArray());t.Qa=!0,yield Iv(t.remoteStore,!0);for(let o of i)xh(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(Ss(t,s),Cs(t.localStore,s,!0))),Ts(t.remoteStore,s)}),yield i,yield rb(t,r),function(s){let a=U(s);a.Na.forEach((u,l)=>{Ts(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ne($.comparator)}(t),t.Qa=!1,yield Iv(t.remoteStore,!1)}})}function rb(n,e,t){return M(this,null,function*(){let r=U(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield Ds(r.localStore,At(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield UV(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield wS(r.localStore,s);a=yield Ds(r.localStore,l),yield y_(r,PS(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function PS(n){return Pb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zV(n){return function(t){return U(U(t).persistence).Qi()}(U(n).localStore)}function GV(n,e,t,r){return M(this,null,function*(){let i=U(n);if(i.Qa)return void k("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield IS(i.localStore,Ob(o[0])),a=xc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Qe.EMPTY_BYTE_STRING);yield dr(i,s,a);break}case"rejected":yield Cs(i.localStore,e,!0),Ss(i,e,r);break;default:z()}})}function WV(n,e,t){return M(this,null,function*(){let r=Mh(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){k("SyncEngine","Adding an already active target "+i);continue}let o=yield wS(r.localStore,i),s=yield Ds(r.localStore,o);yield y_(r,PS(o),s.targetId,!1,s.resumeToken),xh(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield Cs(r.localStore,i,!1).then(()=>{Ts(r.remoteStore,i),Ss(r,i)}).catch(Jr))}})}function Mh(n){let e=U(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kV.bind(null,e),e.Ca.d_=SV.bind(null,e.eventManager),e.Ca.$a=AV.bind(null,e.eventManager),e}function I_(n){let e=U(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FV.bind(null,e),e}function KV(n,e,t){let r=U(n);(function(o,s,a){return M(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(v,b){let R=U(v),N=Ke(b.createTime);return R.persistence.runTransaction("hasNewerBundle","readonly",B=>R.Gr.getBundleMetadata(B,b.id)).then(B=>!!B&&B.createTime.compareTo(N)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(v){return{taskState:"Success",documentsLoaded:v.totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(xS(u));let l=new Sv(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield dr(o,p.Ia,void 0),yield function(v,b){let R=U(v);return R.persistence.runTransaction("Save bundle","readwrite",N=>R.Gr.saveBundleMetadata(N,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return mn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var Nv=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return M(this,null,function*(){this.serializer=zc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return mS(this.persistence,new nh,t.initialUser,this.serializer)}Ga(t){return new eh(th.Zr,this.serializer)}Wa(t){return new sh}terminate(){return M(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var mh=class n extends Nv{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return M(this,null,function*(){yield gf(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield I_(this.Ja.syncEngine),yield ks(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return mS(this.persistence,new nh,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new Wy(r,e.asyncQueue,t)}Ha(e,t){let r=new ly(t,this.persistence);return new uy(e.asyncQueue,r)}Ga(e){let t=l_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new cv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DS(),xd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new sh}},Pv=class n extends mh{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return M(this,null,function*(){yield gf(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof _c&&(this.sharedClientState.syncEngine={no:HV.bind(null,t),ro:GV.bind(null,t),io:WV.bind(null,t),Qi:zV.bind(null,t),eo:$V.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>M(this,null,function*(){yield qV(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=DS();if(!_c.D(t))throw new P(x.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=l_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _c(t,e.asyncQueue,r,e.clientId,e.initialUser)}},E_=(()=>{class n{initialize(t,r){return M(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>nb(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=jV.bind(null,this.syncEngine),yield Iv(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Cv}()}createDatastore(t){let r=zc(t.databaseInfo.databaseId),i=function(s){return new gv(s)}(t.databaseInfo);return function(s,a,u,l){return new vv(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new wv(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>nb(this.syncEngine,r,0),function(){return ah.D()?new ah:new fv}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new Mv(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return M(this,null,function*(){var t,r;yield function(o){return M(this,null,function*(){let s=U(o);k("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Ps(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function ib(n,e=10240){let t=0;return{read(){return M(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return M(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var As=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ge("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var kv=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new rt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return M(this,null,function*(){return this.metadata.promise})}Ua(){return M(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return M(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new bv(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return M(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return M(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return M(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var Ov=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new P(x.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return M(this,null,function*(){let s=U(i),a={documents:o.map(p=>Rc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,ve.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=XL(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());K(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return M(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=$.fromPath(r);this.mutations.push(new bc(i,this.precondition(i)))}),yield function(r,i){return M(this,null,function*(){let o=U(r),s={writes:i.map(a=>Nc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,ve.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw z();t=Y.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new P(x.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Y.min())?He.exists(!1):He.updateTime(t):He.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Y.min()))throw new P(x.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return He.updateTime(t)}return He.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Fv=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Fc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>M(this,null,function*(){let e=new Ov(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Uc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!Kb(t)}return!1}};var Lv=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xe.UNAUTHENTICATED,this.clientId=Rd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>M(this,null,function*(){k("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(k("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new rt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Fs(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Jm(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),k("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>M(this,null,function*(){r.isEqual(i)||(yield yS(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ob(n,e){return M(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield D_(n);k("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>XT(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>XT(e.remoteStore,i)),n._onlineComponents=e})}function D_(n){return M(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){k("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Jm(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;mn("Error using user provided cache. Falling back to memory cache: "+t),yield Jm(n,new Nv)}}else k("FirestoreClient","Using default OfflineComponentProvider"),yield Jm(n,new Nv);return n._offlineComponents})}function Rh(n){return M(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(k("FirestoreClient","Using user provided OnlineComponentProvider"),yield ob(n,n._uninitializedComponentsProvider._online)):(k("FirestoreClient","Using default OnlineComponentProvider"),yield ob(n,new E_))),n._onlineComponents})}function kS(n){return D_(n).then(e=>e.persistence)}function C_(n){return D_(n).then(e=>e.localStore)}function OS(n){return Rh(n).then(e=>e.remoteStore)}function T_(n){return Rh(n).then(e=>e.syncEngine)}function QV(n){return Rh(n).then(e=>e.datastore)}function xs(n){return M(this,null,function*(){let e=yield Rh(n),t=e.eventManager;return t.onListen=xV.bind(null,e.syncEngine),t.onUnlisten=RV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=MV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=NV.bind(null,e.syncEngine),t})}function YV(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield kS(n),t=yield OS(n);return e.setNetworkEnabled(!0),function(i){let o=U(i);return o.L_.delete(0),Gc(o)}(t)}))}function ZV(n){return n.asyncQueue.enqueue(()=>M(this,null,function*(){let e=yield kS(n),t=yield OS(n);return e.setNetworkEnabled(!1),function(i){return M(this,null,function*(){let o=U(i);o.L_.add(0),yield Ps(o),o.q_.set("Offline")})}(t)}))}function JV(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield function(l,h){let p=U(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new P(x.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Fs(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield C_(n),e,t)})),t.promise}function FS(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new As({next:m=>{h.Za(),s.enqueueAndForget(()=>g_(o,p));let v=m.docs.has(a);!v&&m.fromCache?l.reject(new P(x.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Lc(Ns(a.path),h,{includeMetadataChanges:!0,_a:!0});return p_(o,p)}(yield xs(n),n.asyncQueue,e,t,r)})),r.promise}function XV(n,e){let t=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o,s){return M(this,null,function*(){try{let a=yield rh(i,o,!0),u=new gh(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Fs(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield C_(n),e,t)})),t.promise}function LS(n,e,t={}){let r=new rt;return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(o,s,a,u,l){let h=new As({next:m=>{h.Za(),s.enqueueAndForget(()=>g_(o,p)),m.fromCache&&u.source==="server"?l.reject(new P(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new Lc(a,h,{includeMetadataChanges:!0,_a:!0});return p_(o,p)}(yield xs(n),n.asyncQueue,e,t,r)})),r.promise}function e2(n,e){let t=new As(e);return n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.add(o),o.next()}(yield xs(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return function(i,o){U(i).Y_.delete(o)}(yield xs(n),t)}))}}function t2(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?Yb().encode(s):s,function(h,p){return new kv(h,p)}(function(h,p){if(h instanceof Uint8Array)return ib(h,p);if(h instanceof ArrayBuffer)return ib(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,zc(e));n.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){KV(yield T_(n),i,r)}))}function n2(n,e){return n.asyncQueue.enqueue(()=>M(this,null,function*(){return function(r,i){let o=U(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield C_(n),e)}))}function VS(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var sb=new Map;function b_(n,e,t){if(!t)throw new P(x.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function S_(n,e,t,r){if(e===!0&&r===!0)throw new P(x.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function ab(n){if(!$.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cb(n){if($.isDocumentKey(n))throw new P(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":z()}function _e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new P(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Nh(n);throw new P(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jS(n,e){if(e<=0)throw new P(x.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var yh=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new P(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new P(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new P(x.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},$i=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new P(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yh(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Xm;switch(r.type){case"firstParty":return new ry(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new P(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return M(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=sb.get(t);r&&(k("ComponentProvider","Removing Datastore"),sb.delete(t),r.terminate())}(this),Promise.resolve()}};function BS(n,e,t,r={}){var i;let o=(n=_e(n,$i))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&mn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Xe.MOCK_USER;else{a=eI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new P(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Xe(l)}n._authCredentials=new ey(new Md(a,u))}}var lt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Me=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new On(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},On=class n extends lt{constructor(e,t,r){super(e,t,Ns(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Me(this.firestore,null,new $(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function A_(n,e,...t){if(n=Oe(n),b_("collection","path",e),n instanceof $i){let r=ve.fromString(e,...t);return cb(r),new On(n,null,r)}{if(!(n instanceof Me||n instanceof On))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return cb(r),new On(n.firestore,null,r)}}function US(n,e){if(n=_e(n,$i),b_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new P(x.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new lt(n,null,function(r){return new yn(ve.emptyPath(),r)}(e))}function Wc(n,e,...t){if(n=Oe(n),arguments.length===1&&(e=Rd.newId()),b_("doc","path",e),n instanceof $i){let r=ve.fromString(e,...t);return ab(r),new Me(n,null,new $(r))}{if(!(n instanceof Me||n instanceof On))throw new P(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ve.fromString(e,...t));return ab(r),new Me(n.firestore,n instanceof On?n.converter:null,new $(r))}}function x_(n,e){return n=Oe(n),e=Oe(e),(n instanceof Me||n instanceof On)&&(e instanceof Me||e instanceof On)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function M_(n,e){return n=Oe(n),e=Oe(e),n instanceof lt&&e instanceof lt&&n.firestore===e.firestore&&Hc(n._query,e._query)&&n.converter===e.converter}var vh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Fc(this,"async_queue_retry"),this.Vu=()=>{let r=xd();r&&k("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=xd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=xd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new rt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return M(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xr(e))throw e;k("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ge("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Ev.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&z()}verifyOperationInProgress(){}wu(){return M(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function Vv(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var jv=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new rt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var $S=-1,Ve=class extends $i{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new vh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return M(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new vh(e),this._firestoreClient=void 0,yield e}})}};function dt(n){if(n._terminated)throw new P(x.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HS(n),n._firestoreClient}function HS(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new dy(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,VS(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Lv(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function qS(n,e){mn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return GS(n,E_.provider,{build:r=>new mh(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function zS(n){return M(this,null,function*(){mn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();GS(n,E_.provider,{build:t=>new Pv(t,e.cacheSizeBytes)})})}function GS(n,e,t){if((n=_e(n,Ve))._firestoreClient||n._terminated)throw new P(x.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new P(x.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},HS(n)}function WS(n){if(n._initialized&&!n._terminated)throw new P(x.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new rt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>M(this,null,function*(){try{yield function(r){return M(this,null,function*(){if(!Hr.D())return Promise.resolve();let i=r+"main";yield Hr.delete(i)})}(l_(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function KS(n){return function(t){let r=new rt;return t.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return LV(yield T_(t),r)})),r.promise}(dt(n=_e(n,Ve)))}function QS(n){return YV(dt(n=_e(n,Ve)))}function YS(n){return ZV(dt(n=_e(n,Ve)))}function ZS(n,e){let t=dt(n=_e(n,Ve)),r=new jv;return t2(t,n._databaseId,e,r),r}function JS(n,e){return n2(dt(n=_e(n,Ve)),e).then(t=>t?new lt(n,null,t.query):null)}var jn=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Qe.fromBase64String(e))}catch(t){throw new P(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Qe.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _n=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new P(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new We(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ur=class{constructor(e){this._methodName=e}};var Hi=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new P(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new P(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var Vc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var r2=/^__.*__$/,Bv=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new vn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qr(e,this.data,t,this.fieldTransforms)}},_h=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new vn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function XS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw z()}}var wh=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ih(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(XS(this.Cu)&&r2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Uv=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zc(e)}Qu(e,t,r,i=!1){return new wh({Cu:e,methodName:t,qu:r,path:We.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Wi(n){let e=n._freezeSettings(),t=zc(n._databaseId);return new Uv(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ph(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);P_("Data must be an object, but it was:",s,r);let a=nA(r,s),u,l;if(o.merge)u=new Gt(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Gv(e,p,t);if(!s.contains(m))throw new P(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);iA(h,m)||h.push(m)}u=new Gt(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Bv(new vt(a),u,l)}var jc=class n extends ur{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function eA(n,e,t){return new wh({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var $v=class n extends ur{_toFieldTransform(e){return new ji(e.path,new Wr)}isEqual(e){return e instanceof n}},Hv=class n extends ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=eA(this,e,!0),r=this.Ku.map(o=>Ki(o,t)),i=new ar(r);return new ji(e.path,i)}isEqual(e){return e instanceof n&&vf(this.Ku,e.Ku)}},qv=class n extends ur{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=eA(this,e,!0),r=this.Ku.map(o=>Ki(o,t)),i=new cr(r);return new ji(e.path,i)}isEqual(e){return e instanceof n&&vf(this.Ku,e.Ku)}},zv=class n extends ur{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Kr(e.serializer,Ub(e.serializer,this.$u));return new ji(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function R_(n,e,t,r){let i=n.Qu(1,e,t);P_("Data must be an object, but it was:",i,r);let o=[],s=vt.empty();Gi(r,(u,l)=>{let h=k_(e,u,t);l=Oe(l);let p=i.Nu(h);if(l instanceof jc)o.push(h);else{let m=Ki(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new Gt(o);return new _h(s,a,i.fieldTransforms)}function N_(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Gv(e,r,t)],u=[i];if(o.length%2!=0)throw new P(x.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Gv(e,o[m])),u.push(o[m+1]);let l=[],h=vt.empty();for(let m=a.length-1;m>=0;--m)if(!iA(l,a[m])){let v=a[m],b=u[m];b=Oe(b);let R=s.Nu(v);if(b instanceof jc)l.push(v);else{let N=Ki(b,R);N!=null&&(l.push(v),h.set(v,N))}}let p=new Gt(l);return new _h(h,p,s.fieldTransforms)}function tA(n,e,t,r=!1){return Ki(t,n.Qu(r?4:3,e))}function Ki(n,e){if(rA(n=Oe(n)))return P_("Unsupported field value:",e,n),nA(n,e);if(n instanceof ur)return function(r,i){if(!XS(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=Ki(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Oe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ub(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Le.fromDate(r);return{timestampValue:ws(i.serializer,o)}}if(r instanceof Le){let o=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ws(i.serializer,o)}}if(r instanceof Hi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:Zb(i.serializer,r._byteString)};if(r instanceof Me){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:a_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return s_(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Nh(r)}`)}(n,e)}function nA(n,e){let t={};return Db(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(n,(r,i)=>{let o=Ki(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function rA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Le||n instanceof Hi||n instanceof jn||n instanceof Me||n instanceof ur||n instanceof Vc)}function P_(n,e,t){if(!rA(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Nh(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Gv(n,e,t){if((e=Oe(e))instanceof _n)return e._internalPath;if(typeof e=="string")return k_(n,e);throw Ih("Field path arguments must be of type string or ",n,!1,void 0,t)}var i2=new RegExp("[~\\*/\\[\\]]");function k_(n,e,t){if(e.search(i2)>=0)throw Ih(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _n(...e.split("."))._internalPath}catch{throw Ih(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ih(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new P(x.INVALID_ARGUMENT,a+n+u)}function iA(n,e){return n.some(t=>t.isEqual(e))}var qi=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Me(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Wv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(kh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Wv=class extends qi{data(){return super.data()}};function kh(n,e){return typeof e=="string"?k_(n,e):e instanceof _n?e._internalPath:e._delegate._internalPath}function oA(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new P(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bc=class{},zi=class extends Bc{};function hr(n,e,...t){let r=[];e instanceof Bc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Kv).length,a=o.filter(u=>u instanceof Eh).length;if(s>1||s>0&&a>0)throw new P(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Eh=class n extends zi{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return gA(e._query,t),new lt(e.firestore,e.converter,Cy(e._query,t))}_parse(e){let t=Wi(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new P(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){lb(p,h);let v=[];for(let b of p)v.push(ub(u,o,b));m={arrayValue:{values:v}}}else m=ub(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||lb(p,h),m=tA(a,s,p,h==="in"||h==="not-in");return fe.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function sA(n,e,t){let r=e,i=kh("where",n);return Eh._create(i,r,t)}var Kv=class n extends Bc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Te.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)gA(s,u),s=Cy(s,u)}(e._query,t),new lt(e.firestore,e.converter,Cy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Qv=class n extends zi{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new P(x.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Li(o,s)}(e._query,this._field,this._direction);return new lt(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new yn(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function aA(n,e="asc"){let t=e,r=kh("orderBy",n);return Qv._create(r,t)}var Dh=class n extends zi{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new lt(e.firestore,e.converter,Ud(e._query,this._limit,this._limitType))}};function cA(n){return jS("limit",n),Dh._create("limit",n,"F")}function uA(n){return jS("limitToLast",n),Dh._create("limitToLast",n,"L")}var Ch=class n extends zi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=pA(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function lA(...n){return Ch._create("startAt",n,!0)}function dA(...n){return Ch._create("startAfter",n,!1)}var Th=class n extends zi{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=pA(e,this.type,this._docOrFields,this._inclusive);return new lt(e.firestore,e.converter,function(i,o){return new yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function hA(...n){return Th._create("endBefore",n,!1)}function fA(...n){return Th._create("endAt",n,!0)}function pA(n,e,t,r){if(t[0]=Oe(t[0]),t[0]instanceof qi)return function(o,s,a,u,l){if(!u)throw new P(x.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of hs(o))if(p.field.isKeyField())h.push(Fi(s,u.key));else{let m=u.data.field(p.field);if(Sh(m))throw new P(x.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let v=p.field.canonicalString();throw new P(x.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${v}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ln(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Wi(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new P(x.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let v=[];for(let b=0;b<h.length;b++){let R=h[b];if(m[b].field.isKeyField()){if(typeof R!="string")throw new P(x.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof R}`);if(!i_(s)&&R.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${R}' contains a slash.`);let N=s.path.child(ve.fromString(R));if(!$.isDocumentKey(N))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);let B=new $(N);v.push(Fi(a,B))}else{let N=tA(u,l,R);v.push(N)}}return new Ln(v,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ub(n,e,t){if(typeof(t=Oe(t))=="string"){if(t==="")throw new P(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i_(e)&&t.indexOf("/")!==-1)throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ve.fromString(t));if(!$.isDocumentKey(r))throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fi(n,new $(r))}if(t instanceof Me)return Fi(n,t._key);throw new P(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Nh(t)}.`)}function lb(n,e){if(!Array.isArray(n)||n.length===0)throw new P(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gA(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new P(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Ms=class{convertValue(e,t="none"){switch(Oi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw z()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Gi(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>ke(s.doubleValue));return new Vc(o)}convertGeoPoint(e){return new Hi(ke(e.latitude),ke(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=n_(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}convertTimestamp(e){let t=sr(e);return new Le(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ve.fromString(e);K(cS(r));let i=new zr(r.get(1),r.get(3)),o=new $(r.popFirst(5));return i.isEqual(t)||Ge(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Oh(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Yv=class extends Ms{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};var or=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},on=class extends qi{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ur(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(kh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ur=class extends on{data(e={}){return super.data(e)}},wn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new or(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ur(this._firestore,this._userDataWriter,r.key,r,new or(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new P(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new Ur(i._firestore,i._userDataWriter,a.doc.key,a.doc,new or(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:o2(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function o2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return z()}}function O_(n,e){return n instanceof on&&e instanceof on?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof wn&&e instanceof wn&&n._firestore===e._firestore&&M_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function mA(n){n=_e(n,Me);let e=_e(n.firestore,Ve);return FS(dt(e),n._key).then(t=>j_(e,n,t))}var lr=class extends Ms{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Me(this.firestore,null,t)}};function yA(n){n=_e(n,Me);let e=_e(n.firestore,Ve),t=dt(e),r=new lr(e);return JV(t,n._key).then(i=>new on(e,r,n._key,i,new or(i!==null&&i.hasLocalMutations,!0),n.converter))}function vA(n){n=_e(n,Me);let e=_e(n.firestore,Ve);return FS(dt(e),n._key,{source:"server"}).then(t=>j_(e,n,t))}function _A(n){n=_e(n,lt);let e=_e(n.firestore,Ve),t=dt(e),r=new lr(e);return oA(n._query),LS(t,n._query).then(i=>new wn(e,r,n,i))}function wA(n){n=_e(n,lt);let e=_e(n.firestore,Ve),t=dt(e),r=new lr(e);return XV(t,n._query).then(i=>new wn(e,r,n,i))}function IA(n){n=_e(n,lt);let e=_e(n.firestore,Ve),t=dt(e),r=new lr(e);return LS(t,n._query,{source:"server"}).then(i=>new wn(e,r,n,i))}function F_(n,e,t){n=_e(n,Me);let r=_e(n.firestore,Ve),i=Oh(n.converter,e,t);return Ls(r,[Ph(Wi(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,He.none())])}function L_(n,e,t,...r){n=_e(n,Me);let i=_e(n.firestore,Ve),o=Wi(i),s;return s=typeof(e=Oe(e))=="string"||e instanceof _n?N_(o,"updateDoc",n._key,e,t,r):R_(o,"updateDoc",n._key,e),Ls(i,[s.toMutation(n._key,He.exists(!0))])}function EA(n){return Ls(_e(n.firestore,Ve),[new Yr(n._key,He.none())])}function DA(n,e){let t=_e(n.firestore,Ve),r=Wc(n),i=Oh(n.converter,e);return Ls(t,[Ph(Wi(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,He.exists(!1))]).then(()=>r)}function V_(n,...e){var t,r,i;n=Oe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Vv(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Vv(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Me)l=_e(n.firestore,Ve),h=Ns(n._key.path),u={next:p=>{e[s]&&e[s](j_(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=_e(n,lt);l=_e(p.firestore,Ve),h=p._query;let m=new lr(l);u={next:v=>{e[s]&&e[s](new wn(l,m,p,v))},error:e[s+1],complete:e[s+2]},oA(n._query)}return function(m,v,b,R){let N=new As(R),B=new Lc(v,N,b);return m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return p_(yield xs(m),B)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return g_(yield xs(m),B)}))}}(dt(l),h,a,u)}function CA(n,e){return e2(dt(n=_e(n,Ve)),Vv(e)?e:{next:e})}function Ls(n,e){return function(r,i){let o=new rt;return r.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){return PV(yield T_(r),i,o)})),o.promise}(dt(n),e)}function j_(n,e,t){let r=t.docs.get(e._key),i=new lr(n);return new on(n,i,e._key,r,new or(t.hasPendingWrites,t.fromCache),e.converter)}var s2={maxAttempts:5};var bh=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wi(e)}set(e,t,r){this._verifyNotCommitted();let i=jr(e,this._firestore),o=Oh(i.converter,t,r),s=Ph(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,He.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=jr(e,this._firestore),s;return s=typeof(t=Oe(t))=="string"||t instanceof _n?N_(this._dataReader,"WriteBatch.update",o._key,t,r,i):R_(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,He.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=jr(e,this._firestore);return this._mutations=this._mutations.concat(new Yr(t._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new P(x.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function jr(n,e){if((n=Oe(n)).firestore!==e)throw new P(x.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Zv=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Wi(t)}get(t){let r=jr(t,this._firestore),i=new Yv(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return z();let s=o[0];if(s.isFoundDocument())return new qi(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new qi(this._firestore,i,r._key,null,r.converter);throw z()})}set(t,r,i){let o=jr(t,this._firestore),s=Oh(o.converter,r,i),a=Ph(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=jr(t,this._firestore),a;return a=typeof(r=Oe(r))=="string"||r instanceof _n?N_(this._dataReader,"Transaction.update",s._key,r,i,o):R_(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=jr(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=jr(e,this._firestore),r=new lr(this._firestore);return super.get(e).then(i=>new on(this._firestore,r,t._key,i._document,new or(!1,!1),t.converter))}};function TA(n,e,t){n=_e(n,Ve);let r=Object.assign(Object.assign({},s2),t);return function(o){if(o.maxAttempts<1)throw new P(x.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new rt;return o.asyncQueue.enqueueAndForget(()=>M(this,null,function*(){let l=yield QV(o);new Fv(o.asyncQueue,l,a,s,u).au()})),u.promise}(dt(n),i=>e(new Zv(n,i)),r)}function bA(){return new jc("deleteField")}function SA(){return new $v("serverTimestamp")}function AA(...n){return new Hv("arrayUnion",n)}function xA(...n){return new qv("arrayRemove",n)}function MA(n){return new zv("increment",n)}(function(e,t=!0){(function(i){Rs=i})(rI),aa(new oi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ve(new ty(r.getProvider("auth-internal")),new oy(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new P(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zr(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),yr(cT,"4.7.3",e),yr(cT,"4.7.3","esm2017")})();var a2="@firebase/firestore-compat",c2="0.3.38";function z_(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new P("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RA(){if(typeof Uint8Array>"u")throw new P("unimplemented","Uint8Arrays are not available in this environment.")}function NA(){if(!Cb())throw new P("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Fh=class n{constructor(e){this._delegate=e}static fromBase64String(e){return NA(),new n(jn.fromBase64String(e))}static fromUint8Array(e){return RA(),new n(jn.fromUint8Array(e))}toBase64(){return NA(),this._delegate.toBase64()}toUint8Array(){return RA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function B_(n){return u2(n,["next","error","complete"])}function u2(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var U_=class{enableIndexedDbPersistence(e,t){return qS(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return zS(e._delegate)}clearIndexedDbPersistence(e){return WS(e._delegate)}},Lh=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zr||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&mn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){BS(this._delegate,e,t,r)}enableNetwork(){return QS(this._delegate)}disableNetwork(){return YS(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,S_("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return KS(this._delegate)}onSnapshotsInSync(e){return CA(this._delegate,e)}get app(){if(!this._appCompat)throw new P("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bs(this,A_(this._delegate,e))}catch(t){throw xt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Bn(this,Wc(this._delegate,e))}catch(t){throw xt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ji(this,US(this._delegate,e))}catch(t){throw xt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return TA(this._delegate,t=>e(new Vh(this,t)))}batch(){return dt(this._delegate),new jh(new bh(this._delegate,e=>Ls(this._delegate,e)))}loadBundle(e){return ZS(this._delegate,e)}namedQuery(e){return JS(this._delegate,e).then(t=>t?new Ji(this,t):null)}},Vs=class extends Ms{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fh(new jn(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Bn.forKey(t,this.firestore,null)}};function l2(n){db(n)}var Vh=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Vs(e)}get(e){let t=Qi(e);return this._delegate.get(t).then(r=>new Yi(this._firestore,new on(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Qi(e);return r?(z_("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Qi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Qi(e);return this._delegate.delete(t),this}},jh=class{constructor(e){this._delegate=e}set(e,t,r){let i=Qi(e);return r?(z_("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Qi(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Qi(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},js=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ur(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zi(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new Vs(e),t),i.set(t,o)),o}};js.INSTANCES=new WeakMap;var Bn=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Vs(e)}static forPath(e,t,r){if(e.length%2!==0)throw new P("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Me(t._delegate,r,new $(e)))}static forKey(e,t,r){return new n(t,new Me(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Bs(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bs(this.firestore,A_(this._delegate,e))}catch(t){throw xt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Oe(e),e instanceof Me?x_(this._delegate,e):!1}set(e,t){t=z_("DocumentReference.set",t);try{return t?F_(this._delegate,e,t):F_(this._delegate,e)}catch(r){throw xt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?L_(this._delegate,e):L_(this._delegate,e,t,...r)}catch(i){throw xt(i,"updateDoc()","DocumentReference.update()")}}delete(){return EA(this._delegate)}onSnapshot(...e){let t=PA(e),r=kA(e,i=>new Yi(this.firestore,new on(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return V_(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=yA(this._delegate):e?.source==="server"?t=vA(this._delegate):t=mA(this._delegate),t.then(r=>new Yi(this.firestore,new on(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xt(n,e,t){return n.message=n.message.replace(e,t),n}function PA(n){for(let e of n)if(typeof e=="object"&&!B_(e))return e;return{}}function kA(n,e){var t,r;let i;return B_(n[0])?i=n[0]:B_(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Yi=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Bn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return O_(this._delegate,e._delegate)}},Zi=class extends Yi{data(e){let t=this._delegate.data(e);return this._delegate._converter||hb(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ji=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Vs(e)}where(e,t,r){try{return new n(this.firestore,hr(this._delegate,sA(e,t,r)))}catch(i){throw xt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,hr(this._delegate,aA(e,t)))}catch(r){throw xt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,hr(this._delegate,cA(e)))}catch(t){throw xt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,hr(this._delegate,uA(e)))}catch(t){throw xt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,hr(this._delegate,lA(...e)))}catch(t){throw xt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,hr(this._delegate,dA(...e)))}catch(t){throw xt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,hr(this._delegate,hA(...e)))}catch(t){throw xt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,hr(this._delegate,fA(...e)))}catch(t){throw xt(t,"endAt()","Query.endAt()")}}isEqual(e){return M_(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=wA(this._delegate):e?.source==="server"?t=IA(this._delegate):t=_A(this._delegate),t.then(r=>new Kc(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=PA(e),r=kA(e,i=>new Kc(this.firestore,new wn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return V_(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},$_=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zi(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Kc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ji(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zi(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $_(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Zi(this._firestore,r))})}isEqual(e){return O_(this._delegate,e._delegate)}},Bs=class n extends Ji{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Bn(this.firestore,e):null}doc(e){try{return e===void 0?new Bn(this.firestore,Wc(this._delegate)):new Bn(this.firestore,Wc(this._delegate,e))}catch(t){throw xt(t,"doc()","CollectionReference.doc()")}}add(e){return DA(this._delegate,e).then(t=>new Bn(this.firestore,t))}isEqual(e){return x_(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(js.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Qi(n){return _e(n,Me)}var H_=class n{constructor(...e){this._delegate=new _n(...e)}static documentId(){return new n(We.keyField().canonicalString())}isEqual(e){return e=Oe(e),e instanceof _n?this._delegate._internalPath.isEqual(e._internalPath):!1}};var q_=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=SA();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=bA();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=AA(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=xA(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=MA(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var d2={Firestore:Lh,GeoPoint:Hi,Timestamp:Le,Blob:Fh,Transaction:Vh,WriteBatch:jh,DocumentReference:Bn,DocumentSnapshot:Yi,Query:Ji,QueryDocumentSnapshot:Zi,QuerySnapshot:Kc,CollectionReference:Bs,FieldPath:H_,FieldValue:q_,setLogLevel:l2,CACHE_SIZE_UNLIMITED:$S};function h2(n,e){n.INTERNAL.registerComponent(new oi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},d2)))}function f2(n){h2(n,(e,t)=>new Lh(e,t,new U_)),n.registerVersion(a2,c2)}f2(Bt);function p2(n,e=da){return new pe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function OA(n,e){return p2(n,e)}function g2(n,e){return OA(n,e).pipe(di(void 0),pa(),G(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function K_(n,e){return OA(n,e).pipe(G(t=>({payload:t,type:"query"})))}var Bh=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=VA(r,t);return new $h(i,o,this.afs)}snapshotChanges(){return g2(this.ref,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return this.snapshotChanges().pipe(G(({payload:t})=>e.idField?xe(V({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ee(this.ref.get(e)).pipe(Ft)}};function Uh(n,e){return K_(n,e).pipe(di(void 0),pa(),G(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function FA(n,e,t){return Uh(n,t).pipe(li((r,i)=>m2(r,i.map(o=>o.payload),e),[]),$f(),G(r=>r.map(i=>({type:i.type,payload:i}))))}function m2(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=y2(n,r))}),n}function G_(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function y2(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return G_(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return G_(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return G_(n,e.oldIndex,1);break}return n}function LA(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var $h=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Uh(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(G(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(di(void 0),pa(),ut(([r,i])=>i.length>0||!r),G(([,r])=>r),Ft)}auditTrail(e){return this.stateChanges(e).pipe(li((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=LA(e);return FA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return K_(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.payload.docs.map(r=>e.idField?xe(V({},r.data()),{[e.idField]:r.id}):r.data())),Ft)}get(e){return Ee(this.query.get(e)).pipe(Ft)}add(e){return this.ref.add(e)}doc(e){return new Bh(this.ref.doc(e),this.afs)}},W_=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Uh(this.query,this.afs.schedulers.outsideAngular).pipe(Ft):Uh(this.query,this.afs.schedulers.outsideAngular).pipe(G(t=>t.filter(r=>e.indexOf(r.type)>-1)),ut(t=>t.length>0),Ft)}auditTrail(e){return this.stateChanges(e).pipe(li((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=LA(e);return FA(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ft)}valueChanges(e={}){return K_(this.query,this.afs.schedulers.outsideAngular).pipe(G(r=>r.payload.docs.map(i=>e.idField?V({[e.idField]:i.id},i.data()):i.data())),Ft)}get(e){return Ee(this.query.get(e)).pipe(Ft)}},v2=new W("angularfire2.enableFirestorePersistence"),_2=new W("angularfire2.firestore.persistenceSettings"),w2=new W("angularfire2.firestore.settings"),I2=new W("angularfire2.firestore.use-emulator");function VA(n,e=t=>t){return{query:e(n),ref:n}}var Vt=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,v,b,R,N,B,q){this.schedulers=u;let F=ac(t,a,r),Z=h;p&&Um(F,a,m,b,R,N,v,B),[this.firestore,this.persistenceEnabled$]=vd(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let te=a.runOutsideAngular(()=>F.firestore());if(o&&te.settings(o),Z&&te.useEmulator(...Z),i&&!Ei(s)){let J=()=>{try{return Ee(te.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),X(!1)}};return[te,a.runOutsideAngular(J)]}else return[te,X(!1)]},[o,Z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=VA(i,r),a=this.schedulers.ngZone.run(()=>o);return new $h(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new W_(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Bh(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(O(Jo),O(Xo,8),O(v2,8),O(w2,8),O(Pt),O(me),O(gd),O(_2,8),O(I2,8),O(oT,8),O(Om,8),O(Fm,8),O(Lm,8),O(Vm,8),O(jm,8),O(Bm,8),O(bi,8))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var jA=(()=>{class n{constructor(t){this.db=t,this.accesoHeader="header service running...",this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var BA=(()=>{class n{constructor(t){this.headerService=t,this.header=new fd,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r[0],console.log(this.header)})}static{this.\u0275fac=function(r){return new(r||n)($e(jA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-header"]],decls:27,vars:7,consts:[[1,"header-row"],["colspan","3",1,"header-container"],[1,"header-content"],[1,"header-left"],[1,"name"],[1,"goal"],[1,"header-photo"],["alt","Foto de perfil",1,"profile-photo",3,"src"],[1,"header-contact"]],template:function(r,i){r&1&&(ne(0,"tr",0)(1,"td",1)(2,"div",2)(3,"div",3)(4,"h2",4),ae(5),Q(),ne(6,"p",5),ae(7),Q()(),ne(8,"div",6),$t(9,"img",7),Q(),ne(10,"div",8)(11,"p")(12,"strong"),ae(13,"Email:"),Q(),ae(14),Q(),ne(15,"p")(16,"strong"),ae(17,"Tel:"),Q(),ae(18),Q(),ne(19,"p")(20,"strong"),ae(21,"Ubicaci\xF3n:"),Q(),ae(22),Q(),ne(23,"p")(24,"strong"),ae(25,"Redes:"),Q(),ae(26),Q()()()()()),r&2&&(he(5),ze(i.header.name),he(2),ze(i.header.goalLife),he(2),mt("src",i.header.photoUrl,OD),he(5),fn(" ",i.header.email,""),he(4),fn(" ",i.header.phoneNumber,""),he(4),fn(" ",i.header.location,""),he(4),fn(" ",i.header.socialNetwork,""))},styles:[".header-container[_ngcontent-%COMP%]{background-color:#1f2937;padding:2rem;text-align:center;color:#fff}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:2rem}.header-left[_ngcontent-%COMP%], .header-photo[_ngcontent-%COMP%], .header-contact[_ngcontent-%COMP%]{flex:1;min-width:200px}.name[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.5rem}.goal[_ngcontent-%COMP%]{font-style:italic;font-size:1rem;margin:0}.profile-photo[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover;border-radius:50%;border:3px solid white}.header-contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.3rem 0;font-size:.95rem}@media screen and (max-width: 768px){.header-content[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.profile-photo[_ngcontent-%COMP%]{margin:1rem 0}}"]})}}return n})();var UA=(()=>{class n{constructor(t){this.db=t,this.accesoWorkExperience="work experience running...",this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function T2(n,e){if(n&1&&(ne(0,"ul",3)(1,"li",4)(2,"p",5),ae(3),Q(),ne(4,"p",6)(5,"b"),ae(6),Q()(),ne(7,"p",7),ae(8),Q(),ne(9,"p",8)(10,"i"),ae(11),Q()(),ne(12,"p",9)(13,"strong"),ae(14,"Logros:"),Q(),ae(15),Q()()()),n&2){let t=e.$implicit;he(3),Ra("",t.starDate," - ",t.endDate,""),he(3),ze(t.position),he(2),ze(t.company),he(3),ze(t.location),he(4),fn(" ",t.accomplishments,"")}}var $A=(()=>{class n{constructor(t){this.workExperienceService=t,this.workExperience=[],console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.workExperience)})}static{this.\u0275fac=function(r){return new(r||n)($e(UA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-work-experience"]],decls:4,vars:1,consts:[[1,"work-experience-section"],[1,"section-title"],["class","work-experience-list",4,"ngFor","ngForOf"],[1,"work-experience-list"],[1,"work-experience-item"],[1,"job-dates"],[1,"job-position"],[1,"job-company"],[1,"job-location"],[1,"job-accomplishments"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"h3",1),ae(2,"Experiencia Laboral"),Q(),kt(3,T2,16,6,"ul",2),Q()),r&2&&(he(3),mt("ngForOf",i.workExperience))},dependencies:[en],styles:[".work-experience-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.work-experience-item[_ngcontent-%COMP%]{background-color:#f9f9f9;border-left:5px solid #3b82f6;padding:1rem;margin-bottom:1rem;box-shadow:0 2px 5px #0000001a;border-radius:8px;transition:transform .2s ease,background-color .2s ease}.work-experience-item[_ngcontent-%COMP%]:hover{transform:scale(1.01);background-color:#f0f4ff}.job-dates[_ngcontent-%COMP%]{color:#555;font-size:.9rem;margin-bottom:.3rem}.job-position[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;margin-bottom:.2rem;color:#1f2937}.job-company[_ngcontent-%COMP%]{color:#374151;font-size:1rem}.job-location[_ngcontent-%COMP%]{font-style:italic;color:#007bff}.job-accomplishments[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.95rem;color:#444}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333;margin-bottom:1rem}"]})}}return n})();var HA=(()=>{class n{constructor(t){this.db=t,this.accesoEducation="Education Server is Running...",this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function A2(n,e){if(n&1&&(ne(0,"ul",3)(1,"li",4)(2,"p",5),ae(3),Q(),ne(4,"p",6),ae(5),Q(),ne(6,"p",7),ae(7),Q()()()),n&2){let t=e.$implicit;he(3),Ra("",t.startDate," - ",t.endDate,""),he(2),ze(t.Degree),he(2),ze(t.Collage)}}var qA=(()=>{class n{constructor(t){this.educationService=t,this.education=[],console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}static{this.\u0275fac=function(r){return new(r||n)($e(HA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-education"]],decls:4,vars:1,consts:[[1,"education-section"],[1,"section-title"],["class","education-list",4,"ngFor","ngForOf"],[1,"education-list"],[1,"education-item"],[1,"education-dates"],[1,"education-degree"],[1,"education-school"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"h3",1),ae(2," Educaci\xF3n"),Q(),kt(3,A2,8,4,"ul",2),Q()),r&2&&(he(3),mt("ngForOf",i.education))},dependencies:[en],styles:[".education-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.education-item[_ngcontent-%COMP%]{background-color:#f9f9f9;border-left:5px solid #3b82f6;padding:1rem;margin-bottom:1rem;box-shadow:0 2px 5px #0000001a;border-radius:8px;transition:transform .2s ease}.education-item[_ngcontent-%COMP%]:hover{transform:scale(1.01);background-color:#f0f4ff}.education-dates[_ngcontent-%COMP%]{color:#555;font-size:.9rem;margin-bottom:.3rem}.education-degree[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;margin-bottom:.2rem;color:#1f2937}.education-school[_ngcontent-%COMP%]{color:#374151;font-size:1rem}"]})}}return n})();var zA=(()=>{class n{constructor(t){this.db=t,this.accesoSkills="Skills Services are Runnig",this.dbPath="/skill",this.skillRef=t.collection(this.dbPath)}getSkill(){return this.skillRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function R2(n,e){if(n&1&&(ne(0,"ul",3)(1,"li",4)(2,"span",5),ae(3),Q(),ne(4,"span",6),ae(5),Q()()()),n&2){let t=e.$implicit;he(3),ze(t.skill),he(2),ze(t.percentage)}}var GA=(()=>{class n{constructor(t){this.skillsService=t,this.skills=[],console.log(this.skillsService),this.skillsService.getSkill().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}static{this.\u0275fac=function(r){return new(r||n)($e(zA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-skills"]],decls:4,vars:1,consts:[[1,"skills-container"],[1,"skills-title"],["class","skills-list",4,"ngFor","ngForOf"],[1,"skills-list"],[1,"skills-item"],[1,"skills-name"],[1,"skills-percentage"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"h2",1),ae(2,"Habilidades"),Q(),kt(3,R2,6,2,"ul",2),Q()),r&2&&(he(3),mt("ngForOf",i.skills))},dependencies:[en],styles:[".skills-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.skills-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f9f9f9;border:1px solid #ddd;padding:10px;margin-bottom:5px;border-radius:5px;transition:background-color .3s ease}.skills-item[_ngcontent-%COMP%]:hover{background-color:#e6f7ff}.skills-name[_ngcontent-%COMP%]{font-weight:700;color:#333}.skills-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:600}.skills-container[_ngcontent-%COMP%]{margin-top:20px}.skills-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333;margin-bottom:15px}"]})}}return n})();var WA=(()=>{class n{constructor(t){this.db=t,this.accesoCertificate="Certificate Service is Running",this.dbPath="/Certificates",this.certificateRef=t.collection(this.dbPath)}getCertificate(){return this.certificateRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function k2(n,e){if(n&1&&(ne(0,"ul",3)(1,"li",4)(2,"p",5),ae(3),Q(),ne(4,"p",6),ae(5),Q(),ne(6,"p",7),ae(7),Q()()()),n&2){let t=e.$implicit;he(3),ze(t.certificate),he(2),ze(t.context),he(2),ze(t.year)}}var KA=(()=>{class n{constructor(t){this.certificatesService=t,this.certificates=[],console.log(this.certificatesService),this.certificatesService.getCertificate().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}static{this.\u0275fac=function(r){return new(r||n)($e(WA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-certificates"]],decls:4,vars:1,consts:[[1,"certificates-container"],[1,"certificates-title"],["class","certificates-list",4,"ngFor","ngForOf"],[1,"certificates-list"],[1,"certificates-item"],[1,"certificate-name"],[1,"certificate-issuer"],[1,"certificate-date"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"h2",1),ae(2,"Certificados"),Q(),kt(3,k2,8,3,"ul",2),Q()),r&2&&(he(3),mt("ngForOf",i.certificates))},dependencies:[en],styles:[".certificates-container[_ngcontent-%COMP%]{margin-top:20px}.certificates-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333;margin-bottom:1rem}.certificates-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.certificates-item[_ngcontent-%COMP%]{background-color:#f9f9f9;border-left:5px solid #3b82f6;padding:1rem;margin-bottom:1rem;box-shadow:0 2px 5px #0000001a;border-radius:8px;transition:transform .2s ease,background-color .2s ease}.certificates-item[_ngcontent-%COMP%]:hover{transform:scale(1.01);background-color:#f0f4ff}.certificate-name[_ngcontent-%COMP%]{font-weight:700;font-size:1.1rem;color:#1f2937;margin-bottom:.3rem}.certificate-issuer[_ngcontent-%COMP%]{font-size:1rem;color:#374151}.certificate-date[_ngcontent-%COMP%]{font-size:.9rem;color:#555}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333;margin-bottom:1rem}"]})}}return n})();var QA=(()=>{class n{constructor(t){this.db=t,this.accesoLanguages="Languagues Service is Running...",this.dbPath="/languages",this.languageRef=t.collection(this.dbPath)}getLanguage(){return this.languageRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function L2(n,e){if(n&1&&(ne(0,"ul",3)(1,"li",4)(2,"span",5),ae(3),Q(),ne(4,"span",6),ae(5),Q()()()),n&2){let t=e.$implicit;he(3),ze(t.language),he(2),ze(t.percentage)}}var YA=(()=>{class n{constructor(t){this.languagesService=t,this.languages=[],console.log(this.languagesService),this.languagesService.getLanguage().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}static{this.\u0275fac=function(r){return new(r||n)($e(QA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-languages"]],decls:4,vars:1,consts:[[1,"language-container"],[1,"language-title"],["class","language-list",4,"ngFor","ngForOf"],[1,"language-list"],[1,"language-item"],[1,"language-name"],[1,"language-percentage"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"h2",1),ae(2,"Idiomas"),Q(),kt(3,L2,6,2,"ul",2),Q()),r&2&&(he(3),mt("ngForOf",i.languages))},dependencies:[en],styles:[".language-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.language-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#f9f9f9;border:1px solid #ddd;padding:10px;margin-bottom:5px;border-radius:5px;transition:background-color .3s ease}.language-item[_ngcontent-%COMP%]:hover{background-color:#e6f7ff}.language-name[_ngcontent-%COMP%]{font-weight:700;color:#333}.language-percentage[_ngcontent-%COMP%]{color:#007bff;font-weight:600}"]})}}return n})();var ZA=(()=>{class n{constructor(t){this.db=t,this.accessoInterests="Interests Service is Running",this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterests(){return this.interestsRef}static{this.\u0275fac=function(r){return new(r||n)(O(Vt))}}static{this.\u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function B2(n,e){n&1&&(_g(0),ae(1," | "),wg())}function U2(n,e){if(n&1&&(ne(0,"li",4),ae(1),kt(2,B2,2,0,"ng-container",5),Q()),n&2){let t=e.$implicit,r=e.last;he(),fn(" ",t.interest,""),he(),mt("ngIf",!r)}}var JA=(()=>{class n{constructor(t){this.interestsService=t,this.interests=[],console.log(this.interestsService),this.interestsService.getInterests().snapshotChanges().pipe(G(r=>r.map(i=>V({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}static{this.\u0275fac=function(r){return new(r||n)($e(ZA))}}static{this.\u0275cmp=ot({type:n,selectors:[["app-interests"]],decls:5,vars:1,consts:[[1,"interests-section"],[1,"section-title"],[1,"interests-list"],["class","interest-item",4,"ngFor","ngForOf"],[1,"interest-item"],[4,"ngIf"]],template:function(r,i){r&1&&(ne(0,"div",0)(1,"h3",1),ae(2,"Intereses"),Q(),ne(3,"ul",2),kt(4,U2,3,2,"li",3),Q()()),r&2&&(he(4),mt("ngForOf",i.interests))},dependencies:[en,V0],styles:['.interests-section[_ngcontent-%COMP%]{margin:20px 0}.section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#333;margin-bottom:1rem}.interests-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}.interest-item[_ngcontent-%COMP%]{font-size:1.2rem;color:#555;display:inline;font-weight:600}.interest-item[_ngcontent-%COMP%]   ng-container[_ngcontent-%COMP%]{margin:0 5px}.interest-item[_ngcontent-%COMP%]:after{content:""}']})}}return n})();var XA=(()=>{class n{constructor(){this.title="mycv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ot({type:n,selectors:[["app-root"]],decls:21,vars:0,consts:[[1,"styled-table"],["colspan","2",1,"header-cell"],[1,"table-cell"]],template:function(r,i){r&1&&(ne(0,"table",0)(1,"thead")(2,"tr")(3,"td",1),$t(4,"app-header"),Q()()(),ne(5,"tbody")(6,"tr")(7,"td",2),$t(8,"app-work-experience"),Q(),ne(9,"td",2),$t(10,"app-skills"),Q()(),ne(11,"tr")(12,"td",2),$t(13,"app-education"),Q(),ne(14,"td",2),$t(15,"app-certificates"),Q()(),ne(16,"tr")(17,"td",2),$t(18,"app-languages"),Q(),ne(19,"td",2),$t(20,"app-interests"),Q()()()())},dependencies:[BA,$A,qA,GA,KA,YA,JA],styles:[".styled-table[_ngcontent-%COMP%]{width:100%;max-width:1200px;min-width:800px;height:600px;border-collapse:separate;border-spacing:0 10px;margin:20px auto;background-color:#f8f8f8;border-radius:10px;-webkit-user-select:none;user-select:none;overflow-y:auto}.styled-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#1f2937;color:#fff}.header-cell[_ngcontent-%COMP%]{font-size:24px;text-align:center;padding:15px;border-radius:10px;font-weight:700}.table-cell[_ngcontent-%COMP%]{padding:20px;background-color:#fff;text-align:center;border-radius:8px;box-shadow:0 4px 6px #0000001a;-webkit-user-select:none;user-select:none;transition:transform .3s ease}.table-cell[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:first-child   .table-cell[_ngcontent-%COMP%]{border-top-left-radius:10px;border-top-right-radius:10px}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   .table-cell[_ngcontent-%COMP%]{border-bottom-left-radius:10px;border-bottom-right-radius:10px}@media screen and (max-width: 768px){.styled-table[_ngcontent-%COMP%]{border:none}.table-cell[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:15px}.header-cell[_ngcontent-%COMP%]{font-size:20px}}"]})}}return n})();var ex={production:!1,firebase:{apiKey:"AIzaSyAhXFZnSoplTKnWAToyz17iADYtot7uKzc",authDomain:"josealan2119-mycv-19640.firebaseapp.com",projectId:"josealan2119-mycv-19640",storageBucket:"josealan2119-mycv-19640.firebasestorage.app",messagingSenderId:"320363882070",appId:"1:320363882070:web:aab1e255f9aab19289bdf7"}};var tx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=bt({type:n,bootstrap:[XA]})}static{this.\u0275inj=Tt({imports:[Q0,$C,iT.initializeApp(ex.firebase)]})}}return n})();K0().bootstrapModule(tx,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
